
(function(c,b,a){c.fn.yit_infinitescroll=function(k){var d=c.extend({nextSelector:false,navSelector:false,itemSelector:false,contentSelector:false,maxPage:false,loader:false,is_shop:false},k),f=false,h=false,l=c(d.nextSelector).attr("href");if(c(d.nextSelector).length&&c(d.navSelector).length&&c(d.itemSelector).length&&c(d.contentSelector).length){c(d.navSelector).hide()}else{h=true}var i=c(d.contentSelector).find(d.itemSelector).first(),g=i.nextUntil(".first",d.itemSelector).length+1;var j=function(){var m=c(d.contentSelector).find(d.itemSelector).last();if(d.loader){c(d.navSelector).after('<div class="yith-infs-loader">'+d.loader+"</div>")}f=true;c.ajax({url:l,dataType:"html",cache:false,success:function(q){var r=c(q),p=r.find(d.itemSelector),o=r.find(d.nextSelector),n=l;if(o.length){l=o.attr("href");l=l.split("?_=")[0]}else{h=true;c(a).trigger("yith-infs-scroll-finished")}if(!m.hasClass("last")&&d.is_shop){e(m,g,p)}m.after(p);c(".yith-infs-loader").remove();c(a).trigger("yith_infs_adding_elem",[p,n]);p.addClass("yith-infs-animated");setTimeout(function(){f=false;p.removeClass("yith-infs-animated");c(a).trigger("yith_infs_added_elem",[p,n])},1000)}})};var e=function(p,n,o){var q=(n-p.prevUntil(".last",d.itemSelector).length),m=0;o.each(function(){var r=c(this);m++;r.removeClass("first");r.removeClass("last");if(((m-q)%n)===0){r.addClass("first")}else{if(((m-(q-1))%n)===0){r.addClass("last")}}})};c(b).on("scroll touchstart",function(){c(this).trigger("yith_infs_start")});c(b).on("yith_infs_start",function(){var m=c(this),n=c(d.itemSelector).last();if(typeof n=="undefined"){return}if(!f&&!h&&(m.scrollTop()+m[0].innerHeight)>=(n.offset().top+n.height())){j()}})}})(jQuery,window,document);