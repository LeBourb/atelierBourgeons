
(function(b){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{var a;if(typeof window!=="undefined"){a=window}else{if(typeof global!=="undefined"){a=global}else{if(typeof self!=="undefined"){a=self}else{a=this}}}a.PIXI=b()}}})(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(f,g,e){(function(i,h){
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
(function(){var K={};function U(){}function O(Z){return Z}function t(Z){return !!Z}function m(Z){return !Z}var R;var y=typeof self==="object"&&self.self===self&&self||typeof h==="object"&&h.global===h&&h||this;if(y!=null){R=y.async}K.noConflict=function(){y.async=R;return K};function k(Z){return function(){if(Z===null){throw new Error("Callback was already called.")}Z.apply(this,arguments);Z=null}}function w(Z){return function(){if(Z===null){return}Z.apply(this,arguments);Z=null}}var E=Object.prototype.toString;var V=Array.isArray||function(Z){return E.call(Z)==="[object Array]"};var p=function(aa){var Z=typeof aa;return Z==="function"||Z==="object"&&!!aa};function P(Z){return V(Z)||(typeof Z.length==="number"&&Z.length>=0&&Z.length%1===0)}function T(Z,ab){var aa=-1,ac=Z.length;while(++aa<ac){ab(Z[aa],aa,Z)}}function B(aa,ac){var ab=-1,ad=aa.length,Z=Array(ad);while(++ab<ad){Z[ab]=ac(aa[ab],ab,aa)}return Z}function q(Z){return B(Array(Z),function(aa,ab){return ab})}function C(Z,ab,aa){T(Z,function(ac,ae,ad){aa=ab(aa,ac,ae,ad)});return aa}function W(Z,aa){T(A(Z),function(ab){aa(Z[ab],ab)})}function Q(Z,ab){for(var aa=0;aa<Z.length;aa++){if(Z[aa]===ab){return aa}}return -1}var A=Object.keys||function(ab){var aa=[];for(var Z in ab){if(ab.hasOwnProperty(Z)){aa.push(Z)}}return aa};function s(ab){var aa=-1;var Z;var ad;if(P(ab)){Z=ab.length;return function ac(){aa++;return aa<Z?aa:null}}else{ad=A(ab);Z=ad.length;return function ac(){aa++;return aa<Z?ad[aa]:null}}}function r(Z,aa){aa=aa==null?Z.length-1:+aa;return function(){var ad=Math.max(arguments.length-aa,0);var ac=Array(ad);for(var ab=0;ab<ad;ab++){ac[ab]=arguments[ab+aa]}switch(aa){case 0:return Z.call(this,ac);case 1:return Z.call(this,arguments[0],ac)}}}function n(Z){return function(ab,aa,ac){return Z(ab,ac)}}var u=typeof setImmediate==="function"&&setImmediate;var I=u?function(Z){u(Z)}:function(Z){setTimeout(Z,0)};if(typeof i==="object"&&typeof i.nextTick==="function"){K.nextTick=i.nextTick}else{K.nextTick=I}K.setImmediate=u?I:K.nextTick;K.forEach=K.each=function(Z,aa,ab){return K.eachOf(Z,n(aa),ab)};K.forEachSeries=K.eachSeries=function(Z,aa,ab){return K.eachOfSeries(Z,n(aa),ab)};K.forEachLimit=K.eachLimit=function(Z,aa,ab,ac){return N(aa)(Z,n(ab),ac)};K.forEachOf=K.eachOf=function(ab,ae,af){af=w(af||U);ab=ab||[];var aa=s(ab);var ac,ad=0;while((ac=aa())!=null){ad+=1;ae(ab[ac],ac,k(Z))}if(ad===0){af(null)}function Z(ag){ad--;if(ag){af(ag)}else{if(ac===null&&ad<=0){af(null)}}}};K.forEachOfSeries=K.eachOfSeries=function(ad,ac,ae){ae=w(ae||U);ad=ad||[];var Z=s(ad);var ab=Z();function aa(){var af=true;if(ab===null){return ae(null)}ac(ad[ab],ab,k(function(ag){if(ag){ae(ag)}else{ab=Z();if(ab===null){return ae(null)}else{if(af){K.setImmediate(aa)}else{aa()}}}}));af=false}aa()};K.forEachOfLimit=K.eachOfLimit=function(ab,Z,aa,ac){N(Z)(ab,aa,ac)};function N(Z){return function(af,ae,ah){ah=w(ah||U);af=af||[];var aa=s(af);if(Z<=0){return ah(null)}var ab=false;var ac=0;var ad=false;(function ag(){if(ab&&ac<=0){return ah(null)}while(ac<Z&&!ad){var ai=aa();if(ai===null){ab=true;if(ac<=0){ah(null)}return}ac+=1;ae(af[ai],ai,k(function(aj){ac-=1;if(aj){ah(aj);ad=true}else{ag()}}))}})()}}function G(Z){return function(ab,aa,ac){return Z(K.eachOf,ab,aa,ac)}}function j(Z){return function(ac,aa,ab,ad){return Z(N(aa),ac,ab,ad)}}function M(Z){return function(ab,aa,ac){return Z(K.eachOfSeries,ab,aa,ac)}}function D(ac,Z,ab,ad){ad=w(ad||U);Z=Z||[];var aa=P(Z)?[]:{};ac(Z,function(af,ae,ag){ab(af,function(ai,ah){aa[ae]=ah;ag(ai)})},function(ae){ad(ae,aa)})}K.map=G(D);K.mapSeries=M(D);K.mapLimit=j(D);K.inject=K.foldl=K.reduce=function(Z,aa,ab,ac){K.eachOfSeries(Z,function(ad,ae,af){ab(aa,ad,function(ah,ag){aa=ag;af(ah)})},function(ad){ac(ad,aa)})};K.foldr=K.reduceRight=function(Z,aa,ab,ad){var ac=B(Z,O).reverse();K.reduce(ac,aa,ab,ad)};K.transform=function(Z,aa,ab,ac){if(arguments.length===3){ac=ab;ab=aa;aa=V(Z)?[]:{}}K.eachOf(Z,function(af,ae,ad){ab(aa,af,ae,ad)},function(ad){ac(ad,aa)})};function S(ac,Z,ab,ad){var aa=[];ac(Z,function(ae,af,ag){ab(ae,function(ah){if(ah){aa.push({index:af,value:ae})}ag()})},function(){ad(B(aa.sort(function(af,ae){return af.index-ae.index}),function(ae){return ae.value}))})}K.select=K.filter=G(S);K.selectLimit=K.filterLimit=j(S);K.selectSeries=K.filterSeries=M(S);function J(ab,Z,aa,ac){S(ab,Z,function(ae,ad){aa(ae,function(af){ad(!af)})},ac)}K.reject=G(J);K.rejectLimit=j(J);K.rejectSeries=M(J);function H(aa,Z,ab){return function(ad,af,ag,ac){function ae(){if(ac){ac(ab(false,void 0))}}function ah(ai,aj,ak){if(!ac){return ak()}ag(ai,function(al){if(ac&&Z(al)){ac(ab(true,ai));ac=ag=false}ak()})}if(arguments.length>3){aa(ad,af,ah,ae)}else{ac=ag;ag=af;aa(ad,ah,ae)}}}K.any=K.some=H(K.eachOf,t,O);K.someLimit=H(K.eachOfLimit,t,O);K.all=K.every=H(K.eachOf,m,m);K.everyLimit=H(K.eachOfLimit,m,m);function x(aa,Z){return Z}K.detect=H(K.eachOf,O,x);K.detectSeries=H(K.eachOfSeries,O,x);K.detectLimit=H(K.eachOfLimit,O,x);K.sortBy=function(Z,ab,ac){K.map(Z,function(ad,ae){ab(ad,function(af,ag){if(af){ae(af)}else{ae(null,{value:ad,criteria:ag})}})},function(ae,ad){if(ae){return ac(ae)}else{ac(null,B(ad.sort(aa),function(af){return af.value}))}});function aa(ag,af){var ae=ag.criteria,ad=af.criteria;return ae<ad?-1:ae>ad?1:0}};K.auto=function(ab,ai,aj){if(typeof arguments[1]==="function"){aj=ai;ai=null}aj=w(aj||U);var ak=A(ab);var aa=ak.length;if(!aa){return aj(null)}if(!ai){ai=aa}var ad={};var ag=0;var ah=false;var af=[];function Z(al){af.unshift(al)}function ac(am){var al=Q(af,am);if(al>=0){af.splice(al,1)}}function ae(){aa--;T(af.slice(0),function(al){al()})}Z(function(){if(!aa){aj(null,ad)}});T(ak,function(an){if(ah){return}var am=V(ab[an])?ab[an]:[ab[an]];var at=r(function(aw,au){ag--;if(au.length<=1){au=au[0]}if(aw){var av={};W(ad,function(ay,ax){av[ax]=ay});av[an]=au;ah=true;aj(aw,av)}else{ad[an]=au;K.setImmediate(ae)}});var ap=am.slice(0,am.length-1);var al=ap.length;var ar;while(al--){if(!(ar=ab[ap[al]])){throw new Error("Has nonexistent dependency in "+ap.join(", "))}if(V(ar)&&Q(ar,an)>=0){throw new Error("Has cyclic dependencies")}}function ao(){return ag<ai&&C(ap,function(av,au){return(av&&ad.hasOwnProperty(au))},true)&&!ad.hasOwnProperty(an)}if(ao()){ag++;am[am.length-1](at,ad)}else{Z(aq)}function aq(){if(ao()){ag++;ac(aq);am[am.length-1](at,ad)}}})};K.retry=function(aa,ad,ag){var ac=5;var af=0;var ah=[];var Z={times:ac,interval:af};function ae(ak,aj){if(typeof aj==="number"){ak.times=parseInt(aj,10)||ac}else{if(typeof aj==="object"){ak.times=parseInt(aj.times,10)||ac;ak.interval=parseInt(aj.interval,10)||af}else{throw new Error("Unsupported argument type for 'times': "+typeof aj)}}}var ab=arguments.length;if(ab<1||ab>3){throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)")}else{if(ab<=2&&typeof aa==="function"){ag=ad;ad=aa}}if(typeof aa!=="function"){ae(Z,aa)}Z.callback=ag;Z.task=ad;function ai(an,ak){function am(ao,ap){return function(aq){ao(function(at,ar){aq(!at||ap,{err:at,result:ar})},ak)}}function al(ao){return function(ap){setTimeout(function(){ap(null)},ao)}}while(Z.times){var aj=!(Z.times-=1);ah.push(am(Z.task,aj));if(!aj&&Z.interval>0){ah.push(al(Z.interval))}}K.series(ah,function(ao,ap){ap=ap[ap.length-1];(an||Z.callback)(ap.err,ap.result)})}return Z.callback?ai():ai};K.waterfall=function(ac,ab){ab=w(ab||U);if(!V(ac)){var Z=new Error("First argument to waterfall must be an array of functions");return ab(Z)}if(!ac.length){return ab()}function aa(ad){return r(function(ag,ae){if(ag){ab.apply(null,[ag].concat(ae))}else{var af=ad.next();if(af){ae.push(aa(af))}else{ae.push(ab)}Y(ad).apply(null,ae)}})}aa(K.iterator(ac))()};function z(aa,ac,ab){ab=ab||U;var Z=P(ac)?[]:{};aa(ac,function(ad,ae,af){ad(r(function(ah,ag){if(ag.length<=1){ag=ag[0]}Z[ae]=ag;af(ah)}))},function(ad){ab(ad,Z)})}K.parallel=function(aa,Z){z(K.eachOf,aa,Z)};K.parallelLimit=function(ab,Z,aa){z(N(Z),ab,aa)};K.series=function(aa,Z){z(K.eachOfSeries,aa,Z)};K.iterator=function(aa){function Z(ab){function ac(){if(aa.length){aa[ab].apply(null,arguments)}return ac.next()}ac.next=function(){return(ab<aa.length-1)?Z(ab+1):null};return ac}return Z(0)};K.apply=r(function(aa,Z){return r(function(ab){return aa.apply(null,Z.concat(ab))})});function L(ac,aa,ab,ad){var Z=[];ac(aa,function(af,ag,ae){ab(af,function(ah,ai){Z=Z.concat(ai||[]);ae(ah)})},function(ae){ad(ae,Z)})}K.concat=G(L);K.concatSeries=M(L);K.whilst=function(ac,aa,ab){ab=ab||U;if(ac()){var Z=r(function(ae,ad){if(ae){ab(ae)}else{if(ac.apply(this,ad)){aa(Z)}else{ab.apply(null,[null].concat(ad))}}});aa(Z)}else{ab(null)}};K.doWhilst=function(aa,ac,ab){var Z=0;return K.whilst(function(){return ++Z<=1||ac.apply(this,arguments)},aa,ab)};K.until=function(ab,Z,aa){return K.whilst(function(){return !ab.apply(this,arguments)},Z,aa)};K.doUntil=function(Z,ab,aa){return K.doWhilst(Z,function(){return !ab.apply(this,arguments)},aa)};K.during=function(ad,ab,ac){ac=ac||U;var aa=r(function(af,ae){if(af){ac(af)}else{ae.push(Z);ad.apply(this,ae)}});var Z=function(af,ae){if(af){ac(af)}else{if(ae){ab(aa)}else{ac(null)}}};ad(Z)};K.doDuring=function(aa,ac,ab){var Z=0;K.during(function(ad){if(Z++<1){ad(null,true)}else{ac.apply(this,arguments)}},aa,ab)};function o(ag,ad,af){if(ad==null){ad=1}else{if(ad===0){throw new Error("Concurrency must not be zero")}}function Z(ai,ah,ak,aj){if(aj!=null&&typeof aj!=="function"){throw new Error("task callback must be a function")}ai.started=true;if(!V(ah)){ah=[ah]}if(ah.length===0&&ai.idle()){return K.setImmediate(function(){ai.drain()})}T(ah,function(al){var am={data:al,callback:aj||U};if(ak){ai.tasks.unshift(am)}else{ai.tasks.push(am)}if(ai.tasks.length===ai.concurrency){ai.saturated()}});K.setImmediate(ai.process)}function ab(ah,ai){return function(){aa-=1;var ak=false;var aj=arguments;T(ai,function(al){T(ac,function(an,am){if(an===al&&!ak){ac.splice(am,1);ak=true}});al.callback.apply(al,aj)});if(ah.tasks.length+aa===0){ah.drain()}ah.process()}}var aa=0;var ac=[];var ae={tasks:[],concurrency:ad,payload:af,saturated:U,empty:U,drain:U,started:false,paused:false,push:function(ah,ai){Z(ae,ah,false,ai)},kill:function(){ae.drain=U;ae.tasks=[]},unshift:function(ah,ai){Z(ae,ah,true,ai)},process:function(){while(!ae.paused&&aa<ae.concurrency&&ae.tasks.length){var aj=ae.payload?ae.tasks.splice(0,ae.payload):ae.tasks.splice(0,ae.tasks.length);var ai=B(aj,function(ak){return ak.data});if(ae.tasks.length===0){ae.empty()}aa+=1;ac.push(aj[0]);var ah=k(ab(ae,aj));ag(ai,ah)}},length:function(){return ae.tasks.length},running:function(){return aa},workersList:function(){return ac},idle:function(){return ae.tasks.length+aa===0},pause:function(){ae.paused=true},resume:function(){if(ae.paused===false){return}ae.paused=false;var ai=Math.min(ae.concurrency,ae.tasks.length);for(var ah=1;ah<=ai;ah++){K.setImmediate(ae.process)}}};return ae}K.queue=function(ab,Z){var aa=o(function(ad,ac){ab(ad[0],ac)},Z,1);return aa};K.priorityQueue=function(ae,ac){function ab(ag,af){return ag.priority-af.priority}function aa(ak,ai,aj){var ah=-1,af=ak.length-1;while(ah<af){var ag=ah+((af-ah+1)>>>1);if(aj(ai,ak[ag])>=0){ah=ag}else{af=ag-1}}return ah}function Z(ah,ag,af,ai){if(ai!=null&&typeof ai!=="function"){throw new Error("task callback must be a function")}ah.started=true;if(!V(ag)){ag=[ag]}if(ag.length===0){return K.setImmediate(function(){ah.drain()})}T(ag,function(aj){var ak={data:aj,priority:af,callback:typeof ai==="function"?ai:U};ah.tasks.splice(aa(ah.tasks,ak,ab)+1,0,ak);if(ah.tasks.length===ah.concurrency){ah.saturated()}K.setImmediate(ah.process)})}var ad=K.queue(ae,ac);ad.push=function(ag,af,ah){Z(ad,ag,af,ah)};delete ad.unshift;return ad};K.cargo=function(aa,Z){return o(aa,1,Z)};function X(Z){return r(function(ab,aa){ab.apply(null,aa.concat([r(function(ad,ac){if(typeof console==="object"){if(ad){if(console.error){console.error(ad)}}else{if(console[Z]){T(ac,function(ae){console[Z](ae)})}}}})]))})}K.log=X("log");K.dir=X("dir");K.memoize=function(ae,ac){var aa={};var ad={};var ab=Object.prototype.hasOwnProperty;ac=ac||O;var Z=r(function Z(af){var ah=af.pop();var ag=ac.apply(null,af);if(ab.call(aa,ag)){K.setImmediate(function(){ah.apply(null,aa[ag])})}else{if(ab.call(ad,ag)){ad[ag].push(ah)}else{ad[ag]=[ah];ae.apply(null,af.concat([r(function(aj){aa[ag]=aj;var al=ad[ag];delete ad[ag];for(var ak=0,ai=al.length;ak<ai;ak++){al[ak].apply(null,aj)}})]))}}});Z.memo=aa;Z.unmemoized=ae;return Z};K.unmemoize=function(Z){return function(){return(Z.unmemoized||Z).apply(null,arguments)}};function F(Z){return function(ab,aa,ac){Z(q(ab),aa,ac)}}K.times=F(K.map);K.timesSeries=F(K.mapSeries);K.timesLimit=function(ab,Z,aa,ac){return K.mapLimit(q(ab),Z,aa,ac)};K.seq=function(){var Z=arguments;return r(function(aa){var ab=this;var ac=aa[aa.length-1];if(typeof ac=="function"){aa.pop()}else{ac=U}K.reduce(Z,aa,function(ae,af,ad){af.apply(ab,ae.concat([r(function(ah,ag){ad(ah,ag)})]))},function(ae,ad){ac.apply(ab,[ae].concat(ad))})})};K.compose=function(){return K.seq.apply(null,Array.prototype.reverse.call(arguments))};function v(Z){return r(function(ab,aa){var ac=r(function(ad){var ae=this;var af=ad.pop();return Z(ab,function(ai,ah,ag){ai.apply(ae,ad.concat([ag]))},af)});if(aa.length){return ac.apply(this,aa)}else{return ac}})}K.applyEach=v(K.eachOf);K.applyEachSeries=v(K.eachOfSeries);K.forever=function(ac,ad){var Z=k(ad||U);var aa=Y(ac);function ab(ae){if(ae){return Z(ae)}aa(ab)}ab()};function Y(Z){return r(function(aa){var ac=aa.pop();aa.push(function(){var ad=arguments;if(ab){K.setImmediate(function(){ac.apply(null,ad)})}else{ac.apply(null,ad)}});var ab=true;Z.apply(this,aa);ab=false})}K.ensureAsync=Y;K.constant=r(function(Z){var aa=[null].concat(Z);return function(ab){return ab.apply(this,aa)}});K.wrapSync=K.asyncify=function l(Z){return r(function(ab){var ad=ab.pop();var aa;try{aa=Z.apply(this,ab)}catch(ac){return ad(ac)}if(p(aa)&&typeof aa.then==="function"){aa.then(function(ae){ad(null,ae)})["catch"](function(ae){ad(ae.message?ae:new Error(ae))})}else{ad(null,aa)}})};if(typeof g==="object"&&g.exports){g.exports=K}else{if(typeof d==="function"&&d.amd){d([],function(){return K})}else{y.async=K}}}())}).call(this,f("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:4}],2:[function(g,h,f){"use restrict";var j=32;f.INT_BITS=j;f.INT_MAX=2147483647;f.INT_MIN=-1<<(j-1);f.sign=function(k){return(k>0)-(k<0)};f.abs=function(l){var k=l>>(j-1);return(l^k)-k};f.min=function(k,l){return l^((k^l)&-(k<l))};f.max=function(k,l){return k^((k^l)&-(k<l))};f.isPow2=function(k){return !(k&(k-1))&&(!!k)};f.log2=function(l){var m,k;m=(l>65535)<<4;l>>>=m;k=(l>255)<<3;l>>>=k;m|=k;k=(l>15)<<2;l>>>=k;m|=k;k=(l>3)<<1;l>>>=k;m|=k;return m|(l>>1)};f.log10=function(k){return(k>=1000000000)?9:(k>=100000000)?8:(k>=10000000)?7:(k>=1000000)?6:(k>=100000)?5:(k>=10000)?4:(k>=1000)?3:(k>=100)?2:(k>=10)?1:0};f.popCount=function(k){k=k-((k>>>1)&1431655765);k=(k&858993459)+((k>>>2)&858993459);return((k+(k>>>4)&252645135)*16843009)>>>24};function e(k){var l=32;k&=-k;if(k){l--}if(k&65535){l-=16}if(k&16711935){l-=8}if(k&252645135){l-=4}if(k&858993459){l-=2}if(k&1431655765){l-=1}return l}f.countTrailingZeros=e;f.nextPow2=function(k){k+=k===0;--k;k|=k>>>1;k|=k>>>2;k|=k>>>4;k|=k>>>8;k|=k>>>16;return k+1};f.prevPow2=function(k){k|=k>>>1;k|=k>>>2;k|=k>>>4;k|=k>>>8;k|=k>>>16;return k-(k>>>1)};f.parity=function(k){k^=k>>>16;k^=k>>>8;k^=k>>>4;k&=15;return(27030>>>k)&1};var i=new Array(256);(function(n){for(var l=0;l<256;++l){var k=l,o=l,m=7;for(k>>>=1;k;k>>>=1){o<<=1;o|=k&1;--m}n[l]=(o<<m)&255}})(i);f.reverse=function(k){return(i[k&255]<<24)|(i[(k>>>8)&255]<<16)|(i[(k>>>16)&255]<<8)|i[(k>>>24)&255]};f.interleave2=function(k,l){k&=65535;k=(k|(k<<8))&16711935;k=(k|(k<<4))&252645135;k=(k|(k<<2))&858993459;k=(k|(k<<1))&1431655765;l&=65535;l=(l|(l<<8))&16711935;l=(l|(l<<4))&252645135;l=(l|(l<<2))&858993459;l=(l|(l<<1))&1431655765;return k|(l<<1)};f.deinterleave2=function(k,l){k=(k>>>l)&1431655765;k=(k|(k>>>1))&858993459;k=(k|(k>>>2))&252645135;k=(k|(k>>>4))&16711935;k=(k|(k>>>16))&65535;return(k<<16)>>16};f.interleave3=function(k,m,l){k&=1023;k=(k|(k<<16))&4278190335;k=(k|(k<<8))&251719695;k=(k|(k<<4))&3272356035;k=(k|(k<<2))&1227133513;m&=1023;m=(m|(m<<16))&4278190335;m=(m|(m<<8))&251719695;m=(m|(m<<4))&3272356035;m=(m|(m<<2))&1227133513;k|=(m<<1);l&=1023;l=(l|(l<<16))&4278190335;l=(l|(l<<8))&251719695;l=(l|(l<<4))&3272356035;l=(l|(l<<2))&1227133513;return k|(l<<2)};f.deinterleave3=function(k,l){k=(k>>>l)&1227133513;k=(k|(k>>>2))&3272356035;k=(k|(k>>>4))&251719695;k=(k|(k>>>8))&4278190335;k=(k|(k>>>16))&1023;return(k<<22)>>22};f.nextCombination=function(k){var l=k|(k-1);return(l+1)|(((~l&-~l)-1)>>>(e(k)+1))}},{}],3:[function(f,g,e){(function(m){function k(r,o){var n=0;for(var p=r.length-1;p>=0;p--){var q=r[p];if(q==="."){r.splice(p,1)}else{if(q===".."){r.splice(p,1);n++}else{if(n){r.splice(p,1);n--}}}}if(o){for(;n--;n){r.unshift("..")}}return r}var j=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var h=function(n){return j.exec(n).slice(1)};e.resolve=function(){var p="",n=false;for(var o=arguments.length-1;o>=-1&&!n;o--){var q=(o>=0)?arguments[o]:m.cwd();if(typeof q!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else{if(!q){continue}}p=q+"/"+p;n=q.charAt(0)==="/"}p=k(i(p.split("/"),function(r){return !!r}),!n).join("/");return((n?"/":"")+p)||"."};e.normalize=function(p){var o=e.isAbsolute(p),n=l(p,-1)==="/";p=k(i(p.split("/"),function(q){return !!q}),!o).join("/");if(!p&&!o){p="."}if(p&&n){p+="/"}return(o?"/":"")+p};e.isAbsolute=function(n){return n.charAt(0)==="/"};e.join=function(){var n=Array.prototype.slice.call(arguments,0);return e.normalize(i(n,function(q,o){if(typeof q!=="string"){throw new TypeError("Arguments to path.join must be strings")}return q}).join("/"))};e.relative=function(t,u){t=e.resolve(t).substr(1);u=e.resolve(u).substr(1);function p(w){var y=0;for(;y<w.length;y++){if(w[y]!==""){break}}var x=w.length-1;for(;x>=0;x--){if(w[x]!==""){break}}if(y>x){return[]}return w.slice(y,x-y+1)}var s=p(t.split("/"));var o=p(u.split("/"));var n=Math.min(s.length,o.length);var v=n;for(var r=0;r<n;r++){if(s[r]!==o[r]){v=r;break}}var q=[];for(var r=v;r<s.length;r++){q.push("..")}q=q.concat(o.slice(v));return q.join("/")};e.sep="/";e.delimiter=":";e.dirname=function(q){var n=h(q),o=n[0],p=n[1];if(!o&&!p){return"."}if(p){p=p.substr(0,p.length-1)}return o+p};e.basename=function(p,n){var o=h(p)[2];if(n&&o.substr(-1*n.length)===n){o=o.substr(0,o.length-n.length)}return o};e.extname=function(n){return h(n)[3]};function i(n,q){if(n.filter){return n.filter(q)}var p=[];for(var o=0;o<n.length;o++){if(q(n[o],o,n)){p.push(n[o])}}return p}var l="ab".substr(-1)==="b"?function(o,p,n){return o.substr(p,n)}:function(o,p,n){if(p<0){p=o.length+p}return o.substr(p,n)}}).call(this,f("_process"))},{_process:4}],4:[function(g,f,i){var e=f.exports={};var j=[];var n=false;var k;var l=-1;function m(){n=false;if(k.length){j=k.concat(j)}else{l=-1}if(j.length){p()}}function p(){if(n){return}var r=setTimeout(m);n=true;var q=j.length;while(q){k=j;j=[];while(++l<q){if(k){k[l].run()}}l=-1;q=j.length}k=null;n=false;clearTimeout(r)}e.nextTick=function(q){var r=new Array(arguments.length-1);if(arguments.length>1){for(var s=1;s<arguments.length;s++){r[s-1]=arguments[s]}}j.push(new h(q,r));if(j.length===1&&!n){setTimeout(p,0)}};function h(q,r){this.fun=q;this.array=r}h.prototype.run=function(){this.fun.apply(null,this.array)};e.title="browser";e.browser=true;e.env={};e.argv=[];e.version="";e.versions={};function o(){}e.on=o;e.addListener=o;e.once=o;e.off=o;e.removeListener=o;e.removeAllListeners=o;e.emit=o;e.binding=function(q){throw new Error("process.binding is not supported")};e.cwd=function(){return"/"};e.chdir=function(q){throw new Error("process.chdir is not supported")};e.umask=function(){return 0}},{}],5:[function(f,g,e){(function(h){
/*! https://mths.be/punycode v1.4.0 by @mathias */
(function(H){var x=typeof e=="object"&&e&&!e.nodeType&&e;var P=typeof g=="object"&&g&&!g.nodeType&&g;var G=typeof h=="object"&&h;if(G.global===G||G.window===G||G.self===G){H=G}var m,A=2147483647,t=36,v=1,y=26,q=38,u=700,w=72,p=128,N="-",D=/^xn--/,l=/[^\x20-\x7E]/,i=/[\x2E\u3002\uFF0E\uFF61]/g,z={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},o=t-v,J=Math.floor,F=String.fromCharCode,O;function I(Q){throw new RangeError(z[Q])}function L(T,R){var S=T.length;var Q=[];while(S--){Q[S]=R(T[S])}return Q}function k(R,S){var U=R.split("@");var Q="";if(U.length>1){Q=U[0]+"@";R=U[1]}R=R.replace(i,"\x2E");var V=R.split(".");var T=L(V,S).join(".");return Q+T}function s(T){var S=[],R=0,U=T.length,V,Q;while(R<U){V=T.charCodeAt(R++);if(V>=55296&&V<=56319&&R<U){Q=T.charCodeAt(R++);if((Q&64512)==56320){S.push(((V&1023)<<10)+(Q&1023)+65536)}else{S.push(V);R--}}else{S.push(V)}}return S}function K(Q){return L(Q,function(S){var R="";if(S>65535){S-=65536;R+=F(S>>>10&1023|55296);S=56320|S&1023}R+=F(S);return R}).join("")}function n(Q){if(Q-48<10){return Q-22}if(Q-65<26){return Q-65}if(Q-97<26){return Q-97}return t}function E(R,Q){return R+22+75*(R<26)-((Q!=0)<<5)}function j(T,R,S){var Q=0;T=S?J(T/u):T>>1;T+=J(T/R);for(;T>o*y>>1;Q+=t){T=J(T/o)}return J(Q+(o+1)*T/(T+q))}function C(ac){var S=[],V=ac.length,X,Y=0,R=p,Z=w,U,W,aa,Q,ad,T,ab,af,ae;U=ac.lastIndexOf(N);if(U<0){U=0}for(W=0;W<U;++W){if(ac.charCodeAt(W)>=128){I("not-basic")}S.push(ac.charCodeAt(W))}for(aa=U>0?U+1:0;aa<V;){for(Q=Y,ad=1,T=t;;T+=t){if(aa>=V){I("invalid-input")}ab=n(ac.charCodeAt(aa++));if(ab>=t||ab>J((A-Y)/ad)){I("overflow")}Y+=ab*ad;af=T<=Z?v:(T>=Z+y?y:T-Z);if(ab<af){break}ae=t-af;if(ad>J(A/ae)){I("overflow")}ad*=ae}X=S.length+1;Z=j(Y-Q,X,Q==0);if(J(Y/X)>A-R){I("overflow")}R+=J(Y/X);Y%=X;S.splice(Y++,0,R)}return K(S)}function r(ac){var T,ae,Z,R,aa,Y,U,Q,X,ag,ad,S=[],W,V,af,ab;ac=s(ac);W=ac.length;T=p;ae=0;aa=w;for(Y=0;Y<W;++Y){ad=ac[Y];if(ad<128){S.push(F(ad))}}Z=R=S.length;if(R){S.push(N)}while(Z<W){for(U=A,Y=0;Y<W;++Y){ad=ac[Y];if(ad>=T&&ad<U){U=ad}}V=Z+1;if(U-T>J((A-ae)/V)){I("overflow")}ae+=(U-T)*V;T=U;for(Y=0;Y<W;++Y){ad=ac[Y];if(ad<T&&++ae>A){I("overflow")}if(ad==T){for(Q=ae,X=t;;X+=t){ag=X<=aa?v:(X>=aa+y?y:X-aa);if(Q<ag){break}ab=Q-ag;af=t-ag;S.push(F(E(ag+ab%af,0)));Q=J(ab/af)}S.push(F(E(Q,0)));aa=j(ae,V,Z==R);ae=0;++Z}}++ae;++T}return S.join("")}function B(Q){return k(Q,function(R){return D.test(R)?C(R.slice(4).toLowerCase()):R})}function M(Q){return k(Q,function(R){return l.test(R)?"xn--"+r(R):R})}m={version:"1.3.2",ucs2:{decode:s,encode:K},decode:C,encode:r,toASCII:M,toUnicode:B};if(typeof d=="function"&&typeof d.amd=="object"&&d.amd){d("punycode",function(){return m})}else{if(x&&P){if(g.exports==x){P.exports=m}else{for(O in m){m.hasOwnProperty(O)&&(x[O]=m[O])}}}else{H.punycode=m}}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],6:[function(g,h,f){function i(j,k){return Object.prototype.hasOwnProperty.call(j,k)}h.exports=function(p,z,y,A){z=z||"&";y=y||"=";var m={};if(typeof p!=="string"||p.length===0){return m}var o=/\+/g;p=p.split(z);var s=1000;if(A&&typeof A.maxKeys==="number"){s=A.maxKeys}var n=p.length;if(s>0&&n>s){n=s}for(var l=0;l<n;++l){var r=p[l].replace(o,"%20"),t=r.indexOf(y),q,w,j,u;if(t>=0){q=r.substr(0,t);w=r.substr(t+1)}else{q=r;w=""}j=decodeURIComponent(q);u=decodeURIComponent(w);if(!i(m,j)){m[j]=u}else{if(e(m[j])){m[j].push(u)}else{m[j]=[m[j],u]}}}return m};var e=Array.isArray||function(j){return Object.prototype.toString.call(j)==="[object Array]"}},{}],7:[function(h,i,g){var k=function(l){switch(typeof l){case"string":return l;case"boolean":return l?"true":"false";case"number":return isFinite(l)?l:"";default:return""}};i.exports=function(o,n,l,m){n=n||"&";l=l||"=";if(o===null){o=undefined}if(typeof o==="object"){return j(f(o),function(p){var q=encodeURIComponent(k(p))+l;if(e(o[p])){return j(o[p],function(r){return q+encodeURIComponent(k(r))}).join(n)}else{return q+encodeURIComponent(k(o[p]))}}).join(n)}if(!m){return""}return encodeURIComponent(k(m))+l+encodeURIComponent(k(o))};var e=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function j(l,o){if(l.map){return l.map(o)}var n=[];for(var m=0;m<l.length;m++){n.push(o(l[m],m))}return n}var f=Object.keys||function(n){var m=[];for(var l in n){if(Object.prototype.hasOwnProperty.call(n,l)){m.push(l)}}return m}},{}],8:[function(f,g,e){e.decode=e.parse=f("./decode");e.encode=e.stringify=f("./encode")},{"./decode":6,"./encode":7}],9:[function(p,h,D){var g=p("punycode");D.parse=A;D.resolve=r;D.resolveObject=m;D.format=t;D.Url=w;function w(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var k=/^([a-z0-9.+-]+:)/i,e=/:[0-9]*$/,n=["<",">",'"',"`"," ","\r","\n","\t"],f=["{","}","|","\\","^","`"].concat(n),B=["'"].concat(f),C=["%","/","?",";","#"].concat(B),y=["/","?","#"],E=255,o=/^[a-z0-9A-Z_-]{0,63}$/,j=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:true,"javascript:":true},v={javascript:true,"javascript:":true},l={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},i=p("querystring");function A(G,I,H){if(G&&s(G)&&G instanceof w){return G}var F=new w;F.parse(G,I,H);return F}w.prototype.parse=function(K,ab,ag){if(!u(K)){throw new TypeError("Parameter 'url' must be a string, not "+typeof K)}var Q=K;Q=Q.trim();var V=k.exec(Q);if(V){V=V[0];var ah=V.toLowerCase();this.protocol=ah;Q=Q.substr(V.length)}if(ag||V||Q.match(/^\/\/[^@\/]+@[^@\/]+/)){var I=Q.substr(0,2)==="//";if(I&&!(V&&v[V])){Q=Q.substr(2);this.slashes=true}}if(!v[V]&&(I||(V&&!l[V]))){var G=-1;for(var ac=0;ac<y.length;ac++){var af=Q.indexOf(y[ac]);if(af!==-1&&(G===-1||af<G)){G=af}}var O,S;if(G===-1){S=Q.lastIndexOf("@")}else{S=Q.lastIndexOf("@",G)}if(S!==-1){O=Q.slice(0,S);Q=Q.slice(S+1);this.auth=decodeURIComponent(O)}G=-1;for(var ac=0;ac<C.length;ac++){var af=Q.indexOf(C[ac]);if(af!==-1&&(G===-1||af<G)){G=af}}if(G===-1){G=Q.length}this.host=Q.slice(0,G);Q=Q.slice(G);this.parseHost();this.hostname=this.hostname||"";var J=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!J){var N=this.hostname.split(/\./);for(var ac=0,X=N.length;ac<X;ac++){var W=N[ac];if(!W){continue}if(!W.match(o)){var aj="";for(var aa=0,Y=W.length;aa<Y;aa++){if(W.charCodeAt(aa)>127){aj+="x"}else{aj+=W[aa]}}if(!aj.match(o)){var Z=N.slice(0,ac);var M=N.slice(ac+1);var P=W.match(j);if(P){Z.push(P[1]);M.unshift(P[2])}if(M.length){Q="/"+M.join(".")+Q}this.hostname=Z.join(".");break}}}}if(this.hostname.length>E){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!J){var L=this.hostname.split(".");var T=[];for(var ac=0;ac<L.length;++ac){var R=L[ac];T.push(R.match(/[^A-Za-z0-9_-]/)?"xn--"+g.encode(R):R)}this.hostname=T.join(".")}var U=this.port?":"+this.port:"";var ad=this.hostname||"";this.host=ad+U;this.href+=this.host;if(J){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(Q[0]!=="/"){Q="/"+Q}}}if(!x[ah]){for(var ac=0,X=B.length;ac<X;ac++){var ai=B[ac];var ak=encodeURIComponent(ai);if(ak===ai){ak=escape(ai)}Q=Q.split(ai).join(ak)}}var F=Q.indexOf("#");if(F!==-1){this.hash=Q.substr(F);Q=Q.slice(0,F)}var H=Q.indexOf("?");if(H!==-1){this.search=Q.substr(H);this.query=Q.substr(H+1);if(ab){this.query=i.parse(this.query)}Q=Q.slice(0,H)}else{if(ab){this.search="";this.query={}}}if(Q){this.pathname=Q}if(l[ah]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var U=this.pathname||"";var R=this.search||"";this.path=U+R}this.href=this.format();return this};function t(F){if(u(F)){F=A(F)}if(!(F instanceof w)){return w.prototype.format.call(F)}return F.format()}w.prototype.format=function(){var H=this.auth||"";if(H){H=encodeURIComponent(H);H=H.replace(/%3A/i,":");H+="@"}var L=this.protocol||"",K=this.pathname||"",J=this.hash||"",G=false,I="";if(this.host){G=H+this.host}else{if(this.hostname){G=H+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){G+=":"+this.port}}}if(this.query&&s(this.query)&&Object.keys(this.query).length){I=i.stringify(this.query)}var F=this.search||(I&&("?"+I))||"";if(L&&L.substr(-1)!==":"){L+=":"}if(this.slashes||(!L||l[L])&&G!==false){G="//"+(G||"");if(K&&K.charAt(0)!=="/"){K="/"+K}}else{if(!G){G=""}}if(J&&J.charAt(0)!=="#"){J="#"+J}if(F&&F.charAt(0)!=="?"){F="?"+F}K=K.replace(/[?#]/g,function(M){return encodeURIComponent(M)});F=F.replace("#","%23");return L+G+K+F+J};function r(G,F){return A(G,false,true).resolve(F)}w.prototype.resolve=function(F){return this.resolveObject(A(F,false,true)).format()};function m(G,F){if(!G){return F}return A(G,false,true).resolveObject(F)}w.prototype.resolveObject=function(V){if(u(V)){var H=new w();H.parse(V,false,true);V=H}var L=new w();Object.keys(this).forEach(function(X){L[X]=this[X]},this);L.hash=V.hash;if(V.href===""){L.href=L.format();return L}if(V.slashes&&!V.protocol){Object.keys(V).forEach(function(X){if(X!=="protocol"){L[X]=V[X]}});if(l[L.protocol]&&L.hostname&&!L.pathname){L.path=L.pathname="/"}L.href=L.format();return L}if(V.protocol&&V.protocol!==L.protocol){if(!l[V.protocol]){Object.keys(V).forEach(function(X){L[X]=V[X]});L.href=L.format();return L}L.protocol=V.protocol;if(!V.host&&!v[V.protocol]){var W=(V.pathname||"").split("/");while(W.length&&!(V.host=W.shift())){}if(!V.host){V.host=""}if(!V.hostname){V.hostname=""}if(W[0]!==""){W.unshift("")}if(W.length<2){W.unshift("")}L.pathname=W.join("/")}else{L.pathname=V.pathname}L.search=V.search;L.query=V.query;L.host=V.host||"";L.auth=V.auth;L.hostname=V.hostname||V.host;L.port=V.port;if(L.pathname||L.search){var P=L.pathname||"";var N=L.search||"";L.path=P+N}L.slashes=L.slashes||V.slashes;L.href=L.format();return L}var O=(L.pathname&&L.pathname.charAt(0)==="/"),S=(V.host||V.pathname&&V.pathname.charAt(0)==="/"),T=(S||O||(L.host&&V.pathname)),I=T,M=L.pathname&&L.pathname.split("/")||[],W=V.pathname&&V.pathname.split("/")||[],G=L.protocol&&!l[L.protocol];if(G){L.hostname="";L.port=null;if(L.host){if(M[0]===""){M[0]=L.host}else{M.unshift(L.host)}}L.host="";if(V.protocol){V.hostname=null;V.port=null;if(V.host){if(W[0]===""){W[0]=V.host}else{W.unshift(V.host)}}V.host=null}T=T&&(W[0]===""||M[0]==="")}if(S){L.host=(V.host||V.host==="")?V.host:L.host;L.hostname=(V.hostname||V.hostname==="")?V.hostname:L.hostname;L.search=V.search;L.query=V.query;M=W}else{if(W.length){if(!M){M=[]}M.pop();M=M.concat(W);L.search=V.search;L.query=V.query}else{if(!q(V.search)){if(G){L.hostname=L.host=M.shift();var R=L.host&&L.host.indexOf("@")>0?L.host.split("@"):false;if(R){L.auth=R.shift();L.host=L.hostname=R.shift()}}L.search=V.search;L.query=V.query;if(!z(L.pathname)||!z(L.search)){L.path=(L.pathname?L.pathname:"")+(L.search?L.search:"")}L.href=L.format();return L}}}if(!M.length){L.pathname=null;if(L.search){L.path="/"+L.search}else{L.path=null}L.href=L.format();return L}var J=M.slice(-1)[0];var F=((L.host||V.host)&&(J==="."||J==="..")||J==="");var K=0;for(var U=M.length;U>=0;U--){J=M[U];if(J=="."){M.splice(U,1)}else{if(J===".."){M.splice(U,1);K++}else{if(K){M.splice(U,1);K--}}}}if(!T&&!I){for(;K--;K){M.unshift("..")}}if(T&&M[0]!==""&&(!M[0]||M[0].charAt(0)!=="/")){M.unshift("")}if(F&&(M.join("/").substr(-1)!=="/")){M.push("")}var Q=M[0]===""||(M[0]&&M[0].charAt(0)==="/");if(G){L.hostname=L.host=Q?"":M.length?M.shift():"";var R=L.host&&L.host.indexOf("@")>0?L.host.split("@"):false;if(R){L.auth=R.shift();L.host=L.hostname=R.shift()}}T=T||(L.host&&M.length);if(T&&!Q){M.unshift("")}if(!M.length){L.pathname=null;L.path=null}else{L.pathname=M.join("/")}if(!z(L.pathname)||!z(L.search)){L.path=(L.pathname?L.pathname:"")+(L.search?L.search:"")}L.auth=V.auth||L.auth;L.slashes=L.slashes||V.slashes;L.href=L.format();return L};w.prototype.parseHost=function(){var G=this.host;var F=e.exec(G);if(F){F=F[0];if(F!==":"){this.port=F.substr(1)}G=G.substr(0,G.length-F.length)}if(G){this.hostname=G}};function u(F){return typeof F==="string"}function s(F){return typeof F==="object"&&F!==null}function z(F){return F===null}function q(F){return F==null}},{punycode:5,querystring:8}],10:[function(r,h,I){h.exports=o;function o(R,V,S){S=S||2;var T=V&&V.length,P=T?V[0]*S:R.length,U=E(R,0,P,S,true),N=[];if(!U){return N}var O,M,L,K,X,W,Y;if(T){U=y(R,V,U,S)}if(R.length>80*S){O=L=R[0];M=K=R[1];for(var Q=S;Q<P;Q+=S){X=R[Q];W=R[Q+1];if(X<O){O=X}if(W<M){M=W}if(X>L){L=X}if(W>K){K=W}}Y=Math.max(L-O,K-M)}g(U,N,S,O,M,Y);return N}function E(O,Q,K,P,L){var M,N;if(L===(J(O,Q,K,P)>0)){for(M=Q;M<K;M+=P){N=l(M,O[M],O[M+1],N)}}else{for(M=K-P;M>=Q;M-=P){N=l(M,O[M],O[M+1],N)}}if(N&&s(N,N.next)){A(N);N=N.next}return N}function w(N,K){if(!N){return N}if(!K){K=N}var M=N,L;do{L=false;if(!M.steiner&&(s(M,M.next)||C(M.prev,M,M.next)===0)){A(M);M=K=M.prev;if(M===M.next){return null}L=true}else{M=M.next}}while(L||M!==K);return K}function g(L,N,Q,O,K,T,S){if(!L){return}if(!S&&T){q(L,O,K,T)}var R=L,M,P;while(L.prev!==L.next){M=L.prev;P=L.next;if(T?H(L,O,K,T):z(L)){N.push(M.i/Q);N.push(L.i/Q);N.push(P.i/Q);A(L);L=P.next;R=P.next;continue}L=P;if(L===R){if(!S){g(w(L),N,Q,O,K,T,1)}else{if(S===1){L=v(L,N,Q);g(L,N,Q,O,K,T,2)}else{if(S===2){u(L,N,Q,O,K,T)}}}break}}}function z(M){var L=M.prev,K=M,O=M.next;if(C(L,K,O)>=0){return false}var N=M.next.next;while(N!==M.prev){if(t(L.x,L.y,K.x,K.y,O.x,O.y,N.x,N.y)&&C(N.prev,N,N.next)>=0){return false}N=N.next}return true}function H(P,Q,O,W){var T=P.prev,S=P,R=P.next;if(C(T,S,R)>=0){return false}var X=T.x<S.x?(T.x<R.x?T.x:R.x):(S.x<R.x?S.x:R.x),U=T.y<S.y?(T.y<R.y?T.y:R.y):(S.y<R.y?S.y:R.y),N=T.x>S.x?(T.x>R.x?T.x:R.x):(S.x>R.x?S.x:R.x),M=T.y>S.y?(T.y>R.y?T.y:R.y):(S.y>R.y?S.y:R.y);var L=e(X,U,Q,O,W),V=e(N,M,Q,O,W);var K=P.nextZ;while(K&&K.z<=V){if(K!==P.prev&&K!==P.next&&t(T.x,T.y,S.x,S.y,R.x,R.y,K.x,K.y)&&C(K.prev,K,K.next)>=0){return false}K=K.nextZ}K=P.prevZ;while(K&&K.z>=L){if(K!==P.prev&&K!==P.next&&t(T.x,T.y,S.x,S.y,R.x,R.y,K.x,K.y)&&C(K.prev,K,K.next)>=0){return false}K=K.prevZ}return true}function v(P,M,O){var N=P;do{var L=N.prev,K=N.next.next;if(!s(L,K)&&f(L,N,N.next,K)&&D(L,K)&&D(K,L)){M.push(L.i/O);M.push(N.i/O);M.push(K.i/O);A(N);A(N.next);N=P=K}N=N.next}while(N!==P);return N}function u(K,M,O,N,L,S){var R=K;do{var Q=R.next.next;while(Q!==R.prev){if(R.i!==Q.i&&B(R,Q)){var P=p(R,Q);R=w(R,R.next);P=w(P,P.next);g(R,M,O,N,L,S);g(P,M,O,N,L,S);return}Q=Q.next}R=R.next}while(R!==K)}function y(M,T,P,O){var Q=[],N,R,K,L,S;for(N=0,R=T.length;N<R;N++){K=T[N]*O;L=N<R-1?T[N+1]*O:M.length;S=E(M,K,L,O,false);if(S===S.next){S.steiner=true}Q.push(m(S))}Q.sort(n);for(N=0;N<Q.length;N++){k(Q[N],P);P=w(P,P.next)}return P}function n(L,K){return L.x-K.x}function k(M,L){L=F(M,L);if(L){var K=p(L,M);w(K,K.next)}}function F(K,O){var L=O,Q=K.x,P=K.y,N=-Infinity,M;do{if(P<=L.y&&P>=L.next.y){var T=L.x+(P-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(T<=Q&&T>N){N=T;if(T===Q){if(P===L.y){return L}if(P===L.next.y){return L.next}}M=L.x<L.next.x?L:L.next}}L=L.next}while(L!==O);if(!M){return null}if(Q===N){return M.prev}var S=M,W=M.x,U=M.y,V=Infinity,R;L=M.next;while(L!==S){if(Q>=L.x&&L.x>=W&&t(P<U?Q:N,P,W,U,P<U?N:Q,P,L.x,L.y)){R=Math.abs(P-L.y)/(Q-L.x);if((R<V||(R===V&&L.x>M.x))&&D(L,K)){M=L;V=R}}L=L.next}return M}function q(O,K,N,L){var M=O;do{if(M.z===null){M.z=e(M.x,M.y,K,N,L)}M.prevZ=M.prev;M.nextZ=M.next;M=M.next}while(M!==O);M.prevZ.nextZ=null;M.prevZ=null;j(M)}function j(Q){var N,M,L,P,R,K,S,O,T=1;do{M=Q;Q=null;R=null;K=0;while(M){K++;L=M;S=0;for(N=0;N<T;N++){S++;L=L.nextZ;if(!L){break}}O=T;while(S>0||(O>0&&L)){if(S===0){P=L;L=L.nextZ;O--}else{if(O===0||!L){P=M;M=M.nextZ;S--}else{if(M.z<=L.z){P=M;M=M.nextZ;S--}else{P=L;L=L.nextZ;O--}}}if(R){R.nextZ=P}else{Q=P}P.prevZ=R;R=P}M=L}R.nextZ=null;T*=2}while(K>1);return Q}function e(L,O,K,N,M){L=32767*(L-K)/M;O=32767*(O-N)/M;L=(L|(L<<8))&16711935;L=(L|(L<<4))&252645135;L=(L|(L<<2))&858993459;L=(L|(L<<1))&1431655765;O=(O|(O<<8))&16711935;O=(O|(O<<4))&252645135;O=(O|(O<<2))&858993459;O=(O|(O<<1))&1431655765;return L|(O<<1)}function m(M){var L=M,K=M;do{if(L.x<K.x){K=L}L=L.next}while(L!==M);return K}function t(O,N,Q,P,K,R,M,L){return(K-M)*(N-L)-(O-M)*(R-L)>=0&&(O-M)*(P-L)-(Q-M)*(N-L)>=0&&(Q-M)*(R-L)-(K-M)*(P-L)>=0}function B(L,K){return L.next.i!==K.i&&L.prev.i!==K.i&&!x(L,K)&&D(L,K)&&D(K,L)&&i(L,K)}function C(M,L,K){return(L.y-M.y)*(K.x-L.x)-(L.x-M.x)*(K.y-L.y)}function s(L,K){return L.x===K.x&&L.y===K.y}function f(M,K,L,N){if((s(M,K)&&s(L,N))||(s(M,N)&&s(L,K))){return true}return C(M,K,L)>0!==C(M,K,N)>0&&C(L,N,M)>0!==C(L,N,K)>0}function x(L,K){var M=L;do{if(M.i!==L.i&&M.next.i!==L.i&&M.i!==K.i&&M.next.i!==K.i&&f(M,M.next,L,K)){return true}M=M.next}while(M!==L);return false}function D(L,K){return C(L.prev,L,L.next)<0?C(L,K,L.next)>=0&&C(L,L.prev,K)>=0:C(L,K,L.prev)<0||C(L,L.next,K)<0}function i(M,L){var P=M,K=false,O=(M.x+L.x)/2,N=(M.y+L.y)/2;do{if(((P.y>N)!==(P.next.y>N))&&(O<(P.next.x-P.x)*(N-P.y)/(P.next.y-P.y)+P.x)){K=!K}P=P.next}while(P!==M);return K}function p(M,L){var K=new G(M.i,M.x,M.y),N=new G(L.i,L.x,L.y),P=M.next,O=L.prev;M.next=L;L.prev=M;K.next=P;P.prev=K;N.next=K;K.prev=N;O.next=N;N.prev=O;return N}function l(L,K,O,M){var N=new G(L,K,O);if(!M){N.prev=N;N.next=N}else{N.next=M.next;N.prev=M;M.next.prev=N;M.next=N}return N}function A(K){K.next.prev=K.prev;K.prev.next=K.next;if(K.prevZ){K.prevZ.nextZ=K.nextZ}if(K.nextZ){K.nextZ.prevZ=K.prevZ}}function G(L,K,M){this.i=L;this.x=K;this.y=M;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}o.deviation=function(P,U,R,M){var S=U&&U.length;var O=S?U[0]*R:P.length;var L=Math.abs(J(P,0,O,R));if(S){for(var Q=0,T=U.length;Q<T;Q++){var K=U[Q]*R;var N=Q<T-1?U[Q+1]*R:P.length;L-=Math.abs(J(P,K,N,R))}}var Y=0;for(Q=0;Q<M.length;Q+=3){var X=M[Q]*R;var W=M[Q+1]*R;var V=M[Q+2]*R;Y+=Math.abs((P[X]-P[V])*(P[W+1]-P[X+1])-(P[X]-P[W])*(P[V+1]-P[X+1]))}return L===0&&Y===0?0:Math.abs((Y-L)/L)};function J(O,Q,K,P){var N=0;for(var M=Q,L=K-P;M<K;M+=P){N+=(O[L]-O[M])*(O[M+1]+O[L+1]);L=M}return N}o.flatten=function(O){var P=O[0][0].length,K={vertices:[],holes:[],dimensions:P},M=0;for(var N=0;N<O.length;N++){for(var L=0;L<O[N].length;L++){for(var Q=0;Q<P;Q++){K.vertices.push(O[N][L][Q])}}if(N>0){M+=O[N-1].length;K.holes.push(M)}}return K}},{}],11:[function(i,h,j){var p=Object.prototype.hasOwnProperty;var l=typeof Object.create!=="function"?"~":false;function s(v,t,u){this.fn=v;this.context=t;this.once=u||false}function r(){}r.prototype._events=undefined;r.prototype.eventNames=function g(){var u=this._events,v=[],t;if(!u){return v}for(t in u){if(p.call(u,t)){v.push(l?t.slice(1):t)}}if(Object.getOwnPropertySymbols){return v.concat(Object.getOwnPropertySymbols(u))}return v};r.prototype.listeners=function n(y,x){var v=l?l+y:y,z=this._events&&this._events[v];if(x){return !!z}if(!z){return[]}if(z.fn){return[z.fn]}for(var w=0,u=z.length,t=new Array(u);w<u;w++){t[w]=z[w].fn}return t};r.prototype.emit=function o(u,w,v,t,F,E){var D=l?l+u:u;if(!this._events||!this._events[D]){return false}var C=this._events[D],A=arguments.length,B,z;if("function"===typeof C.fn){if(C.once){this.removeListener(u,C.fn,undefined,true)}switch(A){case 1:return C.fn.call(C.context),true;case 2:return C.fn.call(C.context,w),true;case 3:return C.fn.call(C.context,w,v),true;case 4:return C.fn.call(C.context,w,v,t),true;case 5:return C.fn.call(C.context,w,v,t,F),true;case 6:return C.fn.call(C.context,w,v,t,F,E),true}for(z=1,B=new Array(A-1);z<A;z++){B[z-1]=arguments[z]}C.fn.apply(C.context,B)}else{var x=C.length,y;for(z=0;z<x;z++){if(C[z].once){this.removeListener(u,C[z].fn,undefined,true)}switch(A){case 1:C[z].fn.call(C[z].context);break;case 2:C[z].fn.call(C[z].context,w);break;case 3:C[z].fn.call(C[z].context,w,v);break;default:if(!B){for(y=1,B=new Array(A-1);y<A;y++){B[y-1]=arguments[y]}}C[z].fn.apply(C[z].context,B)}}}return true};r.prototype.on=function m(w,v,u){var x=new s(v,u||this),t=l?l+w:w;if(!this._events){this._events=l?{}:Object.create(null)}if(!this._events[t]){this._events[t]=x}else{if(!this._events[t].fn){this._events[t].push(x)}else{this._events[t]=[this._events[t],x]}}return this};r.prototype.once=function f(w,v,u){var x=new s(v,u||this,true),t=l?l+w:w;if(!this._events){this._events=l?{}:Object.create(null)}if(!this._events[t]){this._events[t]=x}else{if(!this._events[t].fn){this._events[t].push(x)}else{this._events[t]=[this._events[t],x]}}return this};r.prototype.removeListener=function k(t,z,v,u){var A=l?l+t:t;if(!this._events||!this._events[A]){return this}var y=this._events[A],B=[];if(z){if(y.fn){if(y.fn!==z||(u&&!y.once)||(v&&y.context!==v)){B.push(y)}}else{for(var x=0,w=y.length;x<w;x++){if(y[x].fn!==z||(u&&!y[x].once)||(v&&y[x].context!==v)){B.push(y[x])}}}}if(B.length){this._events[A]=B.length===1?B[0]:B}else{delete this._events[A]}return this};r.prototype.removeAllListeners=function q(t){if(!this._events){return this}if(t){delete this._events[l?l+t:t]}else{this._events=l?{}:Object.create(null)}return this};r.prototype.off=r.prototype.removeListener;r.prototype.addListener=r.prototype.on;r.prototype.setMaxListeners=function e(){return this};r.prefixed=l;if("undefined"!==typeof h){h.exports=r}},{}],12:[function(f,g,e){(function(r){var i=/iPhone/i,t=/iPod/i,q=/iPad/i,v=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,w=/Android/i,s=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,o=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,n=/IEMobile/i,x=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,u=/BlackBerry/i,h=/BB10/i,j=/Opera Mini/i,k=/(CriOS|Chrome)(?=.*\bMobile\b)/i,z=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,p=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i");var m=function(A,B){return A.test(B)};var l=function(C){var B=C||navigator.userAgent;var A=B.split("[FBAN");if(typeof A[1]!=="undefined"){B=A[0]}A=B.split("Twitter");if(typeof A[1]!=="undefined"){B=A[0]}this.apple={phone:m(i,B),ipod:m(t,B),tablet:!m(i,B)&&m(q,B),device:m(i,B)||m(t,B)||m(q,B)};this.amazon={phone:m(s,B),tablet:!m(s,B)&&m(o,B),device:m(s,B)||m(o,B)};this.android={phone:m(s,B)||m(v,B),tablet:!m(s,B)&&!m(v,B)&&(m(o,B)||m(w,B)),device:m(s,B)||m(o,B)||m(v,B)||m(w,B)};this.windows={phone:m(n,B),tablet:m(x,B),device:m(n,B)||m(x,B)};this.other={blackberry:m(u,B),blackberry10:m(h,B),opera:m(j,B),firefox:m(z,B),chrome:m(k,B),device:m(u,B)||m(h,B)||m(j,B)||m(z,B)||m(k,B)};this.seven_inch=m(p,B);this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch;this.phone=this.apple.phone||this.android.phone||this.windows.phone;this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet;if(typeof window==="undefined"){return this}};var y=function(){var A=new l();A.Class=l;return A};if(typeof g!=="undefined"&&g.exports&&typeof window==="undefined"){g.exports=l}else{if(typeof g!=="undefined"&&g.exports&&typeof window!=="undefined"){g.exports=y()}else{if(typeof d==="function"&&d.amd){d("isMobile",[],r.isMobile=y())}else{r.isMobile=y()}}}})(this)},{}],13:[function(g,h,e){var i=Object.prototype.hasOwnProperty;var f=Object.prototype.propertyIsEnumerable;function j(l){if(l===null||l===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(l)}function k(){try{if(!Object.assign){return false}var p=new String("abc");p[5]="de";if(Object.getOwnPropertyNames(p)[0]==="5"){return false}var o={};for(var n=0;n<10;n++){o["_"+String.fromCharCode(n)]=n}var m=Object.getOwnPropertyNames(o).map(function(r){return o[r]});if(m.join("")!=="0123456789"){return false}var l={};"abcdefghijklmnopqrst".split("").forEach(function(r){l[r]=r});if(Object.keys(Object.assign({},l)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(q){return false}}h.exports=k()?Object.assign:function(q,p){var t;var r=j(q);var l;for(var o=1;o<arguments.length;o++){t=Object(arguments[o]);for(var n in t){if(i.call(t,n)){r[n]=t[n]}}if(Object.getOwnPropertySymbols){l=Object.getOwnPropertySymbols(t);for(var m=0;m<l.length;m++){if(f.call(t,l[m])){r[l[m]]=t[l[m]]}}}}return r}},{}],14:[function(g,h,f){var e=new ArrayBuffer(0);var i=function(m,k,l,j){this.gl=m;this.buffer=m.createBuffer();this.type=k||m.ARRAY_BUFFER;this.drawType=j||m.STATIC_DRAW;this.data=e;if(l){this.upload(l)}};i.prototype.upload=function(k,m,j){if(!j){this.bind()}var l=this.gl;k=k||this.data;m=m||0;if(this.data.byteLength>=k.byteLength){l.bufferSubData(this.type,m,k)}else{l.bufferData(this.type,k,this.drawType)}this.data=k};i.prototype.bind=function(){var j=this.gl;j.bindBuffer(this.type,this.buffer)};i.createVertexBuffer=function(l,k,j){return new i(l,l.ARRAY_BUFFER,k,j)};i.createIndexBuffer=function(l,k,j){return new i(l,l.ELEMENT_ARRAY_BUFFER,k,j)};i.create=function(m,k,l,j){return new i(m,k,j)};i.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)};h.exports=i},{}],15:[function(f,h,e){var g=f("./GLTexture");var i=function(l,k,j){this.gl=l;this.framebuffer=l.createFramebuffer();this.stencil=null;this.texture=null;this.width=k||100;this.height=j||100};i.prototype.enableTexture=function(j){var k=this.gl;this.texture=j||new g(k);this.texture.bind();this.bind();k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,this.texture.texture,0)};i.prototype.enableStencil=function(){if(this.stencil){return}var j=this.gl;this.stencil=j.createRenderbuffer();j.bindRenderbuffer(j.RENDERBUFFER,this.stencil);j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_STENCIL_ATTACHMENT,j.RENDERBUFFER,this.stencil);j.renderbufferStorage(j.RENDERBUFFER,j.DEPTH_STENCIL,this.width,this.height)};i.prototype.clear=function(m,l,j,k){this.bind();var n=this.gl;n.clearColor(m,l,j,k);n.clear(n.COLOR_BUFFER_BIT)};i.prototype.bind=function(){var j=this.gl;if(this.texture){this.texture.unbind()}j.bindFramebuffer(j.FRAMEBUFFER,this.framebuffer)};i.prototype.unbind=function(){var j=this.gl;j.bindFramebuffer(j.FRAMEBUFFER,null)};i.prototype.resize=function(k,j){var l=this.gl;this.width=k;this.height=j;if(this.texture){this.texture.uploadData(null,k,j)}if(this.stencil){l.bindRenderbuffer(l.RENDERBUFFER,this.stencil);l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_STENCIL,k,j)}};i.prototype.destroy=function(){var j=this.gl;if(this.texture){this.texture.destroy()}j.deleteFramebuffer(this.framebuffer);this.gl=null;this.stencil=null;this.texture=null};i.createRGBA=function(n,k,j){var m=g.fromData(n,null,k,j);m.enableNearestScaling();m.enableWrapClamp();var l=new i(n,k,j);l.enableTexture(m);l.unbind();return l};i.createFloat32=function(o,k,j,n){var m=new g.fromData(o,n,k,j);m.enableNearestScaling();m.enableWrapClamp();var l=new i(o,k,j);l.enableTexture(m);l.unbind();return l};h.exports=i},{"./GLTexture":17}],16:[function(h,j,g){var e=h("./shader/compileProgram"),i=h("./shader/extractAttributes"),f=h("./shader/extractUniforms"),l=h("./shader/generateUniformAccessObject");var k=function(p,m,n){this.gl=p;this.program=e(p,m,n);this.attributes=i(p,this.program);var o=f(p,this.program);this.uniforms=l(p,o)};k.prototype.bind=function(){this.gl.useProgram(this.program)};k.prototype.destroy=function(){};j.exports=k},{"./shader/compileProgram":22,"./shader/extractAttributes":24,"./shader/extractUniforms":25,"./shader/generateUniformAccessObject":26}],17:[function(f,h,e){var g=function(n,l,j,m,k){this.gl=n;this.texture=n.createTexture();this.mipmap=false;this.premultiplyAlpha=false;this.width=l||0;this.height=j||0;this.format=m||n.RGBA;this.type=k||n.UNSIGNED_BYTE};g.prototype.upload=function(j){this.bind();var k=this.gl;this.width=j.videoWidth||j.width;this.height=j.videoHeight||j.height;k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,this.type,j)};var i=false;g.prototype.uploadData=function(m,l,j){this.bind();var n=this.gl;this.width=l||this.width;this.height=j||this.height;if(m instanceof Float32Array){if(!i){var k=n.getExtension("OES_texture_float");if(k){i=true}else{throw new Error("floating point textures not available")}}this.type=n.FLOAT}else{this.type=n.UNSIGNED_BYTE}n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);n.texImage2D(n.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,this.type,m||null)};g.prototype.bind=function(j){var k=this.gl;if(j!==undefined){k.activeTexture(k.TEXTURE0+j)}k.bindTexture(k.TEXTURE_2D,this.texture)};g.prototype.unbind=function(){var j=this.gl;j.bindTexture(j.TEXTURE_2D,null)};g.prototype.minFilter=function(j){var k=this.gl;this.bind();if(this.mipmap){k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,j?k.LINEAR_MIPMAP_LINEAR:k.NEAREST_MIPMAP_NEAREST)}else{k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,j?k.LINEAR:k.NEAREST)}};g.prototype.magFilter=function(j){var k=this.gl;this.bind();k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,j?k.LINEAR:k.NEAREST)};g.prototype.enableMipmap=function(){var j=this.gl;this.bind();this.mipmap=true;j.generateMipmap(j.TEXTURE_2D)};g.prototype.enableLinearScaling=function(){this.minFilter(true);this.magFilter(true)};g.prototype.enableNearestScaling=function(){this.minFilter(false);this.magFilter(false)};g.prototype.enableWrapClamp=function(){var j=this.gl;this.bind();j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE);j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE)};g.prototype.enableWrapRepeat=function(){var j=this.gl;this.bind();j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.REPEAT);j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.REPEAT)};g.prototype.enableWrapMirrorRepeat=function(){var j=this.gl;this.bind();j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.MIRRORED_REPEAT);j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.MIRRORED_REPEAT)};g.prototype.destroy=function(){var j=this.gl;j.deleteTexture(this.texture)};g.fromSource=function(m,l,j){var k=new g(m);k.premultiplyAlpha=j||false;k.upload(l);return k};g.fromData=function(n,m,k,j){var l=new g(n);l.uploadData(m,k,j);return l};h.exports=g},{}],18:[function(g,h,e){var i=g("./setVertexAttribArrays");function f(l,k){this.nativeVaoExtension=null;if(!f.FORCE_NATIVE){this.nativeVaoExtension=l.getExtension("OES_vertex_array_object")||l.getExtension("MOZ_OES_vertex_array_object")||l.getExtension("WEBKIT_OES_vertex_array_object")}this.nativeState=k;if(this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var j=l.getParameter(l.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(j),attribState:new Array(j)}}this.gl=l;this.attributes=[];this.indexBuffer=null;this.dirty=false}f.prototype.constructor=f;h.exports=f;f.FORCE_NATIVE=false;f.prototype.bind=function(){if(this.nativeVao){this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao);if(this.dirty){this.dirty=false;this.activate()}}else{this.activate()}return this};f.prototype.unbind=function(){if(this.nativeVao){this.nativeVaoExtension.bindVertexArrayOES(null)}return this};f.prototype.activate=function(){var m=this.gl;var l=null;for(var j=0;j<this.attributes.length;j++){var k=this.attributes[j];if(l!==k.buffer){k.buffer.bind();l=k.buffer}m.vertexAttribPointer(k.attribute.location,k.attribute.size,k.type||m.FLOAT,k.normalized||false,k.stride||0,k.start||0)}i(m,this.attributes,this.nativeState);this.indexBuffer.bind();return this};f.prototype.addAttribute=function(j,l,k,n,m,o){this.attributes.push({buffer:j,attribute:l,location:l.location,type:k||this.gl.FLOAT,normalized:n||false,stride:m||0,start:o||0});this.dirty=true;return this};f.prototype.addIndex=function(j){this.indexBuffer=j;this.dirty=true;return this};f.prototype.clear=function(){if(this.nativeVao){this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao)}this.attributes.length=0;this.indexBuffer=null;return this};f.prototype.draw=function(k,j,m){var l=this.gl;l.drawElements(k,j,l.UNSIGNED_SHORT,m||0);return this};f.prototype.destroy=function(){this.gl=null;this.indexBuffer=null;this.attributes=null;this.nativeState=null;if(this.nativeVao){this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao)}this.nativeVaoExtension=null;this.nativeVao=null}},{"./setVertexAttribArrays":21}],19:[function(f,g,e){var h=function(j,i){var k=j.getContext("webgl",i)||j.getContext("experimental-webgl",i);if(!k){throw new Error("This browser does not support webGL. Try using the canvas renderer")}return k};g.exports=h},{}],20:[function(f,g,e){var h={createContext:f("./createContext"),setVertexAttribArrays:f("./setVertexAttribArrays"),GLBuffer:f("./GLBuffer"),GLFramebuffer:f("./GLFramebuffer"),GLShader:f("./GLShader"),GLTexture:f("./GLTexture"),VertexArrayObject:f("./VertexArrayObject"),shader:f("./shader")};if(typeof g!=="undefined"&&g.exports){g.exports=h}if(typeof window!=="undefined"){window.pixi={gl:h}}},{"./GLBuffer":14,"./GLFramebuffer":15,"./GLShader":16,"./GLTexture":17,"./VertexArrayObject":18,"./createContext":19,"./setVertexAttribArrays":21,"./shader":27}],21:[function(f,g,e){var h=function(p,o,n){var l;if(n){var j=n.tempAttribState,k=n.attribState;for(l=0;l<j.length;l++){j[l]=false}for(l=0;l<o.length;l++){j[o[l].attribute.location]=true}for(l=0;l<k.length;l++){if(k[l]!==j[l]){k[l]=j[l];if(n.attribState[l]){p.enableVertexAttribArray(l)}else{p.disableVertexAttribArray(l)}}}}else{for(l=0;l<o.length;l++){var m=o[l];p.enableVertexAttribArray(m.attribute.location)}}};g.exports=h},{}],22:[function(g,h,f){var e=function(o,j,l){var m=i(o,o.VERTEX_SHADER,j);var n=i(o,o.FRAGMENT_SHADER,l);var k=o.createProgram();o.attachShader(k,m);o.attachShader(k,n);o.linkProgram(k);if(!o.getProgramParameter(k,o.LINK_STATUS)){console.error("Pixi.js Error: Could not initialize shader.");console.error("gl.VALIDATE_STATUS",o.getProgramParameter(k,o.VALIDATE_STATUS));console.error("gl.getError()",o.getError());if(o.getProgramInfoLog(k)!==""){console.warn("Pixi.js Warning: gl.getProgramInfoLog()",o.getProgramInfoLog(k))}o.deleteProgram(k);k=null}o.deleteShader(m);o.deleteShader(n);return k};var i=function(m,j,l){var k=m.createShader(j);m.shaderSource(k,l);m.compileShader(k);if(!m.getShaderParameter(k,m.COMPILE_STATUS)){console.log(m.getShaderInfoLog(k));return null}return k};h.exports=e},{}],23:[function(g,h,f){var e=function(k,j){switch(k){case"float":return 0;case"vec2":return new Float32Array(2*j);case"vec3":return new Float32Array(3*j);case"vec4":return new Float32Array(4*j);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*j);case"ivec3":return new Int32Array(3*j);case"ivec4":return new Int32Array(4*j);case"bool":return false;case"bvec2":return i(2*j);case"bvec3":return i(3*j);case"bvec4":return i(4*j);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}};var i=function(k){var l=new Array(k);for(var j=0;j<l.length;j++){l[j]=false}return l};h.exports=e},{}],24:[function(f,h,e){var j=f("./mapType");var i=f("./mapSize");var g=function(r,n){var m={};var l=r.getProgramParameter(n,r.ACTIVE_ATTRIBUTES);for(var o=0;o<l;o++){var q=r.getActiveAttrib(n,o);var p=j(r,q.type);m[q.name]={type:p,size:i(p),location:r.getAttribLocation(n,q.name),pointer:k}}return m};var k=function(l,n,m,o){gl.vertexAttribPointer(this.location,this.size,l||gl.FLOAT,n||false,m||0,o||0)};h.exports=g},{"./mapSize":28,"./mapType":29}],25:[function(h,i,g){var j=h("./mapType");var f=h("./defaultValue");var e=function(r,m){var k={};var l=r.getProgramParameter(m,r.ACTIVE_UNIFORMS);for(var o=0;o<l;o++){var q=r.getActiveUniform(m,o);var n=q.name.replace(/\[.*?\]/,"");var p=j(r,q.type);k[n]={type:p,size:q.size,location:r.getUniformLocation(m,n),value:f(p,q.size)}}return k};i.exports=e},{"./defaultValue":23,"./mapType":29}],26:[function(g,f,j){var o=function(w,p){var y={data:{}};y.gl=w;var x=Object.keys(p);for(var v=0;v<x.length;v++){var u=x[v];var t=u.split(".");var q=t[t.length-1];var s=m(t,y);var r=p[u];s.data[q]=r;s.gl=w;Object.defineProperty(s,q,{get:l(q),set:i(q,r)})}return y};var l=function(p){var q=n.replace("%%",p);return new Function(q)};var i=function(q,p){var r=k.replace(/%%/g,q);var s;if(p.size===1){s=e[p.type]}else{s=h[p.type]}if(s){r+="\nthis.gl."+s+";"}return new Function("value",r)};var m=function(t,p){var s=p;for(var q=0;q<t.length-1;q++){var r=s[t[q]]||{data:{}};s[t[q]]=r;s=r}return s};var n=["return this.data.%%.value;",].join("\n");var k=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n");var e={"float":"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])","int":"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"};var h={"float":"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)","int":"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};f.exports=o},{}],27:[function(f,g,e){g.exports={compileProgram:f("./compileProgram"),defaultValue:f("./defaultValue"),extractAttributes:f("./extractAttributes"),extractUniforms:f("./extractUniforms"),generateUniformAccessObject:f("./generateUniformAccessObject"),mapSize:f("./mapSize"),mapType:f("./mapType")}},{"./compileProgram":22,"./defaultValue":23,"./extractAttributes":24,"./extractUniforms":25,"./generateUniformAccessObject":26,"./mapSize":28,"./mapType":29}],28:[function(g,h,f){var i=function(j){return e[j]};var e={"float":1,vec2:2,vec3:3,vec4:4,"int":1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};h.exports=i},{}],29:[function(g,i,f){var j=function(o,m){if(!e){var n=Object.keys(h);e={};for(var l=0;l<n.length;++l){var k=n[l];e[o[k]]=h[k]}}return e[m]};var e=null;var h={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};i.exports=j},{}],30:[function(f,g,e){(function(h){
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
(function(){var m={};var y,t;y=this;if(y!=null){t=y.async}m.noConflict=function(){y.async=t;return m};function A(F){var G=false;return function(){if(G){throw new Error("Callback was already called.")}G=true;F.apply(y,arguments)}}var E=Object.prototype.toString;var p=Array.isArray||function(F){return E.call(F)==="[object Array]"};var B=function(F,H){for(var G=0;G<F.length;G+=1){H(F[G],G,F)}};var i=function(F,H){if(F.map){return F.map(H)}var G=[];B(F,function(I,K,J){G.push(H(I,K,J))});return G};var D=function(F,H,G){if(F.reduce){return F.reduce(H,G)}B(F,function(I,K,J){G=H(G,I,K,J)});return G};var k=function(H){if(Object.keys){return Object.keys(H)}var G=[];for(var F in H){if(H.hasOwnProperty(F)){G.push(F)}}return G};if(typeof h==="undefined"||!(h.nextTick)){if(typeof setImmediate==="function"){m.nextTick=function(F){setImmediate(F)};m.setImmediate=m.nextTick}else{m.nextTick=function(F){setTimeout(F,0)};m.setImmediate=m.nextTick}}else{m.nextTick=h.nextTick;if(typeof setImmediate!=="undefined"){m.setImmediate=function(F){setImmediate(F)}}else{m.setImmediate=m.nextTick}}m.each=function(F,I,J){J=J||function(){};if(!F.length){return J()}var H=0;B(F,function(K){I(K,A(G))});function G(K){if(K){J(K);J=function(){}}else{H+=1;if(H>=F.length){J()}}}};m.forEach=m.each;m.eachSeries=function(F,I,J){J=J||function(){};if(!F.length){return J()}var H=0;var G=function(){I(F[H],function(K){if(K){J(K);J=function(){}}else{H+=1;if(H>=F.length){J()}else{G()}}})};G()};m.forEachSeries=m.eachSeries;m.eachLimit=function(F,G,I,J){var H=o(G);H.apply(null,[F,I,J])};m.forEachLimit=m.eachLimit;var o=function(F){return function(G,K,M){M=M||function(){};if(!G.length||F<=0){return M()}var J=0;var H=0;var I=0;(function L(){if(J>=G.length){return M()}while(I<F&&H<G.length){H+=1;I+=1;K(G[H-1],function(N){if(N){M(N);M=function(){}}else{J+=1;I-=1;if(J>=G.length){M()}else{L()}}})}})()}};var z=function(F){return function(){var G=Array.prototype.slice.call(arguments);return F.apply(null,[m.each].concat(G))}};var x=function(F,G){return function(){var H=Array.prototype.slice.call(arguments);return G.apply(null,[o(F)].concat(H))}};var v=function(F){return function(){var G=Array.prototype.slice.call(arguments);return F.apply(null,[m.eachSeries].concat(G))}};var q=function(I,F,H,J){F=i(F,function(K,L){return{index:L,value:K}});if(!J){I(F,function(K,L){H(K.value,function(M){L(M)})})}else{var G=[];I(F,function(K,L){H(K.value,function(N,M){G[K.index]=M;L(N)})},function(K){J(K,G)})}};m.map=z(q);m.mapSeries=v(q);m.mapLimit=function(F,G,H,I){return l(G)(F,H,I)};var l=function(F){return x(F,q)};m.reduce=function(F,G,H,I){m.eachSeries(F,function(J,K){H(G,J,function(M,L){G=L;K(M)})},function(J){I(J,G)})};m.inject=m.reduce;m.foldl=m.reduce;m.reduceRight=function(F,G,H,J){var I=i(F,function(K){return K}).reverse();m.reduce(I,G,H,J)};m.foldr=m.reduceRight;var C=function(I,F,H,J){var G=[];F=i(F,function(K,L){return{index:L,value:K}});I(F,function(K,L){H(K.value,function(M){if(M){G.push(K)}L()})},function(K){J(i(G.sort(function(M,L){return M.index-L.index}),function(L){return L.value}))})};m.filter=z(C);m.filterSeries=v(C);m.select=m.filter;m.selectSeries=m.filterSeries;var u=function(I,F,H,J){var G=[];F=i(F,function(K,L){return{index:L,value:K}});I(F,function(K,L){H(K.value,function(M){if(!M){G.push(K)}L()})},function(K){J(i(G.sort(function(M,L){return M.index-L.index}),function(L){return L.value}))})};m.reject=z(u);m.rejectSeries=v(u);var n=function(H,F,G,I){H(F,function(J,K){G(J,function(L){if(L){I(J);I=function(){}}else{K()}})},function(J){I()})};m.detect=z(n);m.detectSeries=v(n);m.some=function(F,G,H){m.each(F,function(I,J){G(I,function(K){if(K){H(true);H=function(){}}J()})},function(I){H(false)})};m.any=m.some;m.every=function(F,G,H){m.each(F,function(I,J){G(I,function(K){if(!K){H(false);H=function(){}}J()})},function(I){H(true)})};m.all=m.every;m.sortBy=function(F,G,H){m.map(F,function(I,J){G(I,function(K,L){if(K){J(K)}else{J(null,{value:I,criteria:L})}})},function(K,I){if(K){return H(K)}else{var J=function(O,N){var M=O.criteria,L=N.criteria;return M<L?-1:M>L?1:0};H(null,i(I.sort(J),function(L){return L.value}))}})};m.auto=function(H,M){M=M||function(){};var N=k(H);var G=N.length;if(!G){return M()}var J={};var L=[];var F=function(O){L.unshift(O)};var I=function(P){for(var O=0;O<L.length;O+=1){if(L[O]===P){L.splice(O,1);return}}};var K=function(){G--;B(L.slice(0),function(O){O()})};F(function(){if(!G){var O=M;M=function(){};O(null,J)}});B(N,function(P){var O=p(H[P])?H[P]:[H[P]];var T=function(W){var U=Array.prototype.slice.call(arguments,1);if(U.length<=1){U=U[0]}if(W){var V={};B(k(J),function(X){V[X]=J[X]});V[P]=U;M(W,V);M=function(){}}else{J[P]=U;m.setImmediate(K)}};var R=O.slice(0,Math.abs(O.length-1))||[];var Q=function(){return D(R,function(V,U){return(V&&J.hasOwnProperty(U))},true)&&!J.hasOwnProperty(P)};if(Q()){O[O.length-1](T,J)}else{var S=function(){if(Q()){I(S);O[O.length-1](T,J)}};F(S)}})};m.retry=function(J,F,K){var H=5;var G=[];if(typeof J==="function"){K=F;F=J;J=H}J=parseInt(J,10)||H;var I=function(N,L){var M=function(O,P){return function(Q){O(function(S,R){Q(!S||P,{err:S,result:R})},L)}};while(J){G.push(M(F,!(J-=1)))}m.series(G,function(O,P){P=P[P.length-1];(N||K)(P.err,P.result)})};return K?I():I};m.waterfall=function(I,H){H=H||function(){};if(!p(I)){var F=new Error("First argument to waterfall must be an array of functions");return H(F)}if(!I.length){return H()}var G=function(J){return function(M){if(M){H.apply(null,arguments);H=function(){}}else{var K=Array.prototype.slice.call(arguments,1);var L=J.next();if(L){K.push(G(L))}else{K.push(H)}m.setImmediate(function(){J.apply(null,K)})}}};G(m.iterator(I))()};var j=function(G,I,H){H=H||function(){};if(p(I)){G.map(I,function(J,K){if(J){J(function(M){var L=Array.prototype.slice.call(arguments,1);if(L.length<=1){L=L[0]}K.call(null,M,L)})}},H)}else{var F={};G.each(k(I),function(J,K){I[J](function(M){var L=Array.prototype.slice.call(arguments,1);if(L.length<=1){L=L[0]}F[J]=L;K(M)})},function(J){H(J,F)})}};m.parallel=function(G,F){j({map:m.map,each:m.each},G,F)};m.parallelLimit=function(H,F,G){j({map:l(F),each:o(F)},H,G)};m.series=function(H,G){G=G||function(){};if(p(H)){m.mapSeries(H,function(I,J){if(I){I(function(L){var K=Array.prototype.slice.call(arguments,1);if(K.length<=1){K=K[0]}J.call(null,L,K)})}},G)}else{var F={};m.eachSeries(k(H),function(I,J){H[I](function(L){var K=Array.prototype.slice.call(arguments,1);if(K.length<=1){K=K[0]}F[I]=K;J(L)})},function(I){G(I,F)})}};m.iterator=function(G){var F=function(H){var I=function(){if(G.length){G[H].apply(null,arguments)}return I.next()};I.next=function(){return(H<G.length-1)?F(H+1):null};return I};return F(0)};m.apply=function(G){var F=Array.prototype.slice.call(arguments,1);return function(){return G.apply(null,F.concat(Array.prototype.slice.call(arguments)))}};var w=function(I,F,G,J){var H=[];I(F,function(L,K){G(L,function(M,N){H=H.concat(N||[]);K(M)})},function(K){J(K,H)})};m.concat=z(w);m.concatSeries=v(w);m.whilst=function(H,F,G){if(H()){F(function(I){if(I){return G(I)}m.whilst(H,F,G)})}else{G()}};m.doWhilst=function(F,H,G){F(function(J){if(J){return G(J)}var I=Array.prototype.slice.call(arguments,1);if(H.apply(null,I)){m.doWhilst(F,H,G)}else{G()}})};m.until=function(H,F,G){if(!H()){F(function(I){if(I){return G(I)}m.until(H,F,G)})}else{G()}};m.doUntil=function(F,H,G){F(function(J){if(J){return G(J)}var I=Array.prototype.slice.call(arguments,1);if(!H.apply(null,I)){m.doUntil(F,H,G)}else{G()}})};m.queue=function(J,H){if(H===undefined){H=1}function F(L,K,N,M){if(!L.started){L.started=true}if(!p(K)){K=[K]}if(K.length==0){return m.setImmediate(function(){if(L.drain){L.drain()}})}B(K,function(O){var P={data:O,callback:typeof M==="function"?M:null};if(N){L.tasks.unshift(P)}else{L.tasks.push(P)}if(L.saturated&&L.tasks.length===L.concurrency){L.saturated()}m.setImmediate(L.process)})}var G=0;var I={tasks:[],concurrency:H,saturated:null,empty:null,drain:null,started:false,paused:false,push:function(K,L){F(I,K,false,L)},kill:function(){I.drain=null;I.tasks=[]},unshift:function(K,L){F(I,K,true,L)},process:function(){if(!I.paused&&G<I.concurrency&&I.tasks.length){var L=I.tasks.shift();if(I.empty&&I.tasks.length===0){I.empty()}G+=1;var M=function(){G-=1;if(L.callback){L.callback.apply(L,arguments)}if(I.drain&&I.tasks.length+G===0){I.drain()}I.process()};var K=A(M);J(L.data,K)}},length:function(){return I.tasks.length},running:function(){return G},idle:function(){return I.tasks.length+G===0},pause:function(){if(I.paused===true){return}I.paused=true},resume:function(){if(I.paused===false){return}I.paused=false;for(var K=1;K<=I.concurrency;K++){m.setImmediate(I.process)}}};return I};m.priorityQueue=function(K,I){function H(M,L){return M.priority-L.priority}function G(Q,O,P){var N=-1,L=Q.length-1;while(N<L){var M=N+((L-N+1)>>>1);if(P(O,Q[M])>=0){N=M}else{L=M-1}}return N}function F(N,M,L,O){if(!N.started){N.started=true}if(!p(M)){M=[M]}if(M.length==0){return m.setImmediate(function(){if(N.drain){N.drain()}})}B(M,function(P){var Q={data:P,priority:L,callback:typeof O==="function"?O:null};N.tasks.splice(G(N.tasks,Q,H)+1,0,Q);if(N.saturated&&N.tasks.length===N.concurrency){N.saturated()}m.setImmediate(N.process)})}var J=m.queue(K,I);J.push=function(M,L,N){F(J,M,L,N)};delete J.unshift;return J};m.cargo=function(J,I){var F=false,K=[];var G={tasks:K,payload:I,saturated:null,empty:null,drain:null,drained:true,push:function(L,M){if(!p(L)){L=[L]}B(L,function(N){K.push({data:N,callback:typeof M==="function"?M:null});G.drained=false;if(G.saturated&&K.length===I){G.saturated()}});m.setImmediate(G.process)},process:function H(){if(F){return}if(K.length===0){if(G.drain&&!G.drained){G.drain()}G.drained=true;return}var L=typeof I==="number"?K.splice(0,I):K.splice(0,K.length);var M=i(L,function(N){return N.data});if(G.empty){G.empty()}F=true;J(M,function(){F=false;var N=arguments;B(L,function(O){if(O.callback){O.callback.apply(null,N)}});H()})},length:function(){return K.length},running:function(){return F}};return G};var r=function(F){return function(H){var G=Array.prototype.slice.call(arguments,1);H.apply(null,G.concat([function(J){var I=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(J){if(console.error){console.error(J)}}else{if(console[F]){B(I,function(K){console[F](K)})}}}}]))}};m.log=r("log");m.dir=r("dir");m.memoize=function(J,H){var G={};var I={};H=H||function(K){return K};var F=function(){var K=Array.prototype.slice.call(arguments);var M=K.pop();var L=H.apply(null,K);if(L in G){m.nextTick(function(){M.apply(null,G[L])})}else{if(L in I){I[L].push(M)}else{I[L]=[M];J.apply(null,K.concat([function(){G[L]=arguments;var P=I[L];delete I[L];for(var O=0,N=P.length;O<N;O++){P[O].apply(null,arguments)}}]))}}};F.memo=G;F.unmemoized=J;return F};m.unmemoize=function(F){return function(){return(F.unmemoized||F).apply(null,arguments)}};m.times=function(I,H,J){var F=[];for(var G=0;G<I;G++){F.push(G)}return m.map(F,H,J)};m.timesSeries=function(I,H,J){var F=[];for(var G=0;G<I;G++){F.push(G)}return m.mapSeries(F,H,J)};m.seq=function(){var F=arguments;return function(){var H=this;var G=Array.prototype.slice.call(arguments);var I=G.pop();m.reduce(F,G,function(K,L,J){L.apply(H,K.concat([function(){var N=arguments[0];var M=Array.prototype.slice.call(arguments,1);J(N,M)}]))},function(K,J){I.apply(H,[K].concat(J))})}};m.compose=function(){return m.seq.apply(null,Array.prototype.reverse.call(arguments))};var s=function(I,G){var H=function(){var K=this;var J=Array.prototype.slice.call(arguments);var L=J.pop();return I(G,function(N,M){N.apply(K,J.concat([M]))},L)};if(arguments.length>2){var F=Array.prototype.slice.call(arguments,2);return H.apply(this,F)}else{return H}};m.applyEach=z(s);m.applyEachSeries=v(s);m.forever=function(G,H){function F(I){if(I){if(H){return H(I)}throw I}G(F)}F()};if(typeof g!=="undefined"&&g.exports){g.exports=m}else{if(typeof d!=="undefined"&&d.amd){d([],function(){return m})}else{y.async=m}}}())}).call(this,f("_process"))},{_process:4}],31:[function(g,h,e){var i=g("async"),f=g("url"),k=g("./Resource"),j=g("eventemitter3");function l(n,m){j.call(this);m=m||10;this.baseUrl=n||"";this.progress=0;this.loading=false;this._progressChunk=0;this._beforeMiddleware=[];this._afterMiddleware=[];this._boundLoadResource=this._loadResource.bind(this);this._boundOnLoad=this._onLoad.bind(this);this._buffer=[];this._numToLoad=0;this._queue=i.queue(this._boundLoadResource,m);this.resources={}}l.prototype=Object.create(j.prototype);l.prototype.constructor=l;h.exports=l;l.prototype.add=l.prototype.enqueue=function(p,o,n,m){if(Array.isArray(p)){for(var q=0;q<p.length;++q){this.add(p[q])}return this}if(typeof p==="object"){m=o||p.callback||p.onComplete;n=p;o=p.url;p=p.name||p.key||p.url}if(typeof o!=="string"){m=n;n=o;o=p}if(typeof o!=="string"){throw new Error("No url passed to add resource to loader.")}if(typeof n==="function"){m=n;n=null}if(this.resources[p]){throw new Error('Resource with name "'+p+'" already exists.')}o=this._handleBaseUrl(o);this.resources[p]=new k(p,o,n);if(typeof m==="function"){this.resources[p].once("afterMiddleware",m)}this._numToLoad++;if(this._queue.started){this._queue.push(this.resources[p]);this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())}else{this._buffer.push(this.resources[p]);this._progressChunk=100/this._buffer.length}return this};l.prototype._handleBaseUrl=function(m){var n=f.parse(m);if(n.protocol||!n.pathname||n.pathname.indexOf("//")===0){return m}if(this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&m.charAt(0)!=="/"){return this.baseUrl+"/"+m}else{return this.baseUrl+m}};l.prototype.before=l.prototype.pre=function(m){this._beforeMiddleware.push(m);return this};l.prototype.after=l.prototype.use=function(m){this._afterMiddleware.push(m);return this};l.prototype.reset=function(){this.progress=0;this.loading=false;this._progressChunk=0;this._buffer.length=0;this._numToLoad=0;this._queue.kill();this._queue.started=false;this.resources={}};l.prototype.load=function(m){if(typeof m==="function"){this.once("complete",m)}if(this._queue.started){return this}this.emit("start",this);for(var n=0;n<this._buffer.length;++n){this._queue.push(this._buffer[n])}this._buffer.length=0;return this};l.prototype._loadResource=function(o,n){var m=this;o._dequeue=n;this._runMiddleware(o,this._beforeMiddleware,function(){o.load(m._boundOnLoad)})};l.prototype._onComplete=function(){this.emit("complete",this,this.resources)};l.prototype._onLoad=function(m){this.progress+=this._progressChunk;this.emit("progress",this,m);this._runMiddleware(m,this._afterMiddleware,function(){m.emit("afterMiddleware",m);this._numToLoad--;if(m.error){this.emit("error",m.error,this,m)}else{this.emit("load",this,m)}if(this._numToLoad===0){this.progress=100;this._onComplete()}});m._dequeue()};l.prototype._runMiddleware=function(p,o,m){var n=this;i.eachSeries(o,function(r,q){r.call(n,p,q)},m.bind(this,p))};l.LOAD_TYPE=k.LOAD_TYPE;l.XHR_READY_STATE=k.XHR_READY_STATE;l.XHR_RESPONSE_TYPE=k.XHR_RESPONSE_TYPE},{"./Resource":32,async:30,eventemitter3:11,url:9}],32:[function(j,g,l){var n=j("eventemitter3"),k=j("url"),m=!!(window.XDomainRequest&&!("withCredentials" in (new XMLHttpRequest()))),i=null;function f(q,p,o){n.call(this);o=o||{};if(typeof q!=="string"||typeof p!=="string"){throw new Error("Both name and url are required for constructing a resource.")}this.name=q;this.url=p;this.isDataUrl=this.url.indexOf("data:")===0;this.data=null;this.crossOrigin=o.crossOrigin===true?"anonymous":o.crossOrigin;this.loadType=o.loadType||this._determineLoadType();this.xhrType=o.xhrType;this.metadata=o.metadata||{};this.error=null;this.xhr=null;this.isJson=false;this.isXml=false;this.isImage=false;this.isAudio=false;this.isVideo=false;this._dequeue=null;this._boundComplete=this.complete.bind(this);this._boundOnError=this._onError.bind(this);this._boundOnProgress=this._onProgress.bind(this);this._boundXhrOnError=this._xhrOnError.bind(this);this._boundXhrOnAbort=this._xhrOnAbort.bind(this);this._boundXhrOnLoad=this._xhrOnLoad.bind(this);this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}f.prototype=Object.create(n.prototype);f.prototype.constructor=f;g.exports=f;f.prototype.complete=function(){if(this.data&&this.data.removeEventListener){this.data.removeEventListener("error",this._boundOnError);this.data.removeEventListener("load",this._boundComplete);this.data.removeEventListener("progress",this._boundOnProgress);this.data.removeEventListener("canplaythrough",this._boundComplete)}if(this.xhr){if(this.xhr.removeEventListener){this.xhr.removeEventListener("error",this._boundXhrOnError);this.xhr.removeEventListener("abort",this._boundXhrOnAbort);this.xhr.removeEventListener("progress",this._boundOnProgress);this.xhr.removeEventListener("load",this._boundXhrOnLoad)}else{this.xhr.onerror=null;this.xhr.ontimeout=null;this.xhr.onprogress=null;this.xhr.onload=null}}this.emit("complete",this)};f.prototype.load=function(o){this.emit("start",this);if(o){this.once("complete",o)}if(this.crossOrigin===false||typeof this.crossOrigin!=="string"){this.crossOrigin=this._determineCrossOrigin(this.url)}switch(this.loadType){case f.LOAD_TYPE.IMAGE:this._loadImage();break;case f.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case f.LOAD_TYPE.VIDEO:this._loadElement("video");break;case f.LOAD_TYPE.XHR:default:if(m&&this.crossOrigin){this._loadXdr()}else{this._loadXhr()}break}};f.prototype._loadImage=function(){this.data=new Image();if(this.crossOrigin){this.data.crossOrigin=this.crossOrigin}this.data.src=this.url;this.isImage=true;this.data.addEventListener("error",this._boundOnError,false);this.data.addEventListener("load",this._boundComplete,false);this.data.addEventListener("progress",this._boundOnProgress,false)};f.prototype._loadElement=function(p){if(p==="audio"&&typeof Audio!=="undefined"){this.data=new Audio()}else{this.data=document.createElement(p)}if(this.data===null){this.error=new Error("Unsupported element "+p);this.complete();return}if(navigator.isCocoonJS){this.data.src=Array.isArray(this.url)?this.url[0]:this.url}else{if(Array.isArray(this.url)){for(var o=0;o<this.url.length;++o){this.data.appendChild(this._createSource(p,this.url[o]))}}else{this.data.appendChild(this._createSource(p,this.url))}}this["is"+p[0].toUpperCase()+p.substring(1)]=true;this.data.addEventListener("error",this._boundOnError,false);this.data.addEventListener("load",this._boundComplete,false);this.data.addEventListener("progress",this._boundOnProgress,false);this.data.addEventListener("canplaythrough",this._boundComplete,false);this.data.load()};f.prototype._loadXhr=function(){if(typeof this.xhrType!=="string"){this.xhrType=this._determineXhrType()}var o=this.xhr=new XMLHttpRequest();o.open("GET",this.url,true);if(this.xhrType===f.XHR_RESPONSE_TYPE.JSON||this.xhrType===f.XHR_RESPONSE_TYPE.DOCUMENT){o.responseType=f.XHR_RESPONSE_TYPE.TEXT}else{o.responseType=this.xhrType}o.addEventListener("error",this._boundXhrOnError,false);o.addEventListener("abort",this._boundXhrOnAbort,false);o.addEventListener("progress",this._boundOnProgress,false);o.addEventListener("load",this._boundXhrOnLoad,false);o.send()};f.prototype._loadXdr=function(){if(typeof this.xhrType!=="string"){this.xhrType=this._determineXhrType()}var o=this.xhr=new XDomainRequest();o.timeout=5000;o.onerror=this._boundXhrOnError;o.ontimeout=this._boundXdrOnTimeout;o.onprogress=this._boundOnProgress;o.onload=this._boundXhrOnLoad;o.open("GET",this.url,true);setTimeout(function(){o.send()},0)};f.prototype._createSource=function(p,o,r){if(!r){r=p+"/"+o.substr(o.lastIndexOf(".")+1)}var q=document.createElement("source");q.src=o;q.type=r;return q};f.prototype._onError=function(o){this.error=new Error("Failed to load element using "+o.target.nodeName);this.complete()};f.prototype._onProgress=function(o){if(o&&o.lengthComputable){this.emit("progress",this,o.loaded/o.total)}};f.prototype._xhrOnError=function(){this.error=new Error(e(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"');this.complete()};f.prototype._xhrOnAbort=function(){this.error=new Error(e(this.xhr)+" Request was aborted by the user.");this.complete()};f.prototype._xdrOnTimeout=function(){this.error=new Error(e(this.xhr)+" Request timed out.");this.complete()};f.prototype._xhrOnLoad=function(){var q=this.xhr,o=q.status!==undefined?q.status:200;if(o===200||o===204||(o===0&&q.responseText.length>0)){if(this.xhrType===f.XHR_RESPONSE_TYPE.TEXT){this.data=q.responseText}else{if(this.xhrType===f.XHR_RESPONSE_TYPE.JSON){try{this.data=JSON.parse(q.responseText);this.isJson=true}catch(p){this.error=new Error("Error trying to parse loaded json:",p)}}else{if(this.xhrType===f.XHR_RESPONSE_TYPE.DOCUMENT){try{if(window.DOMParser){var s=new DOMParser();this.data=s.parseFromString(q.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=q.responseText;this.data=r}this.isXml=true}catch(p){this.error=new Error("Error trying to parse loaded xml:",p)}}else{this.data=q.response||q.responseText}}}}else{this.error=new Error("["+q.status+"]"+q.statusText+":"+q.responseURL)}this.complete()};function e(o){return o.toString().replace("object ","")}f.prototype._determineCrossOrigin=function(p,q){if(p.indexOf("data:")===0){return""}q=q||window.location;if(!i){i=document.createElement("a")}i.href=p;p=k.parse(i.href);var o=(!p.port&&q.port==="")||(p.port===q.port);if(p.hostname!==q.hostname||!o||p.protocol!==q.protocol){return"anonymous"}return""};f.prototype._determineXhrType=function(){return f._xhrTypeMap[this._getExtension()]||f.XHR_RESPONSE_TYPE.TEXT};f.prototype._determineLoadType=function(){return f._loadTypeMap[this._getExtension()]||f.LOAD_TYPE.XHR};f.prototype._getExtension=function(){var o=this.url,p;if(this.isDataUrl){var r=o.indexOf("/");p=o.substring(r+1,o.indexOf(";",r))}else{var q=o.indexOf("?");if(q!==-1){o=o.substring(0,q)}p=o.substring(o.lastIndexOf(".")+1)}return p.toLowerCase()};f.prototype._getMimeFromXhrType=function(o){switch(o){case f.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case f.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case f.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case f.XHR_RESPONSE_TYPE.JSON:return"application/json";case f.XHR_RESPONSE_TYPE.DEFAULT:case f.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}};f.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};f.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};f.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};f._loadTypeMap={gif:f.LOAD_TYPE.IMAGE,png:f.LOAD_TYPE.IMAGE,bmp:f.LOAD_TYPE.IMAGE,jpg:f.LOAD_TYPE.IMAGE,jpeg:f.LOAD_TYPE.IMAGE,tif:f.LOAD_TYPE.IMAGE,tiff:f.LOAD_TYPE.IMAGE,webp:f.LOAD_TYPE.IMAGE,tga:f.LOAD_TYPE.IMAGE,"svg+xml":f.LOAD_TYPE.IMAGE};f._xhrTypeMap={xhtml:f.XHR_RESPONSE_TYPE.DOCUMENT,html:f.XHR_RESPONSE_TYPE.DOCUMENT,htm:f.XHR_RESPONSE_TYPE.DOCUMENT,xml:f.XHR_RESPONSE_TYPE.DOCUMENT,tmx:f.XHR_RESPONSE_TYPE.DOCUMENT,tsx:f.XHR_RESPONSE_TYPE.DOCUMENT,svg:f.XHR_RESPONSE_TYPE.DOCUMENT,gif:f.XHR_RESPONSE_TYPE.BLOB,png:f.XHR_RESPONSE_TYPE.BLOB,bmp:f.XHR_RESPONSE_TYPE.BLOB,jpg:f.XHR_RESPONSE_TYPE.BLOB,jpeg:f.XHR_RESPONSE_TYPE.BLOB,tif:f.XHR_RESPONSE_TYPE.BLOB,tiff:f.XHR_RESPONSE_TYPE.BLOB,webp:f.XHR_RESPONSE_TYPE.BLOB,tga:f.XHR_RESPONSE_TYPE.BLOB,json:f.XHR_RESPONSE_TYPE.JSON,text:f.XHR_RESPONSE_TYPE.TEXT,txt:f.XHR_RESPONSE_TYPE.TEXT};f.setExtensionLoadType=function(p,o){h(f._loadTypeMap,p,o)};f.setExtensionXhrType=function(p,o){h(f._xhrTypeMap,p,o)};function h(o,q,p){if(q&&q.indexOf(".")===0){q=q.substring(1)}if(!q){return}o[q]=p}},{eventemitter3:11,url:9}],33:[function(f,g,e){g.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(j){var i="";var n;var h=new Array(4);var m=0;var k=0;var l=0;while(m<j.length){n=new Array(3);for(k=0;k<n.length;k++){if(m<j.length){n[k]=j.charCodeAt(m++)&255}else{n[k]=0}}h[0]=n[0]>>2;h[1]=((n[0]&3)<<4)|(n[1]>>4);h[2]=((n[1]&15)<<2)|(n[2]>>6);h[3]=n[2]&63;l=m-(j.length-1);switch(l){case 2:h[3]=64;h[2]=64;break;case 1:h[3]=64;break;default:break}for(k=0;k<h.length;k++){i+=this._keyStr.charAt(h[k])}}return i}}},{}],34:[function(f,g,e){g.exports=f("./Loader");g.exports.Resource=f("./Resource");g.exports.middleware={caching:{memory:f("./middlewares/caching/memory")},parsing:{blob:f("./middlewares/parsing/blob")}}},{"./Loader":31,"./Resource":32,"./middlewares/caching/memory":35,"./middlewares/parsing/blob":36}],35:[function(g,h,f){var e={};h.exports=function(){return function(j,i){if(e[j.url]){j.data=e[j.url];j.complete()}else{j.once("complete",function(){e[this.url]=this.data})}i()}}},{}],36:[function(f,h,e){var i=f("../../Resource"),g=f("../../b64");var j=window.URL||window.webkitURL;h.exports=function(){return function(m,l){if(!m.data){return l()}if(m.xhr&&m.xhrType===i.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof m.data==="string"){var k=m.xhr.getResponseHeader("content-type");if(k&&k.indexOf("image")===0){m.data=new Image();m.data.src="data:"+k+";base64,"+g.encodeBinary(m.xhr.responseText);m.isImage=true;m.data.onload=function(){m.data.onload=null;l()}}}else{if(m.data.type.indexOf("image")===0){var n=j.createObjectURL(m.data);m.blob=m.data;m.data=new Image();m.data.src=n;m.isImage=true;m.data.onload=function(){j.revokeObjectURL(n);m.data.onload=null;l()}}}}else{l()}}}},{"../../Resource":32,"../../b64":33}],37:[function(h,i,f){var e=h("../core");var g=h("ismobilejs");Object.assign(e.DisplayObject.prototype,h("./accessibleTarget"));function j(k){if(g.tablet||g.phone){this.createTouchHook()}var l=document.createElement("div");l.style.width=100+"px";l.style.height=100+"px";l.style.position="absolute";l.style.top=0;l.style.left=0;l.style.zIndex=2;this.div=l;this.pool=[];this.renderId=0;this.debug=false;this.renderer=k;this.children=[];this._onKeyDown=this._onKeyDown.bind(this);this._onMouseMove=this._onMouseMove.bind(this);this.isActive=false;this.isMobileAccessabillity=false;window.addEventListener("keydown",this._onKeyDown,false)}j.prototype.constructor=j;i.exports=j;j.prototype.createTouchHook=function(){var k=document.createElement("button");k.style.width=1+"px";k.style.height=1+"px";k.style.position="absolute";k.style.top=-1000+"px";k.style.left=-1000+"px";k.style.zIndex=2;k.style.backgroundColor="#FF0000";k.title="HOOK DIV";k.addEventListener("focus",function(){this.isMobileAccessabillity=true;this.activate();document.body.removeChild(k)}.bind(this));document.body.appendChild(k)};j.prototype.activate=function(){if(this.isActive){return}this.isActive=true;window.document.addEventListener("mousemove",this._onMouseMove,true);window.removeEventListener("keydown",this._onKeyDown,false);this.renderer.on("postrender",this.update,this);if(this.renderer.view.parentNode){this.renderer.view.parentNode.appendChild(this.div)}};j.prototype.deactivate=function(){if(!this.isActive||this.isMobileAccessabillity){return}this.isActive=false;window.document.removeEventListener("mousemove",this._onMouseMove);window.addEventListener("keydown",this._onKeyDown,false);this.renderer.off("postrender",this.update);if(this.div.parentNode){this.div.parentNode.removeChild(this.div)}};j.prototype.updateAccessibleObjects=function(m){if(!m.visible){return}if(m.accessible&&m.interactive){if(!m._accessibleActive){this.addChild(m)}m.renderId=this.renderId}var l=m.children;for(var k=l.length-1;k>=0;k--){this.updateAccessibleObjects(l[k])}};j.prototype.update=function(){if(!this.renderer.renderingToScreen){return}this.updateAccessibleObjects(this.renderer._lastObjectRendered);var m=this.renderer.view.getBoundingClientRect();var r=m.width/this.renderer.width;var n=m.height/this.renderer.height;var q=this.div;q.style.left=m.left+"px";q.style.top=m.top+"px";q.style.width=this.renderer.width+"px";q.style.height=this.renderer.height+"px";for(var l=0;l<this.children.length;l++){var p=this.children[l];if(p.renderId!==this.renderId){p._accessibleActive=false;e.utils.removeItems(this.children,l,1);this.div.removeChild(p._accessibleDiv);this.pool.push(p._accessibleDiv);p._accessibleDiv=null;l--;if(this.children.length===0){this.deactivate()}}else{q=p._accessibleDiv;var o=p.hitArea;var k=p.worldTransform;if(p.hitArea){q.style.left=((k.tx+(o.x*k.a))*r)+"px";q.style.top=((k.ty+(o.y*k.d))*n)+"px";q.style.width=(o.width*k.a*r)+"px";q.style.height=(o.height*k.d*n)+"px"}else{o=p.getBounds();this.capHitArea(o);q.style.left=(o.x*r)+"px";q.style.top=(o.y*n)+"px";q.style.width=(o.width*r)+"px";q.style.height=(o.height*n)+"px"}}}this.renderId++};j.prototype.capHitArea=function(k){if(k.x<0){k.width+=k.x;k.x=0}if(k.y<0){k.height+=k.y;k.y=0}if(k.x+k.width>this.renderer.width){k.width=this.renderer.width-k.x}if(k.y+k.height>this.renderer.height){k.height=this.renderer.height-k.y}};j.prototype.addChild=function(k){var l=this.pool.pop();if(!l){l=document.createElement("button");l.style.width=100+"px";l.style.height=100+"px";l.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent";l.style.position="absolute";l.style.zIndex=2;l.style.borderStyle="none";l.addEventListener("click",this._onClick.bind(this));l.addEventListener("focus",this._onFocus.bind(this));l.addEventListener("focusout",this._onFocusOut.bind(this))}if(k.accessibleTitle){l.title=k.accessibleTitle}else{if(!k.accessibleTitle&&!k.accessibleHint){l.title="displayObject "+this.tabIndex}}if(k.accessibleHint){l.setAttribute("aria-label",k.accessibleHint)}k._accessibleActive=true;k._accessibleDiv=l;l.displayObject=k;this.children.push(k);this.div.appendChild(k._accessibleDiv);k._accessibleDiv.tabIndex=k.tabIndex};j.prototype._onClick=function(l){var k=this.renderer.plugins.interaction;k.dispatchEvent(l.target.displayObject,"click",k.eventData)};j.prototype._onFocus=function(l){var k=this.renderer.plugins.interaction;k.dispatchEvent(l.target.displayObject,"mouseover",k.eventData)};j.prototype._onFocusOut=function(l){var k=this.renderer.plugins.interaction;k.dispatchEvent(l.target.displayObject,"mouseout",k.eventData)};j.prototype._onKeyDown=function(k){if(k.keyCode!==9){return}this.activate()};j.prototype._onMouseMove=function(){this.deactivate()};j.prototype.destroy=function(){this.div=null;for(var k=0;k<this.children.length;k++){this.children[k].div=null}window.document.removeEventListener("mousemove",this._onMouseMove);window.removeEventListener("keydown",this._onKeyDown);this.pool=null;this.children=null;this.renderer=null};e.WebGLRenderer.registerPlugin("accessibility",j);e.CanvasRenderer.registerPlugin("accessibility",j)},{"../core":60,"./accessibleTarget":38,ismobilejs:12}],38:[function(f,g,e){var h={accessible:false,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:false,_accessibleDiv:false};g.exports=h},{}],39:[function(f,g,e){g.exports={accessibleTarget:f("./accessibleTarget"),AccessibilityManager:f("./AccessibilityManager")}},{"./AccessibilityManager":37,"./accessibleTarget":38}],40:[function(g,h,f){var k=g("pixi-gl-core").GLShader;var j=g("./const");function e(l){if(l instanceof Array){if(l[0].substring(0,9)!=="precision"){var m=l.slice(0);m.unshift("precision "+j.PRECISION.DEFAULT+" float;");return m}}else{if(l.substring(0,9)!=="precision"){return"precision "+j.PRECISION.DEFAULT+" float;\n"+l}}return l}var i=function(n,l,m){k.call(this,n,e(l),e(m))};i.prototype=Object.create(k.prototype);i.prototype.constructor=i;h.exports=i},{"./const":41,"pixi-gl-core":20}],41:[function(g,h,f){var e={VERSION:"4.0.0",PI_2:Math.PI*2,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:0.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},WRAP_MODES:{DEFAULT:0,CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},GC_MODES:{DEFAULT:1,AUTO:0,MANUAL:1,},MIPMAP_TEXTURES:true,RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:false,forceFXAA:false,autoResize:false,transparent:false,backgroundColor:0,clearBeforeRender:true,preserveDrawingBuffer:false,roundPixels:false},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},PRECISION:{DEFAULT:"mediump",LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},TRANSFORM_MODE:{DEFAULT:0,STATIC:0,DYNAMIC:1},TEXT_GRADIENT:{LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},SPRITE_BATCH_SIZE:4096,SPRITE_MAX_TEXTURES:g("./utils/maxRecommendedTextures")(32),TEXT_STYLE_CHANGED:"changed"};h.exports=e},{"./utils/maxRecommendedTextures":115}],42:[function(g,i,e){var j=g("../math"),h=j.Rectangle;function f(){this.minX=Infinity;this.minY=Infinity;this.maxX=-Infinity;this.maxY=-Infinity;this.rect=null}f.prototype.constructor=f;i.exports=f;f.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY};f.prototype.clear=function(){this.updateID++;this.minX=Infinity;this.minY=Infinity;this.maxX=-Infinity;this.maxY=-Infinity};f.prototype.getRectangle=function(){if(this.minX>this.maxX||this.minY>this.maxY){return h.EMPTY}if(!this.rect){this.rect=new h(0,0,1,1)}this.rect.x=this.minX;this.rect.y=this.minY;this.rect.width=this.maxX-this.minX;this.rect.height=this.maxY-this.minY;return this.rect};f.prototype.addPoint=function(k){this.minX=Math.min(this.minX,k.x);this.maxX=Math.max(this.maxX,k.x);this.minY=Math.min(this.minY,k.y);this.maxY=Math.max(this.maxY,k.y)};f.prototype.addQuad=function(m){var l=this.minX,q=this.minY,o=this.maxX,n=this.maxY;var k=m[0];var p=m[1];l=k<l?k:l;q=p<q?p:q;o=k>o?k:o;n=p>n?p:n;k=m[2];p=m[3];l=k<l?k:l;q=p<q?p:q;o=k>o?k:o;n=p>n?p:n;k=m[4];p=m[5];l=k<l?k:l;q=p<q?p:q;o=k>o?k:o;n=p>n?p:n;k=m[6];p=m[7];l=k<l?k:l;q=p<q?p:q;o=k>o?k:o;n=p>n?p:n;this.minX=l;this.minY=q;this.maxX=o;this.maxY=n};f.prototype.addFrame=function(o,r,l,q,k){var p=o.worldTransform;var C=p.a,A=p.b,w=p.c,t=p.d,D=p.tx,B=p.ty;var z=this.minX,u=this.minY,v=this.maxX,s=this.maxY;var n=C*r+w*l+D;var m=A*r+t*l+B;z=n<z?n:z;u=m<u?m:u;v=n>v?n:v;s=m>s?m:s;n=C*q+w*l+D;m=A*q+t*l+B;z=n<z?n:z;u=m<u?m:u;v=n>v?n:v;s=m>s?m:s;n=C*r+w*k+D;m=A*r+t*k+B;z=n<z?n:z;u=m<u?m:u;v=n>v?n:v;s=m>s?m:s;n=C*q+w*k+D;m=A*q+t*k+B;z=n<z?n:z;u=m<u?m:u;v=n>v?n:v;s=m>s?m:s;this.minX=z;this.minY=u;this.maxX=v;this.maxY=s};f.prototype.addVertices=function(r,n,o,l){var s=r.worldTransform;var E=s.a,C=s.b,A=s.c,v=s.d,F=s.tx,D=s.ty;var B=this.minX,w=this.minY,z=this.maxX,u=this.maxY;for(var t=o;t<l;t+=2){var m=n[t],k=n[t+1];var q=(E*m)+(A*k)+F;var p=(v*k)+(C*m)+D;B=q<B?q:B;w=p<w?p:w;z=q>z?q:z;u=p>u?p:u}this.minX=B;this.minY=w;this.maxX=z;this.maxY=u};f.prototype.addBounds=function(l){var k=this.minX,o=this.minY,n=this.maxX,m=this.maxY;this.minX=l.minX<k?l.minX:k;this.minY=l.minY<o?l.minY:o;this.maxX=l.maxX>n?l.maxX:n;this.maxY=l.maxY>m?l.maxY:m}},{"../math":65}],43:[function(i,j,h){var f=i("../utils"),g=i("./DisplayObject");function e(){g.call(this);this.children=[]}e.prototype=Object.create(g.prototype);e.prototype.constructor=e;j.exports=e;Object.defineProperties(e.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(l){var k=this.getLocalBounds().width;if(k!==0){this.scale.x=l/k}else{this.scale.x=1}this._width=l}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(l){var k=this.getLocalBounds().height;if(k!==0){this.scale.y=l/k}else{this.scale.y=1}this._height=l}}});e.prototype.onChildrenChange=function(){};e.prototype.addChild=function(m){var l=arguments.length;if(l>1){for(var k=0;k<l;k++){this.addChild(arguments[k])}}else{if(m.parent){m.parent.removeChild(m)}m.parent=this;this.transform._parentID=-1;this.children.push(m);this.onChildrenChange(this.children.length-1);m.emit("added",this)}return m};e.prototype.addChildAt=function(l,k){if(k>=0&&k<=this.children.length){if(l.parent){l.parent.removeChild(l)}l.parent=this;this.children.splice(k,0,l);this.onChildrenChange(k);l.emit("added",this);return l}else{throw new Error(l+"addChildAt: The index "+k+" supplied is out of bounds "+this.children.length)}};e.prototype.swapChildren=function(n,k){if(n===k){return}var m=this.getChildIndex(n);var l=this.getChildIndex(k);if(m<0||l<0){throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.")}this.children[m]=k;this.children[l]=n;this.onChildrenChange(m<l?m:l)};e.prototype.getChildIndex=function(l){var k=this.children.indexOf(l);if(k===-1){throw new Error("The supplied DisplayObject must be a child of the caller")}return k};e.prototype.setChildIndex=function(m,l){if(l<0||l>=this.children.length){throw new Error("The supplied index is out of bounds")}var k=this.getChildIndex(m);f.removeItems(this.children,k,1);this.children.splice(l,0,m);this.onChildrenChange(l)};e.prototype.getChildAt=function(k){if(k<0||k>=this.children.length){throw new Error("getChildAt: Supplied index "+k+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller")}return this.children[k]};e.prototype.removeChild=function(n){var m=arguments.length;if(m>1){for(var l=0;l<m;l++){this.removeChild(arguments[l])}}else{var k=this.children.indexOf(n);if(k===-1){return}n.parent=null;f.removeItems(this.children,k,1);this.onChildrenChange(k);n.emit("removed",this)}return n};e.prototype.removeChildAt=function(k){var l=this.getChildAt(k);l.parent=null;f.removeItems(this.children,k,1);this.onChildrenChange(k);l.emit("removed",this);return l};e.prototype.removeChildren=function(o,p){var n=o||0;var k=typeof p==="number"?p:this.children.length;var l=k-n;var q,m;if(l>0&&l<=k){q=this.children.splice(n,l);for(m=0;m<q.length;++m){q[m].parent=null}this.onChildrenChange(o);for(m=0;m<q.length;++m){q[m].emit("removed",this)}return q}else{if(l===0&&this.children.length===0){return[]}else{throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}}};e.prototype.updateTransform=function(){this._boundsID++;if(!this.visible){return}this.transform.updateTransform(this.parent.transform);this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var l=0,k=this.children.length;l<k;++l){this.children[l].updateTransform()}};e.prototype.containerUpdateTransform=e.prototype.updateTransform;e.prototype.calculateBounds=function(){this._bounds.clear();if(!this.visible){return}this._calculateBounds();for(var k=0;k<this.children.length;k++){var l=this.children[k];l.calculateBounds();this._bounds.addBounds(l._bounds)}this._boundsID=this._lastBoundsID};e.prototype._calculateBounds=function(){};e.prototype.renderWebGL=function(m){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}var l,k;if(this._mask||this._filters){m.currentRenderer.flush();if(this._filters&&this._filters.length){m.filterManager.pushFilter(this,this._filters)}if(this._mask){m.maskManager.pushMask(this,this._mask)}m.currentRenderer.start();this._renderWebGL(m);for(l=0,k=this.children.length;l<k;l++){this.children[l].renderWebGL(m)}m.currentRenderer.flush();if(this._mask){m.maskManager.popMask(this,this._mask)}if(this._filters){m.filterManager.popFilter()}m.currentRenderer.start()}else{this._renderWebGL(m);for(l=0,k=this.children.length;l<k;++l){this.children[l].renderWebGL(m)}}};e.prototype._renderWebGL=function(k){};e.prototype._renderCanvas=function(k){};e.prototype.renderCanvas=function(m){if(!this.visible||this.alpha<=0||!this.renderable){return}if(this._mask){m.maskManager.pushMask(this._mask)}this._renderCanvas(m);for(var l=0,k=this.children.length;l<k;++l){this.children[l].renderCanvas(m)}if(this._mask){m.maskManager.popMask(m)}};e.prototype.destroy=function(l){g.prototype.destroy.call(this);var n=typeof l==="boolean"?l:l&&l.children;if(n){for(var m=0,k=this.children.length;m<k;++m){this.children[m].destroy(l)}}this.removeChildren();this.children=null}},{"../utils":114,"./DisplayObject":44}],44:[function(h,g,j){var m=h("eventemitter3"),n=h("../const"),l=h("./TransformStatic"),i=h("./Transform"),f=h("./Bounds"),e=new k();function k(){m.call(this);var o=n.TRANSFORM_MODE.DEFAULT===n.TRANSFORM_MODE.STATIC?l:i;this.transform=new o();this.alpha=1;this.visible=true;this.renderable=true;this.parent=null;this.worldAlpha=1;this.filterArea=null;this._bounds=new f();this._boundsID=0;this._lastBoundsID=-1;this._mask=null}k.prototype=Object.create(m.prototype);k.prototype.constructor=k;g.exports=k;Object.defineProperties(k.prototype,{x:{get:function(){return this.position.x},set:function(o){this.transform.position.x=o}},y:{get:function(){return this.position.y},set:function(o){this.transform.position.y=o}},worldTransform:{get:function(){return this.transform.worldTransform}},localTransform:{get:function(){return this.transform.localTransform}},position:{get:function(){return this.transform.position},set:function(o){this.transform.position.copy(o)}},scale:{get:function(){return this.transform.scale},set:function(o){this.transform.scale.copy(o)}},pivot:{get:function(){return this.transform.pivot},set:function(o){this.transform.pivot.copy(o)}},skew:{get:function(){return this.transform.skew},set:function(o){this.transform.skew.copy(o)}},rotation:{get:function(){return this.transform.rotation},set:function(o){this.transform.rotation=o}},worldVisible:{get:function(){var o=this;do{if(!o.visible){return false}o=o.parent}while(o);return true}},mask:{get:function(){return this._mask},set:function(o){if(this._mask){this._mask.renderable=true}this._mask=o;if(this._mask){this._mask.renderable=false}}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(o){this._filters=o&&o.slice()}}});k.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform);this.worldAlpha=this.alpha*this.parent.worldAlpha;this._bounds.updateID++};k.prototype.displayObjectUpdateTransform=k.prototype.updateTransform;k.prototype._recursivePostUpdateTransform=function(){if(this.parent){this.parent._recursivePostUpdateTransform();this.transform.updateTransform(this.parent.transform)}else{this.transform.updateTransform(e.transform)}};k.prototype.getBounds=function(o){if(!o){if(!this.parent){this.parent=e;this.updateTransform();this.parent=null}else{this._recursivePostUpdateTransform();this.updateTransform()}}if(this._boundsID!==this._lastBoundsID){this.calculateBounds()}return this._bounds.getRectangle(this._bounds)};k.prototype.getLocalBounds=function(){var o=this.transform;var p=this.parent;this.parent=null;this.transform=e.transform;var q=this.getBounds();this.parent=p;this.transform=o;return q};k.prototype.toGlobal=function(p,o,q){if(!q){this._recursivePostUpdateTransform();if(!this.parent){this.parent=e;this.displayObjectUpdateTransform();this.parent=null}else{this.displayObjectUpdateTransform()}}return this.worldTransform.apply(p,o)};k.prototype.toLocal=function(p,r,o,q){if(r){p=r.toGlobal(p,o,q)}if(!q){this._recursivePostUpdateTransform();if(!this.parent){this.parent=e;this.displayObjectUpdateTransform();this.parent=null}else{this.displayObjectUpdateTransform()}}return this.worldTransform.applyInverse(p,o)};k.prototype.renderWebGL=function(o){};k.prototype.renderCanvas=function(o){};k.prototype.setParent=function(o){if(!o||!o.addChild){throw new Error("setParent: Argument must be a Container")}o.addChild(this);return o};k.prototype.setTransform=function(s,q,v,u,w,t,r,p,o){this.position.x=s||0;this.position.y=q||0;this.scale.x=!v?1:v;this.scale.y=!u?1:u;this.rotation=w||0;this.skew.x=t||0;this.skew.y=r||0;this.pivot.x=p||0;this.pivot.y=o||0;return this};k.prototype.destroy=function(){this.transform=null;this.parent=null;this._bounds=null;this._currentBounds=null;this._mask=null;this.filterArea=null}},{"../const":41,"./Bounds":42,"./Transform":45,"./TransformStatic":47,eventemitter3:11}],45:[function(h,i,f){var j=h("../math"),e=h("./TransformBase");function g(){e.call(this);this.position=new j.Point(0);this.scale=new j.Point(1,1);this.skew=new j.ObservablePoint(this.updateSkew,this,0,0);this.pivot=new j.Point(0);this._rotation=0;this._sr=Math.sin(0);this._cr=Math.cos(0);this._cy=Math.cos(0);this._sy=Math.sin(0);this._nsx=Math.sin(0);this._cx=Math.cos(0)}g.prototype=Object.create(e.prototype);g.prototype.constructor=g;g.prototype.updateSkew=function(){this._cy=Math.cos(this.skew.y);this._sy=Math.sin(this.skew.y);this._nsx=Math.sin(this.skew.x);this._cx=Math.cos(this.skew.x)};g.prototype.updateLocalTransform=function(){var l=this.localTransform;var m,k,o,n;m=this._cr*this.scale.x;k=this._sr*this.scale.x;o=-this._sr*this.scale.y;n=this._cr*this.scale.y;l.a=this._cy*m+this._sy*o;l.b=this._cy*k+this._sy*n;l.c=this._nsx*m+this._cx*o;l.d=this._nsx*k+this._cx*n};g.prototype.updateTransform=function(n){var p=n.worldTransform;var m=this.worldTransform;var l=this.localTransform;var o,k,r,q;o=this._cr*this.scale.x;k=this._sr*this.scale.x;r=-this._sr*this.scale.y;q=this._cr*this.scale.y;l.a=this._cy*o+this._sy*r;l.b=this._cy*k+this._sy*q;l.c=this._nsx*o+this._cx*r;l.d=this._nsx*k+this._cx*q;l.tx=this.position.x-(this.pivot.x*l.a+this.pivot.y*l.c);l.ty=this.position.y-(this.pivot.x*l.b+this.pivot.y*l.d);m.a=l.a*p.a+l.b*p.c;m.b=l.a*p.b+l.b*p.d;m.c=l.c*p.a+l.d*p.c;m.d=l.c*p.b+l.d*p.d;m.tx=l.tx*p.a+l.ty*p.c+p.tx;m.ty=l.tx*p.b+l.ty*p.d+p.ty;this._worldID++};g.prototype.setFromMatrix=function(k){k.decompose(this)};Object.defineProperties(g.prototype,{rotation:{get:function(){return this._rotation},set:function(k){this._rotation=k;this._sr=Math.sin(k);this._cr=Math.cos(k)}}});i.exports=g},{"../math":65,"./TransformBase":46}],46:[function(g,h,f){var i=g("../math");function e(){this.worldTransform=new i.Matrix();this.localTransform=new i.Matrix();this._worldID=0}e.prototype.constructor=e;e.prototype.updateLocalTransform=function(){};e.prototype.updateTransform=function(l){var m=l.worldTransform;var k=this.worldTransform;var j=this.localTransform;k.a=j.a*m.a+j.b*m.c;k.b=j.a*m.b+j.b*m.d;k.c=j.c*m.a+j.d*m.c;k.d=j.c*m.b+j.d*m.d;k.tx=j.tx*m.a+j.ty*m.c+m.tx;k.ty=j.tx*m.b+j.ty*m.d+m.ty;this._worldID++};e.prototype.updateWorldTransform=e.prototype.updateTransform;e.IDENTITY=new e();h.exports=e},{"../math":65}],47:[function(h,i,g){var j=h("../math"),f=h("./TransformBase");function e(){f.call(this);this.position=new j.ObservablePoint(this.onChange,this,0);this.scale=new j.ObservablePoint(this.onChange,this,1,1);this.pivot=new j.ObservablePoint(this.onChange,this,0,0);this.skew=new j.ObservablePoint(this.updateSkew,this,0,0);this._rotation=0;this._sr=Math.sin(0);this._cr=Math.cos(0);this._cy=Math.cos(0);this._sy=Math.sin(0);this._nsx=Math.sin(0);this._cx=Math.cos(0);this._currentLocalID=0}e.prototype=Object.create(f.prototype);e.prototype.constructor=e;e.prototype.onChange=function(){this._localID++};e.prototype.updateSkew=function(){this._cy=Math.cos(this.skew.y);this._sy=Math.sin(this.skew.y);this._nsx=Math.sin(this.skew.x);this._cx=Math.cos(this.skew.x);this._localID++};e.prototype.updateLocalTransform=function(){var l=this.localTransform;if(this._localID!==this._currentLocalID){var m,k,o,n;m=this._cr*this.scale.x;k=this._sr*this.scale.x;o=-this._sr*this.scale.y;n=this._cr*this.scale.y;l.a=this._cy*m+this._sy*o;l.b=this._cy*k+this._sy*n;l.c=this._nsx*m+this._cx*o;l.d=this._nsx*k+this._cx*n;l.tx=this.position._x-(this.pivot._x*l.a+this.pivot._y*l.c);l.ty=this.position._y-(this.pivot._x*l.b+this.pivot._y*l.d);this._currentLocalID=this._localID;this._parentID=-1}};e.prototype.updateTransform=function(n){var p=n.worldTransform;var m=this.worldTransform;var l=this.localTransform;if(this._localID!==this._currentLocalID){var o,k,r,q;o=this._cr*this.scale.x;k=this._sr*this.scale.x;r=-this._sr*this.scale.y;q=this._cr*this.scale.y;l.a=this._cy*o+this._sy*r;l.b=this._cy*k+this._sy*q;l.c=this._nsx*o+this._cx*r;l.d=this._nsx*k+this._cx*q;l.tx=this.position._x-(this.pivot._x*l.a+this.pivot._y*l.c);l.ty=this.position._y-(this.pivot._x*l.b+this.pivot._y*l.d);this._currentLocalID=this._localID;this._parentID=-1}if(this._parentID!==n._worldID){m.a=l.a*p.a+l.b*p.c;m.b=l.a*p.b+l.b*p.d;m.c=l.c*p.a+l.d*p.c;m.d=l.c*p.b+l.d*p.d;m.tx=l.tx*p.a+l.ty*p.c+p.tx;m.ty=l.tx*p.b+l.ty*p.d+p.ty;this._parentID=n._worldID;this._worldID++}};e.prototype.setFromMatrix=function(k){k.decompose(this);this._localID++};Object.defineProperties(e.prototype,{rotation:{get:function(){return this._rotation},set:function(k){this._rotation=k;this._sr=Math.sin(k);this._cr=Math.cos(k);this._localID++}}});i.exports=e},{"../math":65,"./TransformBase":46}],48:[function(i,h,l){var j=i("../display/Container"),n=i("../textures/RenderTexture"),k=i("../textures/Texture"),q=i("./GraphicsData"),g=i("../sprites/Sprite"),s=i("../math"),u=i("../const"),f=i("../display/Bounds"),p=i("./utils/bezierCurveTo"),r=i("../renderers/canvas/CanvasRenderer"),t,o=new s.Matrix(),e=new s.Point();function m(){j.call(this);this.fillAlpha=1;this.lineWidth=0;this.lineColor=0;this.graphicsData=[];this.tint=16777215;this._prevTint=16777215;this.blendMode=u.BLEND_MODES.NORMAL;this.currentPath=null;this._webGL={};this.isMask=false;this.boundsPadding=0;this._localBounds=new f();this.dirty=true;this.glDirty=false;this.boundsDirty=true;this.cachedSpriteDirty=false;this._spriteRect=null;this._fastRect=false}m._SPRITE_TEXTURE=null;m.prototype=Object.create(j.prototype);m.prototype.constructor=m;h.exports=m;m.prototype.clone=function(){var w=new m();w.renderable=this.renderable;w.fillAlpha=this.fillAlpha;w.lineWidth=this.lineWidth;w.lineColor=this.lineColor;w.tint=this.tint;w.blendMode=this.blendMode;w.isMask=this.isMask;w.boundsPadding=this.boundsPadding;w.dirty=true;w.glDirty=true;w.cachedSpriteDirty=this.cachedSpriteDirty;for(var v=0;v<this.graphicsData.length;++v){w.graphicsData.push(this.graphicsData[v].clone())}w.currentPath=w.graphicsData[w.graphicsData.length-1];w.updateLocalBounds();return w};m.prototype.lineStyle=function(v,x,y){this.lineWidth=v||0;this.lineColor=x||0;this.lineAlpha=(y===undefined)?1:y;if(this.currentPath){if(this.currentPath.shape.points.length){var w=new s.Polygon(this.currentPath.shape.points.slice(-2));w.closed=false;this.drawShape(w)}else{this.currentPath.lineWidth=this.lineWidth;this.currentPath.lineColor=this.lineColor;this.currentPath.lineAlpha=this.lineAlpha}}return this};m.prototype.moveTo=function(v,z){var w=new s.Polygon([v,z]);w.closed=false;this.drawShape(w);return this};m.prototype.lineTo=function(v,w){this.currentPath.shape.points.push(v,w);this.dirty=true;return this};m.prototype.quadraticCurveTo=function(D,z,F,C){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var v,A,w=20,G=this.currentPath.shape.points;if(G.length===0){this.moveTo(0,0)}var E=G[G.length-2];var B=G[G.length-1];var x=0;for(var y=1;y<=w;++y){x=y/w;v=E+((D-E)*x);A=B+((z-B)*x);G.push(v+(((D+((F-D)*x))-v)*x),A+(((z+((C-z)*x))-A)*x))}this.dirty=this.boundsDirty=true;return this};m.prototype.bezierCurveTo=function(A,w,z,v,B,y){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var D=this.currentPath.shape.points;var C=D[D.length-2];var x=D[D.length-1];D.length-=2;p(C,x,A,w,z,v,B,y,D);this.dirty=this.boundsDirty=true;return this};m.prototype.arcTo=function(R,B,Q,z,C){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points.push(R,B)}}else{this.moveTo(R,B)}var O=this.currentPath.shape.points,J=O[O.length-2],H=O[O.length-1],W=H-B,E=J-R,V=z-B,D=Q-R,P=Math.abs(W*D-E*V);if(P<1e-8||C===0){if(O[O.length-2]!==R||O[O.length-1]!==B){O.push(R,B)}}else{var U=W*W+E*E,L=V*V+D*D,w=W*V+E*D,G=C*Math.sqrt(U)/P,F=C*Math.sqrt(L)/P,x=G*w/U,v=F*w/L,A=G*D+F*E,y=G*V+F*W,K=E*(F+x),I=W*(F+x),T=D*(G+v),S=V*(G+v),N=Math.atan2(I-y,K-A),M=Math.atan2(S-y,T-A);this.arc(A+R,y+B,C,N,M,E*V>D*W)}this.dirty=this.boundsDirty=true;return this};m.prototype.arc=function(x,w,y,I,G,v){v=v||false;if(I===G){return this}if(!v&&G<=I){G+=Math.PI*2}else{if(v&&I<=G){I+=Math.PI*2}}var C=v?(I-G)*-1:(G-I);var F=Math.ceil(Math.abs(C)/(Math.PI*2))*40;if(C===0){return this}var O=x+Math.cos(I)*y;var M=w+Math.sin(I)*y;if(this.currentPath){this.currentPath.shape.points.push(O,M)}else{this.moveTo(O,M)}var L=this.currentPath.shape.points;var z=C/(F*2);var E=z*2;var H=Math.cos(z);var J=Math.sin(z);var Q=F-1;var A=(Q%1)/Q;for(var K=0;K<=Q;K++){var D=K+A*K;var N=((z)+I+(E*D));var P=Math.cos(N);var B=-Math.sin(N);L.push(((H*P)+(J*B))*y+x,((H*-B)+(J*P))*y+w)}this.dirty=this.boundsDirty=true;return this};m.prototype.beginFill=function(v,w){this.filling=true;this.fillColor=v||0;this.fillAlpha=(w===undefined)?1:w;if(this.currentPath){if(this.currentPath.shape.points.length<=2){this.currentPath.fill=this.filling;this.currentPath.fillColor=this.fillColor;this.currentPath.fillAlpha=this.fillAlpha}}return this};m.prototype.endFill=function(){this.filling=false;this.fillColor=null;this.fillAlpha=1;return this};m.prototype.drawRect=function(w,A,z,v){this.drawShape(new s.Rectangle(w,A,z,v));return this};m.prototype.drawRoundedRect=function(z,B,A,w,v){this.drawShape(new s.RoundedRectangle(z,B,A,w,v));return this};m.prototype.drawCircle=function(w,z,v){this.drawShape(new s.Circle(w,z,v));return this};m.prototype.drawEllipse=function(w,A,z,v){this.drawShape(new s.Ellipse(w,A,z,v));return this};m.prototype.drawPolygon=function(z){var y=z;var w=true;if(y instanceof s.Polygon){w=y.closed;y=y.points}if(!Array.isArray(y)){y=new Array(arguments.length);for(var x=0;x<y.length;++x){y[x]=arguments[x]}}var v=new s.Polygon(y);v.closed=w;this.drawShape(v);return this};m.prototype.clear=function(){this.lineWidth=0;this.filling=false;this.dirty=true;this.clearDirty=true;this.graphicsData=[];return this};m.prototype.isFastRect=function(){return this.graphicsData.length===1&&this.graphicsData[0].shape.type===u.SHAPES.RECT&&!this.graphicsData[0].lineWidth};m.prototype._renderWebGL=function(v){if(this.glDirty){this.dirty=true;this.glDirty=false}if(this.dirty){this._fastRect=this.isFastRect()}if(this._fastRect){this._renderSpriteRect(v)}else{v.setObjectRenderer(v.plugins.graphics);v.plugins.graphics.render(this)}};m.prototype._renderSpriteRect=function(w){var v=this.graphicsData[0].shape;if(!this._spriteRect){if(!m._SPRITE_TEXTURE){m._SPRITE_TEXTURE=n.create(10,10);var x=w._activeRenderTarget;w.bindRenderTexture(m._SPRITE_TEXTURE);w.clear([1,1,1,1]);w.bindRenderTarget(x)}this._spriteRect=new g(m._SPRITE_TEXTURE);this._spriteRect.tint=this.graphicsData[0].fillColor;this._spriteRect.alpha=this.graphicsData[0].fillAlpha}this._spriteRect.worldAlpha=this.worldAlpha*this._spriteRect.alpha;m._SPRITE_TEXTURE._frame.width=v.width;m._SPRITE_TEXTURE._frame.height=v.height;this._spriteRect.transform.worldTransform=this.transform.worldTransform;this._spriteRect.anchor.set(-v.x/v.width,-v.y/v.height);this._spriteRect.onAnchorUpdate();this._spriteRect._renderWebGL(w)};m.prototype._renderCanvas=function(v){if(this.isMask===true){return}v.plugins.graphics.render(this)};m.prototype._calculateBounds=function(){if(!this.renderable){return}if(this.boundsDirty){this.updateLocalBounds();this.glDirty=true;this.cachedSpriteDirty=true;this.boundsDirty=false}var v=this._localBounds;this._bounds.addFrame(this.transform,v.minX,v.minY,v.maxX,v.maxY)};m.prototype.containsPoint=function(v){this.worldTransform.applyInverse(v,e);var y=this.graphicsData;for(var w=0;w<y.length;w++){var x=y[w];if(!x.fill){continue}if(x.shape){if(x.shape.contains(e.x,e.y)){return true}}}return false};m.prototype.updateLocalBounds=function(){var B=Infinity;var z=-Infinity;var A=Infinity;var v=-Infinity;if(this.graphicsData.length){var H,N,L,J,M,F;for(var E=0;E<this.graphicsData.length;E++){var D=this.graphicsData[E];var I=D.type;var G=D.lineWidth;H=D.shape;if(I===u.SHAPES.RECT||I===u.SHAPES.RREC){L=H.x-G/2;J=H.y-G/2;M=H.width+G;F=H.height+G;B=L<B?L:B;z=L+M>z?L+M:z;A=J<A?J:A;v=J+F>v?J+F:v}else{if(I===u.SHAPES.CIRC){L=H.x;J=H.y;M=H.radius+G/2;F=H.radius+G/2;B=L-M<B?L-M:B;z=L+M>z?L+M:z;A=J-F<A?J-F:A;v=J+F>v?J+F:v}else{if(I===u.SHAPES.ELIP){L=H.x;J=H.y;M=H.width+G/2;F=H.height+G/2;B=L-M<B?L-M:B;z=L+M>z?L+M:z;A=J-F<A?J-F:A;v=J+F>v?J+F:v}else{N=H.points;for(var C=0;C<N.length;C+=2){L=N[C];J=N[C+1];B=L-G<B?L-G:B;z=L+G>z?L+G:z;A=J-G<A?J-G:A;v=J+G>v?J+G:v}}}}}}else{B=0;z=0;A=0;v=0}var K=this.boundsPadding;this._localBounds.minX=B-K;this._localBounds.maxX=z+K*2;this._localBounds.minY=A-K;this._localBounds.maxY=v+K*2};m.prototype.drawShape=function(v){if(this.currentPath){if(this.currentPath.shape.points.length<=2){this.graphicsData.pop()}}this.currentPath=null;var w=new q(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,v);this.graphicsData.push(w);if(w.type===u.SHAPES.POLY){w.shape.closed=w.shape.closed||this.filling;this.currentPath=w}this.dirty=this.boundsDirty=true;return w};m.prototype.generateCanvasTexture=function(x,v){v=v||1;var z=this.getLocalBounds();var w=new n.create(z.width*v,z.height*v);if(!t){t=new r()}o.tx=-z.x;o.ty=-z.y;t.render(this,w,false,o);var y=k.fromCanvas(w.baseTexture._canvasRenderTarget.canvas,x);y.baseTexture.resolution=v;return y};m.prototype.closePath=function(){var v=this.currentPath;if(v&&v.shape){v.shape.close()}return this};m.prototype.addHole=function(){var v=this.graphicsData.pop();this.currentPath=this.graphicsData[this.graphicsData.length-1];this.currentPath.addHole(v.shape);this.currentPath=null;return this};m.prototype.destroy=function(){j.prototype.destroy.apply(this,arguments);for(var w=0;w<this.graphicsData.length;++w){this.graphicsData[w].destroy()}for(var x in this._webgl){for(var v=0;v<this._webgl[x].data.length;++v){this._webgl[x].data[v].destroy()}}if(this._spriteRect){this._spriteRect.destroy()}this.graphicsData=null;this.currentPath=null;this._webgl=null;this._localBounds=null}},{"../const":41,"../display/Bounds":42,"../display/Container":43,"../math":65,"../renderers/canvas/CanvasRenderer":72,"../sprites/Sprite":96,"../textures/RenderTexture":106,"../textures/Texture":107,"./GraphicsData":49,"./utils/bezierCurveTo":51}],49:[function(f,g,e){function h(i,n,k,o,l,m,j){this.lineWidth=i;this.lineColor=n;this.lineAlpha=k;this._lineTint=n;this.fillColor=o;this.fillAlpha=l;this._fillTint=o;this.fill=m;this.holes=[];this.shape=j;this.type=j.type}h.prototype.constructor=h;g.exports=h;h.prototype.clone=function(){return new h(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)};h.prototype.addHole=function(i){this.holes.push(i)};h.prototype.destroy=function(){this.shape=null;this.holes=null}},{}],50:[function(h,j,g){var f=h("../../renderers/canvas/CanvasRenderer"),e=h("../../const");function i(k){this.renderer=k}i.prototype.constructor=i;j.exports=i;f.registerPlugin("graphics",i);i.prototype.render=function(O){var H=this.renderer;var n=H.context;var K=O.worldAlpha;var C=O.transform.worldTransform;var J=H.resolution;if(this._prevTint!==this.tint){this.dirty=true}n.setTransform(C.a*J,C.b*J,C.c*J,C.d*J,C.tx*J,C.ty*J);if(O.dirty){this.updateGraphicsTint(O);O.dirty=false}H.setBlendMode(O.blendMode);for(var M=0;M<O.graphicsData.length;M++){var Q=O.graphicsData[M];var m=Q.shape;var s=Q._fillTint;var l=Q._lineTint;n.lineWidth=Q.lineWidth;if(Q.type===e.SHAPES.POLY){n.beginPath();this.renderPolygon(m.points,m.closed,n);for(var L=0;L<Q.holes.length;L++){var D=Q.holes[L];this.renderPolygon(D.points,true,n)}if(Q.fill){n.globalAlpha=Q.fillAlpha*K;n.fillStyle="#"+("00000"+(s|0).toString(16)).substr(-6);n.fill()}if(Q.lineWidth){n.globalAlpha=Q.lineAlpha*K;n.strokeStyle="#"+("00000"+(l|0).toString(16)).substr(-6);n.stroke()}}else{if(Q.type===e.SHAPES.RECT){if(Q.fillColor||Q.fillColor===0){n.globalAlpha=Q.fillAlpha*K;n.fillStyle="#"+("00000"+(s|0).toString(16)).substr(-6);n.fillRect(m.x,m.y,m.width,m.height)}if(Q.lineWidth){n.globalAlpha=Q.lineAlpha*K;n.strokeStyle="#"+("00000"+(l|0).toString(16)).substr(-6);n.strokeRect(m.x,m.y,m.width,m.height)}}else{if(Q.type===e.SHAPES.CIRC){n.beginPath();n.arc(m.x,m.y,m.radius,0,2*Math.PI);n.closePath();if(Q.fill){n.globalAlpha=Q.fillAlpha*K;n.fillStyle="#"+("00000"+(s|0).toString(16)).substr(-6);n.fill()}if(Q.lineWidth){n.globalAlpha=Q.lineAlpha*K;n.strokeStyle="#"+("00000"+(l|0).toString(16)).substr(-6);n.stroke()}}else{if(Q.type===e.SHAPES.ELIP){var A=m.width*2;var N=m.height*2;var z=m.x-A/2;var v=m.y-N/2;n.beginPath();var B=0.5522848,r=(A/2)*B,p=(N/2)*B,I=z+A,k=v+N,E=z+A/2,P=v+N/2;n.moveTo(z,P);n.bezierCurveTo(z,P-p,E-r,v,E,v);n.bezierCurveTo(E+r,v,I,P-p,I,P);n.bezierCurveTo(I,P+p,E+r,k,E,k);n.bezierCurveTo(E-r,k,z,P+p,z,P);n.closePath();if(Q.fill){n.globalAlpha=Q.fillAlpha*K;n.fillStyle="#"+("00000"+(s|0).toString(16)).substr(-6);n.fill()}if(Q.lineWidth){n.globalAlpha=Q.lineAlpha*K;n.strokeStyle="#"+("00000"+(l|0).toString(16)).substr(-6);n.stroke()}}else{if(Q.type===e.SHAPES.RREC){var t=m.x;var q=m.y;var G=m.width;var F=m.height;var o=m.radius;var u=Math.min(G,F)/2|0;o=o>u?u:o;n.beginPath();n.moveTo(t,q+o);n.lineTo(t,q+F-o);n.quadraticCurveTo(t,q+F,t+o,q+F);n.lineTo(t+G-o,q+F);n.quadraticCurveTo(t+G,q+F,t+G,q+F-o);n.lineTo(t+G,q+o);n.quadraticCurveTo(t+G,q,t+G-o,q);n.lineTo(t+o,q);n.quadraticCurveTo(t,q,t,q+o);n.closePath();if(Q.fillColor||Q.fillColor===0){n.globalAlpha=Q.fillAlpha*K;n.fillStyle="#"+("00000"+(s|0).toString(16)).substr(-6);n.fill()}if(Q.lineWidth){n.globalAlpha=Q.lineAlpha*K;n.strokeStyle="#"+("00000"+(l|0).toString(16)).substr(-6);n.stroke()}}}}}}}};i.prototype.updateGraphicsTint=function(m){m._prevTint=m.tint;var l=(m.tint>>16&255)/255;var k=(m.tint>>8&255)/255;var p=(m.tint&255)/255;for(var n=0;n<m.graphicsData.length;n++){var o=m.graphicsData[n];var r=o.fillColor|0;var q=o.lineColor|0;o._fillTint=(((r>>16&255)/255*l*255<<16)+((r>>8&255)/255*k*255<<8)+(r&255)/255*p*255);o._lineTint=(((q>>16&255)/255*l*255<<16)+((q>>8&255)/255*k*255<<8)+(q&255)/255*p*255)}};i.prototype.renderPolygon=function(m,n,l){l.moveTo(m[0],m[1]);for(var k=1;k<m.length/2;k++){l.lineTo(m[k*2],m[k*2+1])}if(n){l.closePath()}};i.prototype.destroy=function(){this.renderer=null}},{"../../const":41,"../../renderers/canvas/CanvasRenderer":72}],51:[function(f,h,e){var g=function(z,v,y,u,x,q,A,w,B){B=B||[];var o=20,l,m,k,t,s;B.push(z,v);var p=0;for(var r=1;r<=o;++r){p=r/o;l=(1-p);m=l*l;k=m*l;t=p*p;s=t*p;B.push(k*z+3*m*p*y+3*l*t*x+s*A,k*v+3*m*p*u+3*l*t*q+s*w)}return B};h.exports=g},{}],52:[function(j,g,k){var p=j("../../utils"),r=j("../../const"),q=j("../../renderers/webgl/utils/ObjectRenderer"),n=j("../../renderers/webgl/WebGLRenderer"),f=j("./WebGLGraphicsData"),m=j("./shaders/PrimitiveShader"),i=j("./utils/buildPoly"),h=j("./utils/buildRectangle"),e=j("./utils/buildRoundedRectangle"),o=j("./utils/buildCircle");function l(s){q.call(this,s);this.graphicsDataPool=[];this.primitiveShader=null;this.gl=s.gl;this.CONTEXT_UID=0}l.prototype=Object.create(q.prototype);l.prototype.constructor=l;g.exports=l;n.registerPlugin("graphics",l);l.prototype.onContextChange=function(){this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;this.primitiveShader=new m(this.gl)};l.prototype.destroy=function(){q.prototype.destroy.call(this);for(var s=0;s<this.graphicsDataPool.length;++s){this.graphicsDataPool[s].destroy()}this.graphicsDataPool=null};l.prototype.render=function(A){var z=this.renderer;var v=z.gl;var w;if(A.dirty||!A._webGL[this.CONTEXT_UID]){this.updateGraphics(A)}var y=A._webGL[this.CONTEXT_UID];var x=this.primitiveShader;z.bindShader(x);z.state.setBlendMode(A.blendMode);for(var u=0,s=y.data.length;u<s;u++){w=y.data[u];var t=w.shader;z.bindShader(t);t.uniforms.translationMatrix=A.transform.worldTransform.toArray(true);t.uniforms.tint=p.hex2rgb(A.tint);t.uniforms.alpha=A.worldAlpha;w.vao.bind().draw(v.TRIANGLE_STRIP,w.indices.length).unbind()}};l.prototype.updateGraphics=function(s){var x=this.renderer.gl;var v=s._webGL[this.CONTEXT_UID];if(!v){v=s._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:x}}s.dirty=false;var t;if(s.clearDirty){s.clearDirty=false;for(t=0;t<v.data.length;t++){var y=v.data[t];this.graphicsDataPool.push(y)}v.data=[];v.lastIndex=0}var w;for(t=v.lastIndex;t<s.graphicsData.length;t++){var u=s.graphicsData[t];w=this.getWebGLData(v,0);if(u.type===r.SHAPES.POLY){i(u,w)}if(u.type===r.SHAPES.RECT){h(u,w)}else{if(u.type===r.SHAPES.CIRC||u.type===r.SHAPES.ELIP){o(u,w)}else{if(u.type===r.SHAPES.RREC){e(u,w)}}}v.lastIndex++}for(t=0;t<v.data.length;t++){w=v.data[t];if(w.dirty){w.upload()}}};l.prototype.getWebGLData=function(t,s){var u=t.data[t.data.length-1];if(!u||u.points.length>320000){u=this.graphicsDataPool.pop()||new f(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState);u.reset(s);t.data.push(u)}u.dirty=true;return u}},{"../../const":41,"../../renderers/webgl/WebGLRenderer":79,"../../renderers/webgl/utils/ObjectRenderer":89,"../../utils":114,"./WebGLGraphicsData":53,"./shaders/PrimitiveShader":54,"./utils/buildCircle":55,"./utils/buildPoly":57,"./utils/buildRectangle":58,"./utils/buildRoundedRectangle":59}],53:[function(g,h,f){var i=g("pixi-gl-core");function e(l,k,j){this.gl=l;this.color=[0,0,0];this.points=[];this.indices=[];this.buffer=i.GLBuffer.createVertexBuffer(l);this.indexBuffer=i.GLBuffer.createIndexBuffer(l);this.dirty=true;this.glPoints=null;this.glIndices=null;this.shader=k;this.vao=new i.VertexArrayObject(l,j).addIndex(this.indexBuffer).addAttribute(this.buffer,k.attributes.aVertexPosition,l.FLOAT,false,4*6,0).addAttribute(this.buffer,k.attributes.aColor,l.FLOAT,false,4*6,2*4)}e.prototype.constructor=e;h.exports=e;e.prototype.reset=function(){this.points.length=0;this.indices.length=0};e.prototype.upload=function(){this.glPoints=new Float32Array(this.points);this.buffer.upload(this.glPoints);this.glIndices=new Uint16Array(this.indices);this.indexBuffer.upload(this.glIndices);this.dirty=false};e.prototype.destroy=function(){this.color=null;this.points=null;this.indices=null;this.vao.destroy();this.buffer.destroy();this.indexBuffer.destroy();this.gl=null;this.buffer=null;this.indexBuffer=null;this.glPoints=null;this.glIndices=null}},{"pixi-gl-core":20}],54:[function(g,h,f){var i=g("../../../Shader");function e(j){i.call(this,j,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"))}e.prototype=Object.create(i.prototype);e.prototype.constructor=e;h.exports=e},{"../../../Shader":40}],55:[function(i,j,g){var k=i("./buildLine"),e=i("../../../const"),f=i("../../../utils");var h=function(s,G){var C=s.shape;var q=C.x;var p=C.y;var w;var v;if(s.type===e.SHAPES.CIRC){w=C.radius;v=C.radius}else{w=C.width;v=C.height}var t=Math.floor(30*Math.sqrt(C.radius))||Math.floor(15*Math.sqrt(C.width+C.height));var D=(Math.PI*2)/t;var A=0;if(s.fill){var z=f.hex2rgb(s.fillColor);var m=s.fillAlpha;var u=z[0]*m;var B=z[1]*m;var E=z[2]*m;var F=G.points;var n=G.indices;var l=F.length/6;n.push(l);for(A=0;A<t+1;A++){F.push(q,p,u,B,E,m);F.push(q+Math.sin(D*A)*w,p+Math.cos(D*A)*v,u,B,E,m);n.push(l++,l++)}n.push(l-1)}if(s.lineWidth){var o=s.points;s.points=[];for(A=0;A<t+1;A++){s.points.push(q+Math.sin(D*A)*w,p+Math.cos(D*A)*v)}k(s,G);s.points=o}};j.exports=h},{"../../../const":41,"../../../utils":114,"./buildLine":56}],56:[function(g,h,f){var i=g("../../../math"),e=g("../../../utils");var j=function(Y,I){var U=0;var L=Y.points;if(L.length===0){return}var z=new i.Point(L[0],L[1]);var s=new i.Point(L[L.length-2],L[L.length-1]);if(z.x===s.x&&z.y===s.y){L=L.slice();L.pop();L.pop();s=new i.Point(L[L.length-2],L[L.length-1]);var B=s.x+(z.x-s.x)*0.5;var y=s.y+(z.y-s.y)*0.5;L.unshift(B,y);L.push(B,y)}var V=I.points;var p=I.indices;var A=L.length/2;var x=L.length;var X=V.length/6;var k=Y.lineWidth/2;var K=e.hex2rgb(Y.lineColor);var T=Y.lineAlpha;var Q=K[0]*T;var W=K[1]*T;var Z=K[2]*T;var w,v,N,M,F,E,o,n;var P,O,D,C,m,l;var S,J,u,R,H,t;var aa,G,q;N=L[0];M=L[1];F=L[2];E=L[3];P=-(M-E);O=N-F;q=Math.sqrt(P*P+O*O);P/=q;O/=q;P*=k;O*=k;V.push(N-P,M-O,Q,W,Z,T);V.push(N+P,M+O,Q,W,Z,T);for(U=1;U<A-1;U++){N=L[(U-1)*2];M=L[(U-1)*2+1];F=L[(U)*2];E=L[(U)*2+1];o=L[(U+1)*2];n=L[(U+1)*2+1];P=-(M-E);O=N-F;q=Math.sqrt(P*P+O*O);P/=q;O/=q;P*=k;O*=k;D=-(E-n);C=F-o;q=Math.sqrt(D*D+C*C);D/=q;C/=q;D*=k;C*=k;S=(-O+M)-(-O+E);J=(-P+F)-(-P+N);u=(-P+N)*(-O+E)-(-P+F)*(-O+M);R=(-C+n)-(-C+E);H=(-D+F)-(-D+o);t=(-D+o)*(-C+E)-(-D+F)*(-C+n);aa=S*H-R*J;if(Math.abs(aa)<0.1){aa+=10.1;V.push(F-P,E-O,Q,W,Z,T);V.push(F+P,E+O,Q,W,Z,T);continue}w=(J*t-H*u)/aa;v=(R*u-S*t)/aa;G=(w-F)*(w-F)+(v-E)*(v-E);if(G>140*140){m=P-D;l=O-C;q=Math.sqrt(m*m+l*l);m/=q;l/=q;m*=k;l*=k;V.push(F-m,E-l);V.push(Q,W,Z,T);V.push(F+m,E+l);V.push(Q,W,Z,T);V.push(F-m,E-l);V.push(Q,W,Z,T);x++}else{V.push(w,v);V.push(Q,W,Z,T);V.push(F-(w-F),E-(v-E));V.push(Q,W,Z,T)}}N=L[(A-2)*2];M=L[(A-2)*2+1];F=L[(A-1)*2];E=L[(A-1)*2+1];P=-(M-E);O=N-F;q=Math.sqrt(P*P+O*O);P/=q;O/=q;P*=k;O*=k;V.push(F-P,E-O);V.push(Q,W,Z,T);V.push(F+P,E+O);V.push(Q,W,Z,T);p.push(X);for(U=0;U<x;U++){p.push(X++)}p.push(X-1)};h.exports=j},{"../../../math":65,"../../../utils":114}],57:[function(h,i,g){var k=h("./buildLine"),e=h("../../../utils"),j=h("earcut");var f=function(B,u){B.points=B.shape.points.slice();var z=B.points;if(B.fill&&z.length>6){var C=[];var s=B.holes;for(var t=0;t<s.length;t++){var m=s[t];C.push(z.length/2);z=z.concat(m.points)}var y=u.points;var A=u.indices;var n=z.length/2;var q=e.hex2rgb(B.fillColor);var p=B.fillAlpha;var l=q[0]*p;var v=q[1]*p;var x=q[2]*p;var o=j(z,C,2);if(!o){return}var w=y.length/6;for(t=0;t<o.length;t+=3){A.push(o[t]+w);A.push(o[t]+w);A.push(o[t+1]+w);A.push(o[t+2]+w);A.push(o[t+2]+w)}for(t=0;t<n;t++){y.push(z[t*2],z[t*2+1],l,v,x,p)}}if(B.lineWidth>0){k(B,u)}};i.exports=f},{"../../../utils":114,"./buildLine":56,earcut:10}],58:[function(h,i,g){var j=h("./buildLine"),e=h("../../../utils");var f=function(C,p){var n=C.shape;var w=n.x;var v=n.y;var l=n.width;var B=n.height;if(C.fill){var o=e.hex2rgb(C.fillColor);var m=C.fillAlpha;var k=o[0]*m;var q=o[1]*m;var u=o[2]*m;var z=p.points;var A=p.indices;var t=z.length/6;z.push(w,v);z.push(k,q,u,m);z.push(w+l,v);z.push(k,q,u,m);z.push(w,v+B);z.push(k,q,u,m);z.push(w+l,v+B);z.push(k,q,u,m);A.push(t,t,t+1,t+2,t+3,t+3)}if(C.lineWidth){var s=C.points;C.points=[w,v,w+l,v,w+l,v+B,w,v+B,w,v];j(C,p);C.points=s}};i.exports=f},{"../../../utils":114,"./buildLine":56}],59:[function(h,i,g){var j=h("earcut"),k=h("./buildLine"),f=h("../../../utils");var e=function(v,I){var m=v.shape;var u=m.x;var t=m.y;var B=m.width;var A=m.height;var o=m.radius;var w=[];w.push(u,t+o);l(u,t+A-o,u,t+A,u+o,t+A,w);l(u+B-o,t+A,u+B,t+A,u+B,t+A-o,w);l(u+B,t+o,u+B,t,u+B-o,t,w);l(u+o,t,u,t,u,t+o+1e-10,w);if(v.fill){var D=f.hex2rgb(v.fillColor);var p=v.fillAlpha;var z=D[0]*p;var F=D[1]*p;var G=D[2]*p;var H=I.points;var q=I.indices;var n=H.length/6;var C=j(w,null,2);var E=0;for(E=0;E<C.length;E+=3){q.push(C[E]+n);q.push(C[E]+n);q.push(C[E+1]+n);q.push(C[E+2]+n);q.push(C[E+2]+n)}for(E=0;E<w.length;E++){H.push(w[E],w[++E],z,F,G,p)}}if(v.lineWidth){var s=v.points;v.points=w;k(v,I);v.points=s}};var l=function(w,u,m,G,p,o,E){var F,r,C,q,t,s,z=20,D=E||[];function v(y,x,n){var H=x-y;return y+(H*n)}var A=0;for(var B=0;B<=z;B++){A=B/z;F=v(w,m,A);r=v(u,G,A);C=v(m,p,A);q=v(G,o,A);t=v(F,C,A);s=v(r,q,A);D.push(t,s)}return D};i.exports=e},{"../../../utils":114,"./buildLine":56,earcut:10}],60:[function(g,h,f){var e=h.exports=Object.assign(g("./const"),g("./math"),{utils:g("./utils"),ticker:g("./ticker"),DisplayObject:g("./display/DisplayObject"),Container:g("./display/Container"),Transform:g("./display/Transform"),TransformStatic:g("./display/TransformStatic"),TransformBase:g("./display/TransformBase"),Sprite:g("./sprites/Sprite"),CanvasSpriteRender:g("./sprites/canvas/CanvasSpriteRenderer"),CanvasTinter:g("./sprites/canvas/CanvasTinter"),SpriteRenderer:g("./sprites/webgl/SpriteRenderer"),Text:g("./text/Text"),TextStyle:g("./text/TextStyle"),Graphics:g("./graphics/Graphics"),GraphicsData:g("./graphics/GraphicsData"),GraphicsRenderer:g("./graphics/webgl/GraphicsRenderer"),CanvasGraphicsRenderer:g("./graphics/canvas/CanvasGraphicsRenderer"),Texture:g("./textures/Texture"),BaseTexture:g("./textures/BaseTexture"),RenderTexture:g("./textures/RenderTexture"),BaseRenderTexture:g("./textures/BaseRenderTexture"),VideoBaseTexture:g("./textures/VideoBaseTexture"),TextureUvs:g("./textures/TextureUvs"),CanvasRenderer:g("./renderers/canvas/CanvasRenderer"),CanvasRenderTarget:g("./renderers/canvas/utils/CanvasRenderTarget"),Shader:g("./Shader"),WebGLRenderer:g("./renderers/webgl/WebGLRenderer"),WebGLManager:g("./renderers/webgl/managers/WebGLManager"),ObjectRenderer:g("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:g("./renderers/webgl/utils/RenderTarget"),Quad:g("./renderers/webgl/utils/Quad"),SpriteMaskFilter:g("./renderers/webgl/filters/spriteMask/SpriteMaskFilter"),Filter:g("./renderers/webgl/filters/Filter"),glCore:g("pixi-gl-core"),autoDetectRenderer:function(l,i,j,k){l=l||800;i=i||600;if(!k&&e.utils.isWebGLSupported()){return new e.WebGLRenderer(l,i,j)}return new e.CanvasRenderer(l,i,j)}})},{"./Shader":40,"./const":41,"./display/Container":43,"./display/DisplayObject":44,"./display/Transform":45,"./display/TransformBase":46,"./display/TransformStatic":47,"./graphics/Graphics":48,"./graphics/GraphicsData":49,"./graphics/canvas/CanvasGraphicsRenderer":50,"./graphics/webgl/GraphicsRenderer":52,"./math":65,"./renderers/canvas/CanvasRenderer":72,"./renderers/canvas/utils/CanvasRenderTarget":74,"./renderers/webgl/WebGLRenderer":79,"./renderers/webgl/filters/Filter":81,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":84,"./renderers/webgl/managers/WebGLManager":88,"./renderers/webgl/utils/ObjectRenderer":89,"./renderers/webgl/utils/Quad":90,"./renderers/webgl/utils/RenderTarget":91,"./sprites/Sprite":96,"./sprites/canvas/CanvasSpriteRenderer":97,"./sprites/canvas/CanvasTinter":98,"./sprites/webgl/SpriteRenderer":100,"./text/Text":102,"./text/TextStyle":103,"./textures/BaseRenderTexture":104,"./textures/BaseTexture":105,"./textures/RenderTexture":106,"./textures/Texture":107,"./textures/TextureUvs":108,"./textures/VideoBaseTexture":109,"./ticker":111,"./utils":114,"pixi-gl-core":20}],61:[function(i,h,k){var g=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1];var f=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1];var o=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1];var m=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1];var q=[];var e=i("./Matrix");var j=[];function n(r){if(r<0){return -1}if(r>0){return 1}return 0}function p(){for(var v=0;v<16;v++){var z=[];j.push(z);for(var u=0;u<16;u++){var x=n(g[v]*g[u]+o[v]*f[u]);var w=n(f[v]*g[u]+m[v]*f[u]);var t=n(g[v]*o[u]+o[v]*m[u]);var r=n(f[v]*o[u]+m[v]*m[u]);for(var s=0;s<16;s++){if(g[s]===x&&f[s]===w&&o[s]===t&&m[s]===r){z.push(s);break}}}}for(v=0;v<16;v++){var y=new e();y.set(g[v],f[v],o[v],m[v],0,0);q.push(y)}}p();var l={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(r){return g[r]},uY:function(r){return f[r]},vX:function(r){return o[r]},vY:function(r){return m[r]},inv:function(r){if(r&8){return r&15}return(-r)&7},add:function(r,s){return j[r][s]},sub:function(r,s){return j[r][l.inv(s)]},rotate180:function(r){return r^4},isSwapWidthHeight:function(r){return(r&3)===2},byDirection:function(s,r){if(Math.abs(s)*2<=Math.abs(r)){if(r>=0){return l.S}else{return l.N}}else{if(Math.abs(r)*2<=Math.abs(s)){if(s>0){return l.E}else{return l.W}}else{if(r>0){if(s>0){return l.SE}else{return l.SW}}else{if(s>0){return l.NE}else{return l.NW}}}}},matrixAppendRotationInv:function(t,v,s,r){var u=q[l.inv(v)];s=s||0;r=r||0;u.tx=s;u.ty=r;t.append(u)}};h.exports=l},{"./Matrix":62}],62:[function(g,h,f){var i=g("./Point");function e(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0;this.array=null}e.prototype.constructor=e;h.exports=e;e.prototype.fromArray=function(j){this.a=j[0];this.b=j[1];this.c=j[3];this.d=j[4];this.tx=j[2];this.ty=j[5]};e.prototype.set=function(m,k,o,n,l,j){this.a=m;this.b=k;this.c=o;this.d=n;this.tx=l;this.ty=j;return this};e.prototype.toArray=function(k,j){if(!this.array){this.array=new Float32Array(9)}var l=j||this.array;if(k){l[0]=this.a;l[1]=this.b;l[2]=0;l[3]=this.c;l[4]=this.d;l[5]=0;l[6]=this.tx;l[7]=this.ty;l[8]=1}else{l[0]=this.a;l[1]=this.c;l[2]=this.tx;l[3]=this.b;l[4]=this.d;l[5]=this.ty;l[6]=0;l[7]=0;l[8]=1}return l};e.prototype.apply=function(m,k){k=k||new i();var j=m.x;var l=m.y;k.x=this.a*j+this.c*l+this.tx;k.y=this.b*j+this.d*l+this.ty;return k};e.prototype.applyInverse=function(n,k){k=k||new i();var m=1/(this.a*this.d+this.c*-this.b);var j=n.x;var l=n.y;k.x=this.d*m*j+-this.c*m*l+(this.ty*this.c-this.tx*this.d)*m;k.y=this.a*m*l+-this.b*m*j+(-this.ty*this.a+this.tx*this.b)*m;return k};e.prototype.translate=function(j,k){this.tx+=j;this.ty+=k;return this};e.prototype.scale=function(j,k){this.a*=j;this.d*=k;this.c*=j;this.b*=k;this.tx*=j;this.ty*=k;return this};e.prototype.rotate=function(o){var n=Math.cos(o);var l=Math.sin(o);var k=this.a;var m=this.c;var j=this.tx;this.a=k*n-this.b*l;this.b=k*l+this.b*n;this.c=m*n-this.d*l;this.d=m*l+this.d*n;this.tx=j*n-this.ty*l;this.ty=j*l+this.ty*n;return this};e.prototype.append=function(k){var j=this.a;var l=this.b;var m=this.c;var n=this.d;this.a=k.a*j+k.b*m;this.b=k.a*l+k.b*n;this.c=k.c*j+k.d*m;this.d=k.c*l+k.d*n;this.tx=k.tx*j+k.ty*m+this.tx;this.ty=k.tx*l+k.ty*n+this.ty;return this};e.prototype.setTransform=function(s,q,k,j,B,z,u,p,o){var D,C,A,w,v,n,l,t,r,m;v=Math.sin(u);n=Math.cos(u);l=Math.cos(o);t=Math.sin(o);r=-Math.sin(p);m=Math.cos(p);D=n*B;C=v*B;A=-v*z;w=n*z;this.a=l*D+t*A;this.b=l*C+t*w;this.c=r*D+m*A;this.d=r*C+m*w;this.tx=s+(k*D+j*A);this.ty=q+(k*C+j*w);return this};e.prototype.prepend=function(l){var k=this.tx;if(l.a!==1||l.b!==0||l.c!==0||l.d!==1){var j=this.a;var m=this.c;this.a=j*l.a+this.b*l.c;this.b=j*l.b+this.b*l.d;this.c=m*l.a+this.d*l.c;this.d=m*l.b+this.d*l.d}this.tx=k*l.a+this.ty*l.c+l.tx;this.ty=k*l.b+this.ty*l.d+l.ty;return this};e.prototype.decompose=function(m){var k=this.a,j=this.b,q=this.c,o=this.d;var n=Math.atan2(-q,o);var l=Math.atan2(j,k);var p=Math.abs(1-n/l);if(p<0.00001){m.rotation=l;if(k<0&&o>=0){m.rotation+=(m.rotation<=0)?Math.PI:-Math.PI}m.skew.x=m.skew.y=0}else{m.skew.x=n;m.skew.y=l}m.scale.x=Math.sqrt(k*k+j*j);m.scale.y=Math.sqrt(q*q+o*o);m.position.x=this.tx;m.position.y=this.ty;return m};e.prototype.invert=function(){var k=this.a;var l=this.b;var m=this.c;var o=this.d;var j=this.tx;var p=k*o-l*m;this.a=o/p;this.b=-l/p;this.c=-m/p;this.d=k/p;this.tx=(m*this.ty-o*j)/p;this.ty=-(k*this.ty-l*j)/p;return this};e.prototype.identity=function(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0;return this};e.prototype.clone=function(){var j=new e();j.a=this.a;j.b=this.b;j.c=this.c;j.d=this.d;j.tx=this.tx;j.ty=this.ty;return j};e.prototype.copy=function(j){j.a=this.a;j.b=this.b;j.c=this.c;j.d=this.d;j.tx=this.tx;j.ty=this.ty;return j};e.IDENTITY=new e();e.TEMP_MATRIX=new e()},{"./Point":64}],63:[function(g,h,e){function f(j,k,i,l){this._x=i||0;this._y=l||0;this.cb=j;this.scope=k}f.prototype.constructor=f;h.exports=f;Object.defineProperties(f.prototype,{x:{get:function(){return this._x},set:function(i){if(this._x!==i){this._x=i;this.cb.call(this.scope)}}},y:{get:function(){return this._y},set:function(i){if(this._y!==i){this._y=i;this.cb.call(this.scope)}}}});f.prototype.set=function(i,l){var k=i||0;var j=l||((l!==0)?k:0);if(this._x!==k||this._y!==j){this._x=k;this._y=j;this.cb.call(this.scope)}};f.prototype.copy=function(i){if(this._x!==i.x||this._y!==i.y){this._x=i.x;this._y=i.y;this.cb.call(this.scope)}}},{}],64:[function(f,g,e){function h(i,j){this.x=i||0;this.y=j||0}h.prototype.constructor=h;g.exports=h;h.prototype.clone=function(){return new h(this.x,this.y)};h.prototype.copy=function(i){this.set(i.x,i.y)};h.prototype.equals=function(i){return(i.x===this.x)&&(i.y===this.y)};h.prototype.set=function(i,j){this.x=i||0;this.y=j||((j!==0)?this.x:0)}},{}],65:[function(f,g,e){g.exports={Point:f("./Point"),ObservablePoint:f("./ObservablePoint"),Matrix:f("./Matrix"),GroupD8:f("./GroupD8"),Circle:f("./shapes/Circle"),Ellipse:f("./shapes/Ellipse"),Polygon:f("./shapes/Polygon"),Rectangle:f("./shapes/Rectangle"),RoundedRectangle:f("./shapes/RoundedRectangle")}},{"./GroupD8":61,"./Matrix":62,"./ObservablePoint":63,"./Point":64,"./shapes/Circle":66,"./shapes/Ellipse":67,"./shapes/Polygon":68,"./shapes/Rectangle":69,"./shapes/RoundedRectangle":70}],66:[function(g,i,f){var h=g("./Rectangle"),e=g("../../const");function j(l,m,k){this.x=l||0;this.y=m||0;this.radius=k||0;this.type=e.SHAPES.CIRC}j.prototype.constructor=j;i.exports=j;j.prototype.clone=function(){return new j(this.x,this.y,this.radius)};j.prototype.contains=function(k,o){if(this.radius<=0){return false}var n=(this.x-k),m=(this.y-o),l=this.radius*this.radius;n*=n;m*=m;return(n+m<=l)};j.prototype.getBounds=function(){return new h(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}},{"../../const":41,"./Rectangle":69}],67:[function(g,j,f){var i=g("./Rectangle"),e=g("../../const");function h(l,n,m,k){this.x=l||0;this.y=n||0;this.width=m||0;this.height=k||0;this.type=e.SHAPES.ELIP}h.prototype.constructor=h;j.exports=h;h.prototype.clone=function(){return new h(this.x,this.y,this.width,this.height)};h.prototype.contains=function(l,n){if(this.width<=0||this.height<=0){return false}var m=((l-this.x)/this.width),k=((n-this.y)/this.height);m*=m;k*=k;return(m+k<=1)};h.prototype.getBounds=function(){return new i(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":41,"./Rectangle":69}],68:[function(h,i,g){var j=h("../Point"),e=h("../../const");function f(l){var o=l;if(!Array.isArray(o)){o=new Array(arguments.length);for(var k=0;k<o.length;++k){o[k]=arguments[k]}}if(o[0] instanceof j){var q=[];for(var n=0,m=o.length;n<m;n++){q.push(o[n].x,o[n].y)}o=q}this.closed=true;this.points=o;this.type=e.SHAPES.POLY}f.prototype.constructor=f;i.exports=f;f.prototype.clone=function(){return new f(this.points.slice())};f.prototype.close=function(){var k=this.points;if(k[0]!==k[k.length-2]||k[1]!==k[k.length-1]){k.push(k[0],k[1])}};f.prototype.contains=function(u,t){var n=false;var k=this.points.length/2;for(var q=0,p=k-1;q<k;p=q++){var s=this.points[q*2],o=this.points[q*2+1],r=this.points[p*2],m=this.points[p*2+1],l=((o>t)!==(m>t))&&(u<(r-s)*(t-o)/(m-o)+s);if(l){n=!n}}return n}},{"../../const":41,"../Point":64}],69:[function(g,i,f){var e=g("../../const");function h(k,m,l,j){this.x=k||0;this.y=m||0;this.width=l||0;this.height=j||0;this.type=e.SHAPES.RECT}h.prototype.constructor=h;i.exports=h;h.EMPTY=new h(0,0,0,0);h.prototype.clone=function(){return new h(this.x,this.y,this.width,this.height)};h.prototype.copy=function(j){this.x=j.x;this.y=j.y;this.width=j.width;this.height=j.height;return this};h.prototype.contains=function(j,k){if(this.width<=0||this.height<=0){return false}if(j>=this.x&&j<this.x+this.width){if(k>=this.y&&k<this.y+this.height){return true}}return false};h.prototype.pad=function(k,j){k=k||0;j=j||((j!==0)?k:0);this.x-=k;this.y-=j;this.width+=k*2;this.height+=j*2};h.prototype.fit=function(j){if(this.x<j.x){this.width+=this.x;if(this.width<0){this.width=0}this.x=j.x}if(this.y<j.y){this.height+=this.y;if(this.height<0){this.height=0}this.y=j.y}if(this.x+this.width>j.x+j.width){this.width=j.width-this.x;if(this.width<0){this.width=0}}if(this.y+this.height>j.y+j.height){this.height=j.height-this.y;if(this.height<0){this.height=0}}};h.prototype.enlarge=function(n){if(n===h.EMPTY){return}var k=Math.min(this.x,n.x);var j=Math.max(this.x+this.width,n.x+n.width);var m=Math.min(this.y,n.y);var l=Math.max(this.y+this.height,n.y+n.height);this.x=k;this.width=j-k;this.y=m;this.height=l-m}},{"../../const":41}],70:[function(g,h,f){var e=g("../../const");function i(l,n,m,k,j){this.x=l||0;this.y=n||0;this.width=m||0;this.height=k||0;this.radius=j||20;this.type=e.SHAPES.RREC}i.prototype.constructor=i;h.exports=i;i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.radius)};i.prototype.contains=function(j,k){if(this.width<=0||this.height<=0){return false}if(j>=this.x&&j<=this.x+this.width){if(k>=this.y&&k<=this.y+this.height){return true}}return false}},{"../../const":41}],71:[function(f,e,h){var l=f("../utils"),k=f("../math"),o=f("../const"),g=f("../display/Container"),i=f("../textures/RenderTexture"),n=f("eventemitter3"),j=new k.Matrix();function m(t,s,p,q){n.call(this);l.sayHello(t);if(q){for(var r in o.DEFAULT_RENDER_OPTIONS){if(typeof q[r]==="undefined"){q[r]=o.DEFAULT_RENDER_OPTIONS[r]}}}else{q=o.DEFAULT_RENDER_OPTIONS}this.type=o.RENDERER_TYPE.UNKNOWN;this.width=s||800;this.height=p||600;this.view=q.view||document.createElement("canvas");this.resolution=q.resolution;this.transparent=q.transparent;this.autoResize=q.autoResize||false;this.blendModes=null;this.preserveDrawingBuffer=q.preserveDrawingBuffer;this.clearBeforeRender=q.clearBeforeRender;this.roundPixels=q.roundPixels;this._backgroundColor=0;this._backgroundColorRgba=[0,0,0,0];this._backgroundColorString="#000000";this.backgroundColor=q.backgroundColor||this._backgroundColor;this._tempDisplayObjectParent=new g();this._lastObjectRendered=this._tempDisplayObjectParent}m.prototype=Object.create(n.prototype);m.prototype.constructor=m;e.exports=m;Object.defineProperties(m.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(p){this._backgroundColor=p;this._backgroundColorString=l.hex2string(p);l.hex2rgb(p,this._backgroundColorRgba)}}});m.prototype.resize=function(q,p){this.width=q*this.resolution;this.height=p*this.resolution;this.view.width=this.width;this.view.height=this.height;if(this.autoResize){this.view.style.width=this.width/this.resolution+"px";this.view.style.height=this.height/this.resolution+"px"}};m.prototype.generateTexture=function(t,r,q){var s=t.getLocalBounds();var p=i.create(s.width|0,s.height|0,r,q);j.tx=-s.x;j.ty=-s.y;this.render(t,p,false,j,true);return p};m.prototype.destroy=function(p){if(p&&this.view.parentNode){this.view.parentNode.removeChild(this.view)}this.type=o.RENDERER_TYPE.UNKNOWN;this.width=0;this.height=0;this.view=null;this.resolution=0;this.transparent=false;this.autoResize=false;this.blendModes=null;this.preserveDrawingBuffer=false;this.clearBeforeRender=false;this.roundPixels=false;this._backgroundColor=0;this._backgroundColorRgba=null;this._backgroundColorString=null;this.backgroundColor=0;this._tempDisplayObjectParent=null;this._lastObjectRendered=null}},{"../const":41,"../display/Container":43,"../math":65,"../textures/RenderTexture":106,"../utils":114,eventemitter3:11}],72:[function(g,f,h){var m=g("../SystemRenderer"),e=g("./utils/CanvasMaskManager"),i=g("./utils/CanvasRenderTarget"),k=g("./utils/mapCanvasBlendModesToPixi"),l=g("../../utils"),n=g("../../const");function j(q,o,p){p=p||{};m.call(this,"Canvas",q,o,p);this.type=n.RENDERER_TYPE.CANVAS;this.rootContext=this.view.getContext("2d",{alpha:this.transparent});this.rootResolution=this.resolution;this.refresh=true;this.maskManager=new e(this);this.smoothProperty="imageSmoothingEnabled";if(!this.rootContext.imageSmoothingEnabled){if(this.rootContext.webkitImageSmoothingEnabled){this.smoothProperty="webkitImageSmoothingEnabled"}else{if(this.rootContext.mozImageSmoothingEnabled){this.smoothProperty="mozImageSmoothingEnabled"}else{if(this.rootContext.oImageSmoothingEnabled){this.smoothProperty="oImageSmoothingEnabled"}else{if(this.rootContext.msImageSmoothingEnabled){this.smoothProperty="msImageSmoothingEnabled"}}}}}this.initPlugins();this.blendModes=k();this._activeBlendMode=null;this.context=null;this.renderingToScreen=false;this.resize(q,o)}j.prototype=Object.create(m.prototype);j.prototype.constructor=j;f.exports=j;l.pluginTarget.mixin(j);j.prototype.render=function(v,u,t,q,s){if(!this.view){return}this.renderingToScreen=!u;this.emit("prerender");if(u){u=u.baseTexture||u;if(!u._canvasRenderTarget){u._canvasRenderTarget=new i(u.width,u.height,u.resolution);u.source=u._canvasRenderTarget.canvas;u.valid=true}this.context=u._canvasRenderTarget.context;this.resolution=u._canvasRenderTarget.resolution}else{this.context=this.rootContext;this.resolution=this.rootResolution}var p=this.context;if(!u){this._lastObjectRendered=v}if(!s){var w=v.parent;var r=this._tempDisplayObjectParent.transform.worldTransform;if(q){q.copy(r)}else{r.identity()}v.parent=this._tempDisplayObjectParent;v.updateTransform();v.parent=w}p.setTransform(1,0,0,1,0,0);p.globalAlpha=1;p.globalCompositeOperation=this.blendModes[n.BLEND_MODES.NORMAL];if(navigator.isCocoonJS&&this.view.screencanvas){p.fillStyle="black";p.clear()}if(t!==undefined?t:this.clearBeforeRender){if(this.renderingToScreen){if(this.transparent){p.clearRect(0,0,this.width,this.height)}else{p.fillStyle=this._backgroundColorString;p.fillRect(0,0,this.width,this.height)}}}var o=this.context;this.context=p;v.renderCanvas(this);this.context=o;this.emit("postrender")};j.prototype.setBlendMode=function(o){if(this._activeBlendMode===o){return}this.context.globalCompositeOperation=this.blendModes[o]};j.prototype.destroy=function(o){this.destroyPlugins();m.prototype.destroy.call(this,o);this.context=null;this.refresh=true;this.maskManager.destroy();this.maskManager=null;this.smoothProperty=null};j.prototype.resize=function(p,o){m.prototype.resize.call(this,p,o);if(this.smoothProperty){this.rootContext[this.smoothProperty]=(n.SCALE_MODES.DEFAULT===n.SCALE_MODES.LINEAR)}}},{"../../const":41,"../../utils":114,"../SystemRenderer":71,"./utils/CanvasMaskManager":73,"./utils/CanvasRenderTarget":74,"./utils/mapCanvasBlendModesToPixi":76}],73:[function(g,h,f){var e=g("../../../const");function i(j){this.renderer=j}i.prototype.constructor=i;h.exports=i;i.prototype.pushMask=function(n){var m=this.renderer;m.context.save();var j=n.alpha;var l=n.transform.worldTransform;var k=m.resolution;m.context.setTransform(l.a*k,l.b*k,l.c*k,l.d*k,l.tx*k,l.ty*k);if(!n._texture){this.renderGraphicsShape(n);m.context.clip()}n.worldAlpha=j};i.prototype.renderGraphicsShape=function(J){var m=this.renderer.context;var H=J.graphicsData.length;if(H===0){return}m.beginPath();for(var G=0;G<H;G++){var L=J.graphicsData[G];var l=L.shape;if(L.type===e.SHAPES.POLY){var F=l.points;m.moveTo(F[0],F[1]);for(var E=1;E<F.length/2;E++){m.lineTo(F[E*2],F[E*2+1])}if(F[0]===F[F.length-2]&&F[1]===F[F.length-1]){m.closePath()}}else{if(L.type===e.SHAPES.RECT){m.rect(l.x,l.y,l.width,l.height);m.closePath()}else{if(L.type===e.SHAPES.CIRC){m.arc(l.x,l.y,l.radius,0,2*Math.PI);m.closePath()}else{if(L.type===e.SHAPES.ELIP){var v=l.width*2;var I=l.height*2;var u=l.x-v/2;var t=l.y-I/2;var z=0.5522848,q=(v/2)*z,o=(I/2)*z,D=u+v,k=t+I,A=u+v/2,K=t+I/2;m.moveTo(u,K);m.bezierCurveTo(u,K-o,A-q,t,A,t);m.bezierCurveTo(A+q,t,D,K-o,D,K);m.bezierCurveTo(D,K+o,A+q,k,A,k);m.bezierCurveTo(A-q,k,u,K+o,u,K);m.closePath()}else{if(L.type===e.SHAPES.RREC){var r=l.x;var p=l.y;var C=l.width;var B=l.height;var n=l.radius;var s=Math.min(C,B)/2|0;n=n>s?s:n;m.moveTo(r,p+n);m.lineTo(r,p+B-n);m.quadraticCurveTo(r,p+B,r+n,p+B);m.lineTo(r+C-n,p+B);m.quadraticCurveTo(r+C,p+B,r+C,p+B-n);m.lineTo(r+C,p+n);m.quadraticCurveTo(r+C,p,r+C-n,p);m.lineTo(r+n,p);m.quadraticCurveTo(r,p,r,p+n);m.closePath()}}}}}}};i.prototype.popMask=function(j){j.context.restore()};i.prototype.destroy=function(){}},{"../../../const":41}],74:[function(g,h,f){var e=g("../../../const");function i(l,j,k){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resolution=k||e.RESOLUTION;this.resize(l,j)}i.prototype.constructor=i;h.exports=i;Object.defineProperties(i.prototype,{width:{get:function(){return this.canvas.width},set:function(j){this.canvas.width=j}},height:{get:function(){return this.canvas.height},set:function(j){this.canvas.height=j}}});i.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};i.prototype.resize=function(k,j){this.canvas.width=k*this.resolution;this.canvas.height=j*this.resolution};i.prototype.destroy=function(){this.context=null;this.canvas=null}},{"../../../const":41}],75:[function(g,h,e){var f=function(){if(typeof document==="undefined"){return false}var j="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/";var n="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";var i=new Image();i.src=j+"AP804Oa6"+n;var o=new Image();o.src=j+"/wCKxvRF"+n;var k=document.createElement("canvas");k.width=6;k.height=1;var l=k.getContext("2d");l.globalCompositeOperation="multiply";l.drawImage(i,0,0);l.drawImage(o,2,0);var m=l.getImageData(2,0,1,1).data;return(m[0]===255&&m[1]===0&&m[2]===0)};h.exports=f},{}],76:[function(i,j,f){var e=i("../../../const"),h=i("./canUseNewCanvasBlendModes");function g(k){k=k||[];if(h()){k[e.BLEND_MODES.NORMAL]="source-over";k[e.BLEND_MODES.ADD]="lighter";k[e.BLEND_MODES.MULTIPLY]="multiply";k[e.BLEND_MODES.SCREEN]="screen";k[e.BLEND_MODES.OVERLAY]="overlay";k[e.BLEND_MODES.DARKEN]="darken";k[e.BLEND_MODES.LIGHTEN]="lighten";k[e.BLEND_MODES.COLOR_DODGE]="color-dodge";k[e.BLEND_MODES.COLOR_BURN]="color-burn";k[e.BLEND_MODES.HARD_LIGHT]="hard-light";k[e.BLEND_MODES.SOFT_LIGHT]="soft-light";k[e.BLEND_MODES.DIFFERENCE]="difference";k[e.BLEND_MODES.EXCLUSION]="exclusion";k[e.BLEND_MODES.HUE]="hue";k[e.BLEND_MODES.SATURATION]="saturate";k[e.BLEND_MODES.COLOR]="color";k[e.BLEND_MODES.LUMINOSITY]="luminosity"}else{k[e.BLEND_MODES.NORMAL]="source-over";k[e.BLEND_MODES.ADD]="lighter";k[e.BLEND_MODES.MULTIPLY]="source-over";k[e.BLEND_MODES.SCREEN]="source-over";k[e.BLEND_MODES.OVERLAY]="source-over";k[e.BLEND_MODES.DARKEN]="source-over";k[e.BLEND_MODES.LIGHTEN]="source-over";k[e.BLEND_MODES.COLOR_DODGE]="source-over";k[e.BLEND_MODES.COLOR_BURN]="source-over";k[e.BLEND_MODES.HARD_LIGHT]="source-over";k[e.BLEND_MODES.SOFT_LIGHT]="source-over";k[e.BLEND_MODES.DIFFERENCE]="source-over";k[e.BLEND_MODES.EXCLUSION]="source-over";k[e.BLEND_MODES.HUE]="source-over";k[e.BLEND_MODES.SATURATION]="source-over";k[e.BLEND_MODES.COLOR]="source-over";k[e.BLEND_MODES.LUMINOSITY]="source-over"}return k}j.exports=g},{"../../../const":41,"./canUseNewCanvasBlendModes":75}],77:[function(h,i,g){var e=h("../../const");function f(j){this.renderer=j;this.count=0;this.checkCount=0;this.maxIdle=60*60;this.checkCountMax=60*10;this.mode=e.GC_MODES.DEFAULT}f.prototype.constructor=f;i.exports=f;f.prototype.update=function(){this.count++;if(this.mode===e.GC_MODES.MANUAL){return}this.checkCount++;if(this.checkCount>this.checkCountMax){this.checkCount=0;this.run()}};f.prototype.run=function(){var k=this.renderer.textureManager;var n=k._managedTextures;var o=false;var m,l;for(m=0;m<n.length;m++){var p=n[m];if(!p._glRenderTargets&&this.count-p.touched>this.maxIdle){k.destroyTexture(p,true);n[m]=null;o=true}}if(o){l=0;for(m=0;m<n.length;m++){if(n[m]!==null){n[l++]=n[m]}}n.length=l}};f.prototype.unload=function(l){var j=this.renderer.textureManager;if(l._texture){j.destroyTexture(l._texture,true)}for(var k=l.children.length-1;k>=0;k--){this.unload(l.children[k])}}},{"../../const":41}],78:[function(h,j,g){var i=h("pixi-gl-core").GLTexture,e=h("../../const"),l=h("./utils/RenderTarget"),f=h("../../utils");var k=function(m){this.renderer=m;this.gl=m.gl;this._managedTextures=[]};k.prototype.bindTexture=function(){};k.prototype.getTexture=function(){};k.prototype.updateTexture=function(o){o=o.baseTexture||o;var n=!!o._glRenderTargets;if(!o.hasLoaded){return}var m=o._glTextures[this.renderer.CONTEXT_UID];if(!m){if(n){var p=new l(this.gl,o.width,o.height,o.scaleMode,o.resolution);p.resize(o.width,o.height);o._glRenderTargets[this.renderer.CONTEXT_UID]=p;m=p.texture}else{m=new i(this.gl);m.premultiplyAlpha=true;m.upload(o.source)}o._glTextures[this.renderer.CONTEXT_UID]=m;o.on("update",this.updateTexture,this);o.on("dispose",this.destroyTexture,this);this._managedTextures.push(o);if(o.isPowerOfTwo){if(o.mipmap){m.enableMipmap()}if(o.wrapMode===e.WRAP_MODES.CLAMP){m.enableWrapClamp()}else{if(o.wrapMode===e.WRAP_MODES.REPEAT){m.enableWrapRepeat()}else{m.enableWrapMirrorRepeat()}}}else{m.enableWrapClamp()}if(o.scaleMode===e.SCALE_MODES.NEAREST){m.enableNearestScaling()}else{m.enableLinearScaling()}}else{if(n){o._glRenderTargets[this.renderer.CONTEXT_UID].resize(o.width,o.height)}else{m.upload(o.source)}}return m};k.prototype.destroyTexture=function(o,m){o=o.baseTexture||o;if(!o.hasLoaded){return}if(o._glTextures[this.renderer.CONTEXT_UID]){o._glTextures[this.renderer.CONTEXT_UID].destroy();o.off("update",this.updateTexture,this);o.off("dispose",this.destroyTexture,this);delete o._glTextures[this.renderer.CONTEXT_UID];if(!m){var n=this._managedTextures.indexOf(o);if(n!==-1){f.removeItems(this._managedTextures,n,1)}}}};k.prototype.removeAll=function(){for(var m=0;m<this._managedTextures.length;++m){var n=this._managedTextures[m];if(n._glTextures[this.renderer.CONTEXT_UID]){delete n._glTextures[this.renderer.CONTEXT_UID]}}};k.prototype.destroy=function(){for(var m=0;m<this._managedTextures.length;++m){var n=this._managedTextures[m];this.destroyTexture(n,true);n.off("update",this.updateTexture,this);n.off("dispose",this.destroyTexture,this)}this._managedTextures=null};j.exports=k},{"../../const":41,"../../utils":114,"./utils/RenderTarget":91,"pixi-gl-core":20}],79:[function(m,f,x){var w=m("../SystemRenderer"),g=m("./managers/MaskManager"),k=m("./managers/StencilManager"),u=m("./managers/FilterManager"),t=m("./utils/RenderTarget"),i=m("./utils/ObjectRenderer"),e=m("./TextureManager"),o=m("./TextureGarbageCollector"),j=m("./WebGLState"),q=m("pixi-gl-core").createContext,p=m("./utils/mapWebGLDrawModesToPixi"),h=m("./utils/validateContext"),v=m("../../utils"),l=m("pixi-gl-core"),s=m("../../const");var r=0;function n(A,y,z){z=z||{};w.call(this,"WebGL",A,y,z);this.type=s.RENDERER_TYPE.WEBGL;this.handleContextLost=this.handleContextLost.bind(this);this.handleContextRestored=this.handleContextRestored.bind(this);this.view.addEventListener("webglcontextlost",this.handleContextLost,false);this.view.addEventListener("webglcontextrestored",this.handleContextRestored,false);this._contextOptions={alpha:this.transparent,antialias:z.antialias,premultipliedAlpha:this.transparent&&this.transparent!=="notMultiplied",stencil:true,preserveDrawingBuffer:z.preserveDrawingBuffer};this._backgroundColorRgba[3]=this.transparent?0:1;this.maskManager=new g(this);this.stencilManager=new k(this);this.emptyRenderer=new i(this);this.currentRenderer=this.emptyRenderer;this.initPlugins();if(z.context){h(z.context)}this.gl=z.context||q(this.view,this._contextOptions);this.CONTEXT_UID=r++;this.state=new j(this.gl);this.renderingToScreen=true;this._initContext();this.filterManager=new u(this);this.drawModes=p(this.gl);this._activeShader=null;this._activeRenderTarget=null;this._activeTextureLocation=999;this._activeTexture=null;this.setBlendMode(0)}n.prototype=Object.create(w.prototype);n.prototype.constructor=n;f.exports=n;v.pluginTarget.mixin(n);n.prototype._initContext=function(){var y=this.gl;this.textureManager=new e(this);this.textureGC=new o(this);this.state.resetToDefault();this.rootRenderTarget=new t(y,this.width,this.height,null,this.resolution,true);this.rootRenderTarget.clearColor=this._backgroundColorRgba;this.bindRenderTarget(this.rootRenderTarget);this.emit("context",y);this.resize(this.width,this.height)};n.prototype.render=function(D,A,y,z,C){this.renderingToScreen=!A;this.emit("prerender");if(!this.gl||this.gl.isContextLost()){return}if(!A){this._lastObjectRendered=D}if(!C){var B=D.parent;D.parent=this._tempDisplayObjectParent;D.updateTransform();D.parent=B}this.bindRenderTexture(A,z);this.currentRenderer.start();if(y!==undefined?y:this.clearBeforeRender){this._activeRenderTarget.clear()}D.renderWebGL(this);this.currentRenderer.flush();this.textureGC.update();this.emit("postrender")};n.prototype.setObjectRenderer=function(y){if(this.currentRenderer===y){return}this.currentRenderer.stop();this.currentRenderer=y;this.currentRenderer.start()};n.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)};n.prototype.resize=function(z,y){w.prototype.resize.call(this,z,y);this.rootRenderTarget.resize(z,y);if(this._activeRenderTarget===this.rootRenderTarget){this.rootRenderTarget.activate();if(this._activeShader){this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(true)}}};n.prototype.setBlendMode=function(y){this.state.setBlendMode(y)};n.prototype.clear=function(y){this._activeRenderTarget.clear(y)};n.prototype.setTransform=function(y){this._activeRenderTarget.transform=y};n.prototype.bindRenderTexture=function(z,y){var B;if(z){var A=z.baseTexture;var C=this.gl;if(!A._glRenderTargets[this.CONTEXT_UID]){this.textureManager.updateTexture(A);C.bindTexture(C.TEXTURE_2D,null)}else{this._activeTextureLocation=A._id;C.activeTexture(C.TEXTURE0+A._id);C.bindTexture(C.TEXTURE_2D,null)}B=A._glRenderTargets[this.CONTEXT_UID];B.setFrame(z.frame)}else{B=this.rootRenderTarget}B.transform=y;this.bindRenderTarget(B);return this};n.prototype.bindRenderTarget=function(y){if(y!==this._activeRenderTarget){this._activeRenderTarget=y;y.activate();if(this._activeShader){this._activeShader.uniforms.projectionMatrix=y.projectionMatrix.toArray(true)}this.stencilManager.setMaskStack(y.stencilMaskStack)}return this};n.prototype.bindShader=function(y){if(this._activeShader!==y){this._activeShader=y;y.bind();y.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(true)}return this};n.prototype.bindTexture=function(z,y){z=z.baseTexture||z;var A=this.gl;y=y||0;if(this._activeTextureLocation!==y){this._activeTextureLocation=y;A.activeTexture(A.TEXTURE0+y)}this._activeTexture=z;if(!z._glTextures[this.CONTEXT_UID]){this.textureManager.updateTexture(z)}else{z.touched=this.textureGC.count;z._glTextures[this.CONTEXT_UID].bind()}return this};n.prototype.createVao=function(){return new l.VertexArrayObject(this.gl,this.state.attribState)};n.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer);this._activeShader=null;this._activeRenderTarget=this.rootRenderTarget;this._activeTextureLocation=999;this._activeTexture=null;this.rootRenderTarget.activate();this.state.resetToDefault();return this};n.prototype.handleContextLost=function(y){y.preventDefault()};n.prototype.handleContextRestored=function(){this._initContext();this.textureManager.removeAll()};n.prototype.destroy=function(y){this.destroyPlugins();this.view.removeEventListener("webglcontextlost",this.handleContextLost);this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);this.textureManager.destroy();w.prototype.destroy.call(this,y);this.uid=0;this.maskManager.destroy();this.stencilManager.destroy();this.filterManager.destroy();this.maskManager=null;this.filterManager=null;this.textureManager=null;this.currentRenderer=null;this.handleContextLost=null;this.handleContextRestored=null;this._contextOptions=null;this.gl.useProgram(null);if(this.gl.getExtension("WEBGL_lose_context")){this.gl.getExtension("WEBGL_lose_context").loseContext()}this.gl=null}},{"../../const":41,"../../utils":114,"../SystemRenderer":71,"./TextureGarbageCollector":77,"./TextureManager":78,"./WebGLState":80,"./managers/FilterManager":85,"./managers/MaskManager":86,"./managers/StencilManager":87,"./utils/ObjectRenderer":89,"./utils/RenderTarget":91,"./utils/mapWebGLDrawModesToPixi":94,"./utils/validateContext":95,"pixi-gl-core":20}],80:[function(f,e,j){var n=f("./utils/mapWebGLBlendModesToPixi");function h(o){this.activeState=new Uint8Array(16);this.defaultState=new Uint8Array(16);this.defaultState[0]=1;this.stackIndex=0;this.stack=[];this.gl=o;this.maxAttribs=o.getParameter(o.MAX_VERTEX_ATTRIBS);this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)};this.blendModes=n(o);this.nativeVaoExtension=(o.getExtension("OES_vertex_array_object")||o.getExtension("MOZ_OES_vertex_array_object")||o.getExtension("WEBKIT_OES_vertex_array_object"))}h.prototype.push=function(){var p=this.state[++this.stackIndex];if(!p){p=this.state[this.stackIndex]=new Uint8Array(16)}for(var o=0;o<this.activeState.length;o++){this.activeState[o]=p[o]}};var g=0,i=1,k=2,l=3,m=4;h.prototype.pop=function(){var o=this.state[--this.stackIndex];this.setState(o)};h.prototype.setState=function(o){this.setBlend(o[g]);this.setDepthTest(o[i]);this.setFrontFace(o[k]);this.setCullFace(o[l]);this.setBlendMode(o[m])};h.prototype.setBlend=function(o){if(this.activeState[g]===o|0){return}this.activeState[g]=o|0;var p=this.gl;if(o){p.enable(p.BLEND)}else{p.disable(p.BLEND)}};h.prototype.setBlendMode=function(o){if(o===this.activeState[m]){return}this.activeState[m]=o;this.gl.blendFunc(this.blendModes[o][0],this.blendModes[o][1])};h.prototype.setDepthTest=function(o){if(this.activeState[i]===o|0){return}this.activeState[i]=o|0;var p=this.gl;if(o){p.enable(p.DEPTH_TEST)}else{p.disable(p.DEPTH_TEST)}};h.prototype.setCullFace=function(o){if(this.activeState[l]===o|0){return}this.activeState[l]=o|0;var p=this.gl;if(o){p.enable(p.CULL_FACE)}else{p.disable(p.CULL_FACE)}};h.prototype.setFrontFace=function(o){if(this.activeState[k]===o|0){return}this.activeState[k]=o|0;var p=this.gl;if(o){p.frontFace(p.CW)}else{p.frontFace(p.CCW)}};h.prototype.resetAttributes=function(){var o;for(o=0;o<this.attribState.tempAttribState.length;o++){this.attribState.tempAttribState[o]=0}for(o=0;o<this.attribState.attribState.length;o++){this.attribState.attribState[o]=0}var p=this.gl;for(o=1;o<this.maxAttribs;o++){p.disableVertexAttribArray(o)}};h.prototype.resetToDefault=function(){if(this.nativeVaoExtension){this.nativeVaoExtension.bindVertexArrayOES(null)}this.resetAttributes();for(var o=0;o<this.activeState.length;o++){this.activeState[o]=2}var p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,false);this.setState(this.defaultState)};e.exports=h},{"./utils/mapWebGLBlendModesToPixi":93}],81:[function(j,k,i){var l=j("./extractUniformsFromSrc"),g=j("../../../utils"),e=j("../../../const"),f={};function h(n,p,m){this.vertexSrc=n||h.defaultVertexSrc;this.fragmentSrc=p||h.defaultFragmentSrc;this.blendMode=e.BLEND_MODES.NORMAL;this.uniformData=m||l(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler");this.uniforms={};for(var o in this.uniformData){this.uniforms[o]=this.uniformData[o].value}this.glShaders=[];if(!f[this.vertexSrc+this.fragmentSrc]){f[this.vertexSrc+this.fragmentSrc]=g.uid()}this.glShaderKey=f[this.vertexSrc+this.fragmentSrc];this.padding=4;this.resolution=1}k.exports=h;h.prototype.apply=function(n,p,o,m){n.applyFilter(this,p,o,m)};h.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n");h.defaultFragmentSrc=["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")},{"../../../const":41,"../../../utils":114,"./extractUniformsFromSrc":82}],82:[function(g,h,f){var e=g("pixi-gl-core").shader.defaultValue;function j(k,n,l){var m=i(k,l);var o=i(n,l);return Object.assign(m,o)}function i(n){var l=new RegExp("^(projectionMatrix|uSampler|filterArea)$");var r={};var p;var t=n.replace(/\s+/g," ").split(/\s*;\s*/);for(var m=0;m<t.length;m++){var u=t[m].trim();if(u.indexOf("uniform")>-1){var q=u.split(" ");var o=q[1];var k=q[2];var s=1;if(k.indexOf("[")>-1){p=k.split(/\[|\]/);k=p[0];s*=Number(p[1])}if(!k.match(l)){r[k]={value:e(o,s),name:k,type:o}}}}return r}h.exports=j},{"pixi-gl-core":20}],83:[function(g,h,f){var i=g("../../../math");var e=function(m,n,l){var o=m.identity();o.translate(n.x/l.width,n.y/l.height);o.scale(l.width,l.height);return o};var k=function(m,p,l){var q=m.identity();q.translate(p.x/l.width,p.y/l.height);var o=(l.width/p.width);var n=(l.height/p.height);q.scale(o,n);return q};var j=function(q,p,m,u){var l=u.worldTransform.copy(i.Matrix.TEMP_MATRIX),r=u._texture.baseTexture;var t=q.identity();var s=m.height/m.width;t.translate(p.x/m.width,p.y/m.height);t.scale(1,s);var o=(m.width/r.width);var n=(m.height/r.height);l.tx/=r.width*o;l.ty/=r.width*o;l.invert();t.prepend(l);t.scale(1,1/s);t.scale(o,n);t.translate(u.anchor.x,u.anchor.y);return t};h.exports={calculateScreenSpaceMatrix:e,calculateNormalizedScreenSpaceMatrix:k,calculateSpriteMatrix:j}},{"../../../math":65}],84:[function(h,i,g){var f=h("../Filter"),j=h("../../../../math");function e(k){var l=new j.Matrix();f.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","#define GLSLIFY 1\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n");k.renderable=false;this.maskSprite=k;this.maskMatrix=l}e.prototype=Object.create(f.prototype);e.prototype.constructor=e;i.exports=e;e.prototype.apply=function(k,m,l){var n=this.maskSprite;this.uniforms.mask=n._texture;this.uniforms.otherMatrix=k.calculateSpriteMatrix(this.maskMatrix,n);this.uniforms.alpha=n.worldAlpha;k.applyFilter(this,m,l)}},{"../../../../math":65,"../Filter":81}],85:[function(h,f,j){var o=h("./WebGLManager"),e=h("../utils/RenderTarget"),g=h("../utils/Quad"),n=h("../../../math"),p=h("../../../Shader"),l=h("../filters/filterTransforms"),m=h("bit-twiddle");var i=function(){this.renderTarget=null;this.sourceFrame=new n.Rectangle();this.destinationFrame=new n.Rectangle();this.filters=[];this.target=null;this.resolution=1};function k(q){o.call(this,q);this.gl=this.renderer.gl;this.quad=new g(this.gl,q.state.attribState);this.shaderCache={};this.pool={}}k.prototype=Object.create(o.prototype);k.prototype.constructor=k;f.exports=k;k.prototype.pushFilter=function(w,s){var y=this.renderer;var z=this.filterData;if(!z){z=this.renderer._activeRenderTarget.filterStack;var B=new i();B.sourceFrame=B.destinationFrame=this.renderer._activeRenderTarget.size;B.renderTarget=y._activeRenderTarget;this.renderer._activeRenderTarget.filterData=z={index:0,stack:[B]};this.filterData=z}var q=z.stack[++z.index];if(!q){q=z.stack[z.index]=new i()}var t=s[0].resolution;var A=s[0].padding;var x=w.filterArea||w.getBounds(true);var r=q.sourceFrame;var u=q.destinationFrame;r.x=(((x.x-A)*t)|0)/t;r.y=(((x.y-A)*t)|0)/t;r.width=(((x.width+A*2)*t)|0)/t;r.height=(((x.height+A*2)*t)|0)/t;if(z.stack[0].renderTarget.transform){}else{r.fit(z.stack[0].destinationFrame)}u.width=r.width;u.height=r.height;var v=this.getPotRenderTarget(y.gl,r.width,r.height,t);q.target=w;q.filters=s;q.resolution=t;q.renderTarget=v;v.setFrame(u,r);y.bindRenderTarget(v);y.clear()};k.prototype.popFilter=function(){var x=this.filterData;var q=x.stack[x.index-1];var u=x.stack[x.index];this.quad.map(u.renderTarget.size,u.sourceFrame).upload();var v=u.filters;if(v.length===1){v[0].apply(this,u.renderTarget,q.renderTarget,false);this.freePotRenderTarget(u.renderTarget)}else{var w=u.renderTarget;var y=this.getPotRenderTarget(this.renderer.gl,u.sourceFrame.width,u.sourceFrame.height,1);y.setFrame(u.destinationFrame,u.sourceFrame);for(var s=0;s<v.length-1;s++){v[s].apply(this,w,y,true);var r=w;w=y;y=r}v[s].apply(this,w,q.renderTarget,false);this.freePotRenderTarget(w);this.freePotRenderTarget(y)}x.index--;if(x.index===0){this.filterData=null}};k.prototype.applyFilter=function(t,s,r,q){var v=this.renderer;var u=t.glShaders[v.CONTEXT_UID];if(!u){if(t.glShaderKey){u=this.shaderCache[t.glShaderKey];if(!u){u=t.glShaders[v.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=new p(this.gl,t.vertexSrc,t.fragmentSrc)}}else{u=t.glShaders[v.CONTEXT_UID]=new p(this.gl,t.vertexSrc,t.fragmentSrc)}this.quad.initVao(u)}v.bindRenderTarget(r);if(q){var w=v.gl;w.disable(w.SCISSOR_TEST);v.clear();w.enable(w.SCISSOR_TEST)}if(r===v.maskManager.scissorRenderTarget){v.maskManager.pushScissorMask(null,v.maskManager.scissorData)}v.bindShader(u);this.syncUniforms(u,t);s.texture.bind(0);v._activeTextureLocation=0;v.state.setBlendMode(t.blendMode);this.quad.draw()};k.prototype.syncUniforms=function(x,r){var q=r.uniformData;var y=r.uniforms;var z=1;var s;if(x.uniforms.data.filterArea){s=this.filterData.stack[this.filterData.index];var w=x.uniforms.filterArea;w[0]=s.renderTarget.size.width;w[1]=s.renderTarget.size.height;w[2]=s.sourceFrame.x;w[3]=s.sourceFrame.y;x.uniforms.filterArea=w}if(x.uniforms.data.filterClamp){s=this.filterData.stack[this.filterData.index];var u=x.uniforms.filterClamp;u[0]=0.5/s.renderTarget.size.width;u[1]=0.5/s.renderTarget.size.height;u[2]=(s.sourceFrame.width-0.5)/s.renderTarget.size.width;u[3]=(s.sourceFrame.height-0.5)/s.renderTarget.size.height;x.uniforms.filterClamp=u}var t;for(var v in q){if(q[v].type==="sampler2D"){x.uniforms[v]=z;this.renderer.bindTexture(y[v].baseTexture,z);z++}else{if(q[v].type==="mat3"){if(y[v].a!==undefined){x.uniforms[v]=y[v].toArray(true)}else{x.uniforms[v]=y[v]}}else{if(q[v].type==="vec2"){if(y[v].x!==undefined){t=x.uniforms[v]||new Float32Array(2);t[0]=y[v].x;t[1]=y[v].y;x.uniforms[v]=t}else{x.uniforms[v]=y[v]}}else{if(q[v].type==="float"){if(x.uniforms.data[v].value!==q[v]){x.uniforms[v]=y[v]}}else{x.uniforms[v]=y[v]}}}}}};k.prototype.getRenderTarget=function(){var q=this.filterData.stack[this.filterData.index];var r=this.getPotRenderTarget(this.renderer.gl,q.sourceFrame.width,q.sourceFrame.height,q.resolution);r.setFrame(q.destinationFrame,q.sourceFrame);return r};k.prototype.returnRenderTarget=function(q){return this.freePotRenderTarget(q)};k.prototype.calculateScreenSpaceMatrix=function(q){var r=this.filterData.stack[this.filterData.index];return l.calculateScreenSpaceMatrix(q,r.sourceFrame,r.renderTarget.size)};k.prototype.calculateNormalizedScreenSpaceMatrix=function(q){var r=this.filterData.stack[this.filterData.index];return l.calculateNormalizedScreenSpaceMatrix(q,r.sourceFrame,r.renderTarget.size,r.destinationFrame)};k.prototype.calculateSpriteMatrix=function(r,q){var s=this.filterData.stack[this.filterData.index];return l.calculateSpriteMatrix(r,s.sourceFrame,s.renderTarget.size,q)};k.prototype.destroy=function(){this.shaderCache=[];this.emptyPool()};k.prototype.getPotRenderTarget=function(v,s,u,q){s=m.nextPow2(s*q);u=m.nextPow2(u*q);var r=((s&65535)<<16)|(u&65535);if(!this.pool[r]){this.pool[r]=[]}var t=this.pool[r].pop()||new e(v,s,u,null,1);t.resolution=q;t.defaultFrame.width=t.size.width=s/q;t.defaultFrame.height=t.size.height=u/q;return t};k.prototype.emptyPool=function(){for(var s in this.pool){var q=this.pool[s];if(q){for(var r=0;r<q.length;r++){q[r].destroy(true)}}}this.pool={}};k.prototype.freePotRenderTarget=function(t){var r=t.size.width*t.resolution;var s=t.size.height*t.resolution;var q=((r&65535)<<16)|(s&65535);this.pool[q].push(t)}},{"../../../Shader":40,"../../../math":65,"../filters/filterTransforms":83,"../utils/Quad":90,"../utils/RenderTarget":91,"./WebGLManager":88,"bit-twiddle":2}],86:[function(f,h,e){var i=f("./WebGLManager"),g=f("../filters/spriteMask/SpriteMaskFilter");function j(k){i.call(this,k);this.scissor=false;this.scissorData=null;this.scissorRenderTarget=null;this.enableScissor=true;this.alphaMaskPool=[];this.alphaMaskIndex=0}j.prototype=Object.create(i.prototype);j.prototype.constructor=j;h.exports=j;j.prototype.pushMask=function(n,m){if(m.texture){this.pushSpriteMask(n,m)}else{if(this.enableScissor&&!this.scissor&&!this.renderer.stencilManager.stencilMaskStack.length&&m.isFastRect()){var l=m.worldTransform;var k=Math.atan2(l.b,l.a);k=Math.round(k*(180/Math.PI));if(k%90){this.pushStencilMask(m)}else{this.pushScissorMask(n,m)}}else{this.pushStencilMask(m)}}};j.prototype.popMask=function(l,k){if(k.texture){this.popSpriteMask(l,k)}else{if(this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length){this.popScissorMask(l,k)}else{this.popStencilMask(l,k)}}};j.prototype.pushSpriteMask=function(m,l){var k=this.alphaMaskPool[this.alphaMaskIndex];if(!k){k=this.alphaMaskPool[this.alphaMaskIndex]=[new g(l)]}k[0].resolution=this.renderer.resolution;k[0].maskSprite=l;m.filterArea=l.getBounds(true);this.renderer.filterManager.pushFilter(m,k);this.alphaMaskIndex++};j.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter();this.alphaMaskIndex--};j.prototype.pushStencilMask=function(k){this.renderer.currentRenderer.stop();this.renderer.stencilManager.pushStencil(k)};j.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop();this.renderer.stencilManager.popStencil()};j.prototype.pushScissorMask=function(o,n){n.renderable=true;var m=this.renderer._activeRenderTarget;var l=n.getBounds();l.fit(m.size);n.renderable=false;this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var k=this.renderer.resolution;this.renderer.gl.scissor(l.x*k,(m.root?m.size.height-l.y-l.height:l.y)*k,l.width*k,l.height*k);this.scissorRenderTarget=m;this.scissorData=n;this.scissor=true};j.prototype.popScissorMask=function(){this.scissorRenderTarget=null;this.scissorData=null;this.scissor=false;var k=this.renderer.gl;k.disable(k.SCISSOR_TEST)}},{"../filters/spriteMask/SpriteMaskFilter":84,"./WebGLManager":88}],87:[function(f,g,e){var h=f("./WebGLManager");function i(j){h.call(this,j);this.stencilMaskStack=null}i.prototype=Object.create(h.prototype);i.prototype.constructor=i;g.exports=i;i.prototype.setMaskStack=function(k){this.stencilMaskStack=k;var j=this.renderer.gl;if(k.length===0){j.disable(j.STENCIL_TEST)}else{j.enable(j.STENCIL_TEST)}};i.prototype.pushStencil=function(j){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);this.renderer._activeRenderTarget.attachStencilBuffer();var l=this.renderer.gl,k=this.stencilMaskStack;if(k.length===0){l.enable(l.STENCIL_TEST);l.clear(l.STENCIL_BUFFER_BIT);l.stencilFunc(l.ALWAYS,1,1)}k.push(j);l.colorMask(false,false,false,false);l.stencilOp(l.KEEP,l.KEEP,l.INCR);this.renderer.plugins.graphics.render(j);l.colorMask(true,true,true,true);l.stencilFunc(l.NOTEQUAL,0,k.length);l.stencilOp(l.KEEP,l.KEEP,l.KEEP)};i.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var l=this.renderer.gl,k=this.stencilMaskStack;var j=k.pop();if(k.length===0){l.disable(l.STENCIL_TEST)}else{l.colorMask(false,false,false,false);l.stencilOp(l.KEEP,l.KEEP,l.DECR);this.renderer.plugins.graphics.render(j);l.colorMask(true,true,true,true);l.stencilFunc(l.NOTEQUAL,0,k.length);l.stencilOp(l.KEEP,l.KEEP,l.KEEP)}};i.prototype.destroy=function(){h.prototype.destroy.call(this);this.stencilMaskStack.stencilStack=null}},{"./WebGLManager":88}],88:[function(f,g,e){function h(i){this.renderer=i;this.renderer.on("context",this.onContextChange,this)}h.prototype.constructor=h;g.exports=h;h.prototype.onContextChange=function(){};h.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this);this.renderer=null}},{}],89:[function(f,g,e){var h=f("../managers/WebGLManager");function i(j){h.call(this,j)}i.prototype=Object.create(h.prototype);i.prototype.constructor=i;g.exports=i;i.prototype.start=function(){};i.prototype.stop=function(){this.flush()};i.prototype.flush=function(){};i.prototype.render=function(j){}},{"../managers/WebGLManager":88}],90:[function(f,g,e){var h=f("pixi-gl-core"),i=f("../../../utils/createIndicesForQuads");function j(m,l){this.gl=m;this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.interleaved=new Float32Array(8*2);for(var k=0;k<4;k++){this.interleaved[k*4]=this.vertices[(k*2)];this.interleaved[(k*4)+1]=this.vertices[(k*2)+1];this.interleaved[(k*4)+2]=this.uvs[k*2];this.interleaved[(k*4)+3]=this.uvs[(k*2)+1]}this.indices=i(1);this.vertexBuffer=h.GLBuffer.createVertexBuffer(m,this.interleaved,m.STATIC_DRAW);this.indexBuffer=h.GLBuffer.createIndexBuffer(m,this.indices,m.STATIC_DRAW);this.vao=new h.VertexArrayObject(m,l)}j.prototype.constructor=j;j.prototype.initVao=function(k){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,k.attributes.aVertexPosition,this.gl.FLOAT,false,4*4,0).addAttribute(this.vertexBuffer,k.attributes.aTextureCoord,this.gl.FLOAT,false,4*4,2*4)};j.prototype.map=function(l,m){var k=0;var n=0;this.uvs[0]=k;this.uvs[1]=n;this.uvs[2]=k+m.width/l.width;this.uvs[3]=n;this.uvs[4]=k+m.width/l.width;this.uvs[5]=n+m.height/l.height;this.uvs[6]=k;this.uvs[7]=n+m.height/l.height;k=m.x;n=m.y;this.vertices[0]=k;this.vertices[1]=n;this.vertices[2]=k+m.width;this.vertices[3]=n;this.vertices[4]=k+m.width;this.vertices[5]=n+m.height;this.vertices[6]=k;this.vertices[7]=n+m.height;return this};j.prototype.draw=function(){this.vao.bind().draw(this.gl.TRIANGLES,6,0).unbind();return this};j.prototype.upload=function(){for(var k=0;k<4;k++){this.interleaved[k*4]=this.vertices[(k*2)];this.interleaved[(k*4)+1]=this.vertices[(k*2)+1];this.interleaved[(k*4)+2]=this.uvs[k*2];this.interleaved[(k*4)+3]=this.uvs[(k*2)+1]}this.vertexBuffer.upload(this.interleaved);return this};j.prototype.destroy=function(){var k=this.gl;k.deleteBuffer(this.vertexBuffer);k.deleteBuffer(this.indexBuffer)};g.exports=j},{"../../../utils/createIndicesForQuads":112,"pixi-gl-core":20}],91:[function(g,h,f){var i=g("../../../math"),e=g("../../../const"),k=g("pixi-gl-core").GLFramebuffer;var j=function(q,p,l,o,n,m){this.gl=q;this.frameBuffer=null;this.texture=null;this.clearColor=[0,0,0,0];this.size=new i.Rectangle(0,0,1,1);this.resolution=n||e.RESOLUTION;this.projectionMatrix=new i.Matrix();this.transform=null;this.frame=null;this.defaultFrame=new i.Rectangle();this.destinationFrame=null;this.sourceFrame=null;this.stencilBuffer=null;this.stencilMaskStack=[];this.filterData=null;this.scaleMode=o||e.SCALE_MODES.DEFAULT;this.root=m;if(!this.root){this.frameBuffer=k.createRGBA(q,100,100);if(this.scaleMode===e.SCALE_MODES.NEAREST){this.frameBuffer.texture.enableNearestScaling()}else{this.frameBuffer.texture.enableLinearScaling()}this.texture=this.frameBuffer.texture}else{this.frameBuffer=new k(q,100,100);this.frameBuffer.framebuffer=null}this.setFrame();this.resize(p,l)};j.prototype.constructor=j;h.exports=j;j.prototype.clear=function(l){var m=l||this.clearColor;this.frameBuffer.clear(m[0],m[1],m[2],m[3])};j.prototype.attachStencilBuffer=function(){if(!this.root){this.frameBuffer.enableStencil()}};j.prototype.setFrame=function(m,l){this.destinationFrame=m||this.destinationFrame||this.defaultFrame;this.sourceFrame=l||this.sourceFrame||m};j.prototype.activate=function(){var l=this.gl;this.frameBuffer.bind();this.calculateProjection(this.destinationFrame,this.sourceFrame);if(this.transform){this.projectionMatrix.append(this.transform)}if(this.destinationFrame!==this.sourceFrame){l.enable(l.SCISSOR_TEST);l.scissor(this.destinationFrame.x|0,this.destinationFrame.y|0,(this.destinationFrame.width*this.resolution)|0,(this.destinationFrame.height*this.resolution)|0)}else{l.disable(l.SCISSOR_TEST)}l.viewport(this.destinationFrame.x|0,this.destinationFrame.y|0,(this.destinationFrame.width*this.resolution)|0,(this.destinationFrame.height*this.resolution)|0)};j.prototype.calculateProjection=function(n,m){var l=this.projectionMatrix;m=m||n;l.identity();if(!this.root){l.a=1/n.width*2;l.d=1/n.height*2;l.tx=-1-m.x*l.a;l.ty=-1-m.y*l.d}else{l.a=1/n.width*2;l.d=-1/n.height*2;l.tx=-1-m.x*l.a;l.ty=1-m.y*l.d}};j.prototype.resize=function(n,l){n=n|0;l=l|0;if(this.size.width===n&&this.size.height===l){return}this.size.width=n;this.size.height=l;this.defaultFrame.width=n;this.defaultFrame.height=l;this.frameBuffer.resize(n*this.resolution,l*this.resolution);var m=this.frame||this.size;this.calculateProjection(m)};j.prototype.destroy=function(){this.frameBuffer.destroy();this.frameBuffer=null;this.texture=null}},{"../../../const":41,"../../../math":65,"pixi-gl-core":20}],92:[function(g,h,f){var j=g("pixi-gl-core");var e=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");var k=function(q,p){var l=!p;if(l){var o=document.createElement("canvas");o.width=1;o.height=1;p=j.createContext(o)}var n=p.createShader(p.FRAGMENT_SHADER);while(true){var m=e.replace(/%forloop%/gi,i(q));p.shaderSource(n,m);p.compileShader(n);if(!p.getShaderParameter(n,p.COMPILE_STATUS)){q=(q/2)|0}else{break}}if(l){if(p.getExtension("WEBGL_lose_context")){p.getExtension("WEBGL_lose_context").loseContext()}}return q};function i(n){var m="";for(var l=0;l<n;l++){if(l>0){m+="\nelse "}if(l<n-1){m+="if(test == "+l+".0){}"}}return m}h.exports=k},{"pixi-gl-core":20}],93:[function(h,i,f){var e=h("../../../const");function g(j,k){k=k||[];k[e.BLEND_MODES.NORMAL]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];k[e.BLEND_MODES.ADD]=[j.ONE,j.DST_ALPHA];k[e.BLEND_MODES.MULTIPLY]=[j.DST_COLOR,j.ONE_MINUS_SRC_ALPHA];k[e.BLEND_MODES.SCREEN]=[j.ONE,j.ONE_MINUS_SRC_COLOR];k[e.BLEND_MODES.OVERLAY]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];k[e.BLEND_MODES.DARKEN]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];k[e.BLEND_MODES.LIGHTEN]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];k[e.BLEND_MODES.COLOR_DODGE]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];k[e.BLEND_MODES.COLOR_BURN]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];k[e.BLEND_MODES.HARD_LIGHT]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];k[e.BLEND_MODES.SOFT_LIGHT]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];k[e.BLEND_MODES.DIFFERENCE]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];k[e.BLEND_MODES.EXCLUSION]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];k[e.BLEND_MODES.HUE]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];k[e.BLEND_MODES.SATURATION]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];k[e.BLEND_MODES.COLOR]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];k[e.BLEND_MODES.LUMINOSITY]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];return k}i.exports=g},{"../../../const":41}],94:[function(h,i,f){var e=h("../../../const");function g(k,j){j=j||{};j[e.DRAW_MODES.POINTS]=k.POINTS;j[e.DRAW_MODES.LINES]=k.LINES;j[e.DRAW_MODES.LINE_LOOP]=k.LINE_LOOP;j[e.DRAW_MODES.LINE_STRIP]=k.LINE_STRIP;j[e.DRAW_MODES.TRIANGLES]=k.TRIANGLES;j[e.DRAW_MODES.TRIANGLE_STRIP]=k.TRIANGLE_STRIP;j[e.DRAW_MODES.TRIANGLE_FAN]=k.TRIANGLE_FAN}i.exports=g},{"../../../const":41}],95:[function(f,g,e){function h(j){var i=j.getContextAttributes();if(!i.stencil){console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}}g.exports=h},{}],96:[function(h,g,k){var l=h("../math"),j=h("../textures/Texture"),i=h("../display/Container"),m=h("../utils"),n=h("../const"),e=new l.Point();function f(o){i.call(this);this.anchor=new l.ObservablePoint(this.onAnchorUpdate,this);this._texture=null;this._width=0;this._height=0;this.tint=16777215;this.blendMode=n.BLEND_MODES.NORMAL;this.shader=null;this.cachedTint=16777215;this.texture=o||j.EMPTY;this.vertexData=new Float32Array(16);this._transformID=-1;this._textureID=-1}f.prototype=Object.create(i.prototype);f.prototype.constructor=f;g.exports=f;Object.defineProperties(f.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture.orig.width},set:function(p){var o=m.sign(this.scale.x)||1;this.scale.x=o*p/this.texture.orig.width;this._width=p}},height:{get:function(){return Math.abs(this.scale.y)*this.texture.orig.height},set:function(p){var o=m.sign(this.scale.y)||1;this.scale.y=o*p/this.texture.orig.height;this._height=p}},texture:{get:function(){return this._texture},set:function(o){if(this._texture===o){return}this._texture=o;this.cachedTint=16777215;this._textureID=-1;if(o){if(o.baseTexture.hasLoaded){this._onTextureUpdate()}else{o.once("update",this._onTextureUpdate,this)}}}}});f.prototype._onTextureUpdate=function(){this._textureID=-1;if(this._width){this.scale.x=m.sign(this.scale.x)*this._width/this.texture.orig.width}if(this._height){this.scale.y=m.sign(this.scale.y)*this._height/this.texture.orig.height}};f.prototype.onAnchorUpdate=function(){this._transformID=-1};f.prototype.calculateVertices=function(){if(this._transformID===this.transform._worldID&&this._textureID===this._texture._updateID){return}this._transformID=this.transform._worldID;this._textureID=this._texture._updateID;var w=this._texture,u=this.transform.worldTransform,B=u.a,A=u.b,y=u.c,v=u.d,r=u.tx,q=u.ty,o=this.vertexData,t,s,z,x,p=w.trim,C=w.orig;if(p){s=p.x-this.anchor.x*C.width;t=s+p.width;x=p.y-this.anchor.y*C.height;z=x+p.height}else{t=(C.width)*(1-this.anchor.x);s=(C.width)*-this.anchor.x;z=C.height*(1-this.anchor.y);x=C.height*-this.anchor.y}o[0]=B*s+y*x+r;o[1]=v*x+A*s+q;o[2]=B*t+y*x+r;o[3]=v*x+A*t+q;o[4]=B*t+y*z+r;o[5]=v*z+A*t+q;o[6]=B*s+y*z+r;o[7]=v*z+A*s+q};f.prototype.calculateBoundsVertices=function(){var w=this._texture,p=w.trim,o=this.vertexData,C=w.orig;if(!p||p.width===C.width&&p.height===C.height){o[8]=o[0];o[9]=o[1];o[10]=o[2];o[11]=o[3];o[12]=o[4];o[13]=o[5];o[14]=o[6];o[15]=o[7];return}var u=this.transform.worldTransform,B=u.a,A=u.b,y=u.c,v=u.d,r=u.tx,q=u.ty,t,s,z,x;t=(C.width)*(1-this.anchor.x);s=(C.width)*-this.anchor.x;z=C.height*(1-this.anchor.y);x=C.height*-this.anchor.y;o[8]=B*s+y*x+r;o[9]=v*x+A*s+q;o[10]=B*t+y*x+r;o[11]=v*x+A*t+q;o[12]=B*t+y*z+r;o[13]=v*z+A*t+q;o[14]=B*s+y*z+r;o[15]=v*z+A*s+q};f.prototype._renderWebGL=function(o){this.calculateVertices();o.setObjectRenderer(o.plugins.sprite);o.plugins.sprite.render(this)};f.prototype._renderCanvas=function(o){o.plugins.sprite.render(this)};f.prototype._calculateBounds=function(){this.calculateVertices();this._bounds.addQuad(this.vertexData)};f.prototype.getLocalBounds=function(){this._bounds.minX=-this._texture.orig.width*this.anchor.x;this._bounds.minY=-this._texture.orig.height*this.anchor.y;this._bounds.maxX=this._texture.orig.width;this._bounds.maxY=this._texture.orig.height;return this._bounds.getRectangle(this._bounds)};f.prototype.containsPoint=function(p){this.worldTransform.applyInverse(p,e);var s=this._texture.orig.width;var o=this._texture.orig.height;var q=-s*this.anchor.x;var r;if(e.x>q&&e.x<q+s){r=-o*this.anchor.y;if(e.y>r&&e.y<r+o){return true}}return false};f.prototype.destroy=function(p){i.prototype.destroy.call(this,p);this.anchor=null;var o=typeof p==="boolean"?p:p&&p.texture;if(o){var q=typeof p==="boolean"?p:p&&p.baseTexture;this._texture.destroy(!!q)}this._texture=null;this.shader=null};f.from=function(o){return new f(j.from(o))};f.fromFrame=function(p){var o=m.TextureCache[p];if(!o){throw new Error('The frameId "'+p+'" does not exist in the texture cache')}return new f(o)};f.fromImage=function(p,o,q){return new f(j.fromImage(p,o,q))}},{"../const":41,"../display/Container":43,"../math":65,"../textures/Texture":107,"../utils":114}],97:[function(g,f,h){var j=g("../../renderers/canvas/CanvasRenderer"),m=g("../../const"),k=g("../../math"),l=new k.Matrix(),e=g("./CanvasTinter");function i(n){this.renderer=n}i.prototype.constructor=i;f.exports=i;j.registerPlugin("sprite",i);i.prototype.render=function(s){var r=s._texture,q=this.renderer,p=s.transform.worldTransform,w,v,n=r._frame.width,u=r._frame.height;if(r.orig.width<=0||r.orig.height<=0||!r.baseTexture.source){return}q.setBlendMode(s.blendMode);if(r.valid){q.context.globalAlpha=s.worldAlpha;var t=r.baseTexture.scaleMode===m.SCALE_MODES.LINEAR;if(q.smoothProperty&&q.context[q.smoothProperty]!==t){q.context[q.smoothProperty]=t}if(r.trim){w=r.trim.width/2+r.trim.x-s.anchor.x*r.orig.width;v=r.trim.height/2+r.trim.y-s.anchor.y*r.orig.height}else{w=(0.5-s.anchor.x)*r.orig.width;v=(0.5-s.anchor.y)*r.orig.height}if(r.rotate){p.copy(l);p=l;k.GroupD8.matrixAppendRotationInv(p,r.rotate,w,v);w=0;v=0}w-=n/2;v-=u/2;if(q.roundPixels){q.context.setTransform(p.a,p.b,p.c,p.d,(p.tx*q.resolution)|0,(p.ty*q.resolution)|0);w=w|0;v=v|0}else{q.context.setTransform(p.a,p.b,p.c,p.d,p.tx*q.resolution,p.ty*q.resolution)}var o=r.baseTexture.resolution;if(s.tint!==16777215){if(s.cachedTint!==s.tint){s.cachedTint=s.tint;s.tintedTexture=e.getTintedTexture(s,s.tint)}q.context.drawImage(s.tintedTexture,0,0,n*o,u*o,w*q.resolution,v*q.resolution,n*q.resolution,u*q.resolution)}else{q.context.drawImage(r.baseTexture.source,r._frame.x*o,r._frame.y*o,n*o,u*o,w*q.resolution,v*q.resolution,n*q.resolution,u*q.resolution)}}};i.prototype.destroy=function(){this.renderer=null}},{"../../const":41,"../../math":65,"../../renderers/canvas/CanvasRenderer":72,"./CanvasTinter":98}],98:[function(h,i,f){var e=h("../../utils"),g=h("../../renderers/canvas/utils/canUseNewCanvasBlendModes");var j=i.exports={getTintedTexture:function(n,k){var p=n.texture;k=j.roundColor(k);var o="#"+("00000"+(k|0).toString(16)).substr(-6);p.tintCache=p.tintCache||{};if(p.tintCache[o]){return p.tintCache[o]}var l=j.canvas||document.createElement("canvas");j.tintMethod(p,k,l);if(j.convertTintToImage){var m=new Image();m.src=l.toDataURL();p.tintCache[o]=m}else{p.tintCache[o]=l;j.canvas=null}return l},tintWithMultiply:function(p,k,m){var n=m.getContext("2d");var o=p._frame.clone();var l=p.baseTexture.resolution;o.x*=l;o.y*=l;o.width*=l;o.height*=l;m.width=o.width;m.height=o.height;n.fillStyle="#"+("00000"+(k|0).toString(16)).substr(-6);n.fillRect(0,0,o.width,o.height);n.globalCompositeOperation="multiply";n.drawImage(p.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);n.globalCompositeOperation="destination-atop";n.drawImage(p.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height)},tintWithOverlay:function(p,k,m){var n=m.getContext("2d");var o=p._frame.clone();var l=p.baseTexture.resolution;o.x*=l;o.y*=l;o.width*=l;o.height*=l;m.width=o.width;m.height=o.height;n.globalCompositeOperation="copy";n.fillStyle="#"+("00000"+(k|0).toString(16)).substr(-6);n.fillRect(0,0,o.width,o.height);n.globalCompositeOperation="destination-atop";n.drawImage(p.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height)},tintWithPerPixel:function(v,q,n){var m=n.getContext("2d");var t=v._frame.clone();var p=v.baseTexture.resolution;t.x*=p;t.y*=p;t.width*=p;t.height*=p;n.width=t.width;n.height=t.height;m.globalCompositeOperation="copy";m.drawImage(v.baseTexture.source,t.x,t.y,t.width,t.height,0,0,t.width,t.height);var l=e.hex2rgb(q);var k=l[0],u=l[1],w=l[2];var x=m.getImageData(0,0,t.width,t.height);var o=x.data;for(var s=0;s<o.length;s+=4){o[s+0]*=k;o[s+1]*=u;o[s+2]*=w}m.putImageData(x,0,0)},roundColor:function(k){var l=j.cacheStepsPerColorChannel;var m=e.hex2rgb(k);m[0]=Math.min(255,(m[0]/l)*l);m[1]=Math.min(255,(m[1]/l)*l);m[2]=Math.min(255,(m[2]/l)*l);return e.rgb2hex(m)},cacheStepsPerColorChannel:8,convertTintToImage:false,canUseMultiply:g(),tintMethod:0};j.tintMethod=j.canUseMultiply?j.tintWithMultiply:j.tintWithPerPixel},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":75,"../../utils":114}],99:[function(f,g,e){var h=function(i){this.vertices=new ArrayBuffer(i);this.float32View=new Float32Array(this.vertices);this.uint32View=new Uint32Array(this.vertices)};g.exports=h;h.prototype.destroy=function(){this.vertices=null;this.positions=null;this.uvs=null;this.colors=null}},{}],100:[function(g,f,i){var p=g("../../renderers/webgl/utils/ObjectRenderer"),m=g("../../renderers/webgl/WebGLRenderer"),o=g("../../utils/createIndicesForQuads"),e=g("./generateMultiTextureShader"),l=g("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),h=g("./BatchBuffer"),q=g("../../const"),n=g("pixi-gl-core"),j=g("bit-twiddle");function k(u){p.call(this,u);this.vertSize=5;this.vertByteSize=this.vertSize*4;this.size=q.SPRITE_BATCH_SIZE;this.buffers=[];for(var s=1;s<=j.nextPow2(this.size);s*=2){var t=s*4*this.vertByteSize;this.buffers.push(new h(t))}this.indices=o(this.size);this.shaders=null;this.textureCount=0;this.currentIndex=0;this.tick=0;this.groups=[];for(var r=0;r<this.size;r++){this.groups[r]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0}}this.sprites=[];this.vertexBuffers=[];this.vaos=[];this.vaoMax=2;this.vertexCount=0;this.renderer.on("prerender",this.onPrerender,this)}k.prototype=Object.create(p.prototype);k.prototype.constructor=k;f.exports=k;m.registerPlugin("sprite",k);k.prototype.onContextChange=function(){var t=this.renderer.gl;this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),q.SPRITE_MAX_TEXTURES);this.MAX_TEXTURES=l(this.MAX_TEXTURES,t);this.shaders=new Array(this.MAX_TEXTURES);this.shaders[0]=e(t,1);this.shaders[1]=e(t,2);this.indexBuffer=n.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW);var s=this.shaders[1];for(var r=0;r<this.vaoMax;r++){this.vertexBuffers[r]=n.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW);this.vaos[r]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[r],s.attributes.aVertexPosition,t.FLOAT,false,this.vertByteSize,0).addAttribute(this.vertexBuffers[r],s.attributes.aTextureCoord,t.UNSIGNED_SHORT,true,this.vertByteSize,2*4).addAttribute(this.vertexBuffers[r],s.attributes.aColor,t.UNSIGNED_BYTE,true,this.vertByteSize,3*4).addAttribute(this.vertexBuffers[r],s.attributes.aTextureId,t.FLOAT,false,this.vertByteSize,4*4)}this.vao=this.vaos[0];this.currentBlendMode=99999};k.prototype.onPrerender=function(){this.vertexCount=0};k.prototype.render=function(r){if(this.currentIndex>=this.size){this.flush()}if(!r.texture._uvs){return}this.sprites[this.currentIndex++]=r};k.prototype.flush=function(){if(this.currentIndex===0){return}var K=this.renderer.gl;var N=j.nextPow2(this.currentIndex);var C=j.log2(N);var H=this.buffers[C];var z=this.sprites;var L=this.groups;var u=H.float32View;var A=H.uint32View;var w=0;var G;var D;var t=1;var F=0;var s=L[0];var M;var x;var B;var P;var O=z[0].blendMode;var r;s.textureCount=0;s.start=0;s.blend=O;this.tick++;for(var J=0;J<this.currentIndex;J++){var E=z[J];G=E._texture.baseTexture;if(O!==E.blendMode){O=E.blendMode;D=null;F=this.MAX_TEXTURES;this.tick++}if(D!==G){D=G;if(G._enabled!==this.tick){if(F===this.MAX_TEXTURES){this.tick++;F=0;s.size=J-s.start;s=L[t++];s.textureCount=0;s.blend=O;s.start=J}G._enabled=this.tick;G._id=F;s.textures[s.textureCount++]=G;F++}}M=E.vertexData;x=(E.tint>>16)+(E.tint&65280)+((E.tint&255)<<16)+(E.worldAlpha*255<<24);B=E._texture._uvs.uvsUint32;P=G._id;u[w++]=M[0];u[w++]=M[1];A[w++]=B[0];A[w++]=x;u[w++]=P;u[w++]=M[2];u[w++]=M[3];A[w++]=B[1];A[w++]=x;u[w++]=P;u[w++]=M[4];u[w++]=M[5];A[w++]=B[2];A[w++]=x;u[w++]=P;u[w++]=M[6];u[w++]=M[7];A[w++]=B[3];A[w++]=x;u[w++]=P}s.size=J-s.start;this.vertexCount++;if(this.vaoMax<=this.vertexCount){this.vaoMax++;r=this.shaders[1];this.vertexBuffers[this.vertexCount]=n.GLBuffer.createVertexBuffer(K,null,K.STREAM_DRAW);this.vaos[this.vertexCount]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[this.vertexCount],r.attributes.aVertexPosition,K.FLOAT,false,this.vertByteSize,0).addAttribute(this.vertexBuffers[this.vertexCount],r.attributes.aTextureCoord,K.UNSIGNED_SHORT,true,this.vertByteSize,2*4).addAttribute(this.vertexBuffers[this.vertexCount],r.attributes.aColor,K.UNSIGNED_BYTE,true,this.vertByteSize,3*4).addAttribute(this.vertexBuffers[this.vertexCount],r.attributes.aTextureId,K.FLOAT,false,this.vertByteSize,4*4)}this.vertexBuffers[this.vertexCount].upload(H.vertices,0);this.vao=this.vaos[this.vertexCount].bind();for(J=0;J<t;J++){var y=L[J];var v=y.textureCount;r=this.shaders[v-1];if(!r){r=this.shaders[v-1]=e(K,v)}this.renderer.bindShader(r);for(var I=0;I<v;I++){this.renderer.bindTexture(y.textures[I],I)}this.renderer.state.setBlendMode(y.blend);K.drawElements(K.TRIANGLES,y.size*6,K.UNSIGNED_SHORT,y.start*6*2)}this.currentIndex=0};k.prototype.start=function(){this.tick%=1000};k.prototype.stop=function(){this.flush();this.vao.unbind()};k.prototype.destroy=function(){for(var r=0;r<this.vertexCount;r++){this.vertexBuffers[r].destroy();this.vaos[r].destroy()}this.indexBuffer.destroy();this.renderer.off("prerender",this.onPrerender,this);p.prototype.destroy.call(this);for(r=0;r<this.shaders.length;r++){if(this.shaders[r]){this.shaders[r].destroy()}}this.vertexBuffers=null;this.vaos=null;this.indexBuffer=null;this.indices=null;this.sprites=null;for(r=0;r<this.buffers.length;r++){this.buffers[r].destroy()}}},{"../../const":41,"../../renderers/webgl/WebGLRenderer":79,"../../renderers/webgl/utils/ObjectRenderer":89,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":92,"../../utils/createIndicesForQuads":112,"./BatchBuffer":99,"./generateMultiTextureShader":101,"bit-twiddle":2,"pixi-gl-core":20}],101:[function(g,h,f){var i=g("../../Shader");var e=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n");function j(q,p){var l="#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vTextureId = aTextureId;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n";var o=e;o=o.replace(/%count%/gi,p);o=o.replace(/%forloop%/gi,k(p));var n=new i(q,l,o);var r=[];for(var m=0;m<p;m++){r[m]=m}n.bind();n.uniforms.uSamplers=r;return n}function k(n){var m="";m+="\n";m+="\n";for(var l=0;l<n;l++){if(l>0){m+="\nelse "}if(l<n-1){m+="if(textureId == "+l+".0)"}m+="\n{";m+="\n\tcolor = texture2D(uSamplers["+l+"], vTextureCoord);";m+="\n}"}m+="\n";m+="\n";return m}h.exports=j},{"../../Shader":40}],102:[function(h,f,j){var e=h("../sprites/Sprite"),i=h("../textures/Texture"),l=h("../math"),m=h("../utils"),n=h("../const"),k=h("./TextStyle");function g(r,p,o){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resolution=o||n.RESOLUTION;this._text=null;this._style=null;this._styleListener=null;this._font="";var q=i.fromCanvas(this.canvas);q.orig=new l.Rectangle();q.trim=new l.Rectangle();e.call(this,q);this.text=r;this.style=p}g.prototype=Object.create(e.prototype);g.prototype.constructor=g;f.exports=g;g.fontPropertiesCache={};g.fontPropertiesCanvas=document.createElement("canvas");g.fontPropertiesContext=g.fontPropertiesCanvas.getContext("2d");Object.defineProperties(g.prototype,{width:{get:function(){this.updateText(true);return Math.abs(this.scale.x)*this.texture.orig.width},set:function(p){this.updateText(true);var o=m.sign(this.scale.x)||1;this.scale.x=o*p/this.texture.orig.width;this._width=p}},height:{get:function(){this.updateText(true);return Math.abs(this.scale.y)*this._texture.orig.height},set:function(p){this.updateText(true);var o=m.sign(this.scale.x)||1;this.scale.x=o*p/this.texture.orig.width;this._width=p}},style:{get:function(){return this._style},set:function(o){if(this._style){this._style.off(n.TEXT_STYLE_CHANGED,this._onStyleChange,this)}o=o||{};if(o instanceof k){this._style=o}else{this._style=new k(o)}this._style.on(n.TEXT_STYLE_CHANGED,this._onStyleChange,this);this.dirty=true}},text:{get:function(){return this._text},set:function(o){o=o||" ";o=o.toString();if(this._text===o){return}this._text=o;this.dirty=true}}});g.prototype.updateText=function(w){if(!this.dirty&&w){return}var p=this._style;var B=(typeof p.fontSize==="number")?p.fontSize+"px":p.fontSize;this._font=p.fontStyle+" "+p.fontVariant+" "+p.fontWeight+" "+B+" "+p.fontFamily;this.context.font=this._font;var v=p.wordWrap?this.wordWrap(this._text):this._text;var D=v.split(/(?:\r\n|\r|\n)/);var u=new Array(D.length);var E=0;var s=this.determineFontProperties(this._font);var x;for(x=0;x<D.length;x++){var y=this.context.measureText(D[x]).width+((D[x].length-1)*p.letterSpacing);u[x]=y;E=Math.max(E,y)}var r=E+p.strokeThickness;if(p.dropShadow){r+=p.dropShadowDistance}this.canvas.width=Math.ceil((r+this.context.lineWidth)*this.resolution);var A=this.style.lineHeight||s.fontSize+p.strokeThickness;var C=A*D.length;if(p.dropShadow){C+=p.dropShadowDistance}this.canvas.height=Math.ceil((C+this._style.padding*2)*this.resolution);this.context.scale(this.resolution,this.resolution);if(navigator.isCocoonJS){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}this.context.font=this._font;this.context.strokeStyle=p.stroke;this.context.lineWidth=p.strokeThickness;this.context.textBaseline=p.textBaseline;this.context.lineJoin=p.lineJoin;this.context.miterLimit=p.miterLimit;var t;var q;if(p.dropShadow){if(p.dropShadowBlur>0){this.context.shadowColor=p.dropShadowColor;this.context.shadowBlur=p.dropShadowBlur}else{this.context.fillStyle=p.dropShadowColor}var z=Math.cos(p.dropShadowAngle)*p.dropShadowDistance;var o=Math.sin(p.dropShadowAngle)*p.dropShadowDistance;for(x=0;x<D.length;x++){t=p.strokeThickness/2;q=(p.strokeThickness/2+x*A)+s.ascent;if(p.align==="right"){t+=E-u[x]}else{if(p.align==="center"){t+=(E-u[x])/2}}if(p.fill){this.drawLetterSpacing(D[x],t+z,q+o+p.padding);if(p.stroke&&p.strokeThickness){this.context.strokeStyle=p.dropShadowColor;this.drawLetterSpacing(D[x],t+z,q+o+p.padding,true);this.context.strokeStyle=p.stroke}}}}this.context.fillStyle=this._generateFillStyle(p,D);for(x=0;x<D.length;x++){t=p.strokeThickness/2;q=(p.strokeThickness/2+x*A)+s.ascent;if(p.align==="right"){t+=E-u[x]}else{if(p.align==="center"){t+=(E-u[x])/2}}if(p.stroke&&p.strokeThickness){this.drawLetterSpacing(D[x],t,q+p.padding,true)}if(p.fill){this.drawLetterSpacing(D[x],t,q+p.padding)}}this.updateTexture()};g.prototype.drawLetterSpacing=function(z,v,u,r){var o=this._style;var w=o.letterSpacing;if(w===0){if(r){this.context.strokeText(z,v,u)}else{this.context.fillText(z,v,u)}return}var q=String.prototype.split.call(z,""),s=0,t,p=v;while(s<z.length){t=q[s++];if(r){this.context.strokeText(t,p,u)}else{this.context.fillText(t,p,u)}p+=this.context.measureText(t).width+w}};g.prototype.updateTexture=function(){var p=this._texture;var o=this._style;p.baseTexture.hasLoaded=true;p.baseTexture.resolution=this.resolution;p.baseTexture.realWidth=this.canvas.width;p.baseTexture.realHeight=this.canvas.height;p.baseTexture.width=this.canvas.width/this.resolution;p.baseTexture.height=this.canvas.height/this.resolution;p.trim.width=p._frame.width=this.canvas.width/this.resolution;p.trim.height=p._frame.height=this.canvas.height/this.resolution;p.trim.x=0;p.trim.y=-o.padding;p.orig.width=p._frame.width;p.orig.height=p._frame.height-o.padding*2;this._onTextureUpdate();p.baseTexture.emit("update",p.baseTexture);this.dirty=false};g.prototype.renderWebGL=function(o){this.updateText(true);e.prototype.renderWebGL.call(this,o)};g.prototype._renderCanvas=function(o){this.updateText(true);e.prototype._renderCanvas.call(this,o)};g.prototype.determineFontProperties=function(t){var w=g.fontPropertiesCache[t];if(!w){w={};var q=g.fontPropertiesCanvas;var p=g.fontPropertiesContext;p.font=t;var o=Math.ceil(p.measureText("|MÉq").width);var v=Math.ceil(p.measureText("M").width);var A=2*v;v=v*1.4|0;q.width=o;q.height=A;p.fillStyle="#f00";p.fillRect(0,0,o,A);p.font=t;p.textBaseline="alphabetic";p.fillStyle="#000";p.fillText("|MÉq",0,v);var x=p.getImageData(0,0,o,A).data;var r=x.length;var B=o*4;var u,s;var z=0;var y=false;for(u=0;u<v;u++){for(s=0;s<B;s+=4){if(x[z+s]!==255){y=true;break}}if(!y){z+=B}else{break}}w.ascent=v-u;z=r-B;y=false;for(u=A;u>v;u--){for(s=0;s<B;s+=4){if(x[z+s]!==255){y=true;break}}if(!y){z-=B}else{break}}w.descent=u-v;w.fontSize=w.ascent+w.descent;g.fontPropertiesCache[t]=w}return w};g.prototype.wordWrap=function(x){var A="";var z=x.split("\n");var p=this._style.wordWrapWidth;for(var t=0;t<z.length;t++){var s=p;var w=z[t].split(" ");for(var r=0;r<w.length;r++){var y=this.context.measureText(w[r]).width;if(this._style.breakWords&&y>p){var q=w[r].split("");for(var v=0;v<q.length;v++){var o=this.context.measureText(q[v]).width;if(o>s){A+="\n"+q[v];s=p-o}else{if(v===0){A+=" "}A+=q[v];s-=o}}}else{var u=y+this.context.measureText(" ").width;if(r===0||u>s){if(r>0){A+="\n"}A+=w[r];s=p-y}else{s-=u;A+=" "+w[r]}}}if(t<z.length-1){A+="\n"}}return A};g.prototype._calculateBounds=function(){this.updateText(true);this.calculateVertices();this._bounds.addQuad(this.vertexData)};g.prototype._onStyleChange=function(){this.dirty=true};g.prototype._generateFillStyle=function(o,x){if(!Array.isArray(o.fill)){return o.fill}else{var r;var v;var s;var t;var u;var p=this.canvas.width/this.resolution;var w=this.canvas.height/this.resolution;if(o.fillGradientType===n.TEXT_GRADIENT.LINEAR_VERTICAL){v=this.context.createLinearGradient(p/2,0,p/2,w);s=(o.fill.length+1)*x.length;t=0;for(r=0;r<x.length;r++){t+=1;for(var q=0;q<o.fill.length;q++){u=(t/s);v.addColorStop(u,o.fill[q]);t++}}}else{v=this.context.createLinearGradient(0,w/2,p,w/2);s=o.fill.length+1;t=1;for(r=0;r<o.fill.length;r++){u=t/s;v.addColorStop(u,o.fill[r]);t++}}return v}};g.prototype.destroy=function(o){e.prototype.destroy.call(this,o);this.context=null;this.canvas=null;this._style.off(n.TEXT_STYLE_CHANGED,this._onStyleChange,this);this._style=null}},{"../const":41,"../math":65,"../sprites/Sprite":96,"../textures/Texture":107,"../utils":114,"./TextStyle":103}],103:[function(h,i,g){var j=h("eventemitter3"),e=h("../const"),f=h("../utils");function l(m){j.call(this);Object.assign(this,this._defaults,m)}l.prototype=Object.create(j.prototype);l.prototype.constructor=l;i.exports=l;l.prototype._defaults={align:"left",breakWords:false,dropShadow:false,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:e.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",wordWrap:false,wordWrapWidth:100};l.prototype.clone=function(){var m={};for(var n in this._defaults){m[n]=this[n]}return new l(m)};l.prototype.reset=function(){Object.assign(this,this._defaults)};Object.defineProperties(l.prototype,{align:{get:function(){return this._align},set:function(m){if(this._align!==m){this._align=m;this.emit(e.TEXT_STYLE_CHANGED)}}},breakWords:{get:function(){return this._breakWords},set:function(m){if(this._breakWords!==m){this._breakWords=m;this.emit(e.TEXT_STYLE_CHANGED)}}},dropShadow:{get:function(){return this._dropShadow},set:function(m){if(this._dropShadow!==m){this._dropShadow=m;this.emit(e.TEXT_STYLE_CHANGED)}}},dropShadowAngle:{get:function(){return this._dropShadowAngle},set:function(m){if(this._dropShadowAngle!==m){this._dropShadowAngle=m;this.emit(e.TEXT_STYLE_CHANGED)}}},dropShadowBlur:{get:function(){return this._dropShadowBlur},set:function(m){if(this._dropShadowBlur!==m){this._dropShadowBlur=m;this.emit(e.TEXT_STYLE_CHANGED)}}},dropShadowColor:{get:function(){return this._dropShadowColor},set:function(m){var n=k(m);if(this._dropShadowColor!==n){this._dropShadowColor=n;this.emit(e.TEXT_STYLE_CHANGED)}}},dropShadowDistance:{get:function(){return this._dropShadowDistance},set:function(m){if(this._dropShadowDistance!==m){this._dropShadowDistance=m;this.emit(e.TEXT_STYLE_CHANGED)}}},fill:{get:function(){return this._fill},set:function(n){var m=k(n);if(this._fill!==m){this._fill=m;this.emit(e.TEXT_STYLE_CHANGED)}}},fillGradientType:{get:function(){return this._fillGradientType},set:function(m){if(this._fillGradientType!==m){this._fillGradientType=m;this.emit(e.TEXT_STYLE_CHANGED)}}},fontFamily:{get:function(){return this._fontFamily},set:function(m){if(this.fontFamily!==m){this._fontFamily=m;this.emit(e.TEXT_STYLE_CHANGED)}}},fontSize:{get:function(){return this._fontSize},set:function(m){if(this._fontSize!==m){this._fontSize=m;this.emit(e.TEXT_STYLE_CHANGED)}}},fontStyle:{get:function(){return this._fontStyle},set:function(m){if(this._fontStyle!==m){this._fontStyle=m;this.emit(e.TEXT_STYLE_CHANGED)}}},fontVariant:{get:function(){return this._fontVariant},set:function(m){if(this._fontVariant!==m){this._fontVariant=m;this.emit(e.TEXT_STYLE_CHANGED)}}},fontWeight:{get:function(){return this._fontWeight},set:function(m){if(this._fontWeight!==m){this._fontWeight=m;this.emit(e.TEXT_STYLE_CHANGED)}}},letterSpacing:{get:function(){return this._letterSpacing},set:function(m){if(this._letterSpacing!==m){this._letterSpacing=m;this.emit(e.TEXT_STYLE_CHANGED)}}},lineHeight:{get:function(){return this._lineHeight},set:function(m){if(this._lineHeight!==m){this._lineHeight=m;this.emit(e.TEXT_STYLE_CHANGED)}}},lineJoin:{get:function(){return this._lineJoin},set:function(m){if(this._lineJoin!==m){this._lineJoin=m;this.emit(e.TEXT_STYLE_CHANGED)}}},miterLimit:{get:function(){return this._miterLimit},set:function(m){if(this._miterLimit!==m){this._miterLimit=m;this.emit(e.TEXT_STYLE_CHANGED)}}},padding:{get:function(){return this._padding},set:function(m){if(this._padding!==m){this._padding=m;this.emit(e.TEXT_STYLE_CHANGED)}}},stroke:{get:function(){return this._stroke},set:function(n){var m=k(n);if(this._stroke!==m){this._stroke=m;this.emit(e.TEXT_STYLE_CHANGED)}}},strokeThickness:{get:function(){return this._strokeThickness},set:function(m){if(this._strokeThickness!==m){this._strokeThickness=m;this.emit(e.TEXT_STYLE_CHANGED)}}},textBaseline:{get:function(){return this._textBaseline},set:function(m){if(this._textBaseline!==m){this._textBaseline=m;this.emit(e.TEXT_STYLE_CHANGED)}}},wordWrap:{get:function(){return this._wordWrap},set:function(m){if(this._wordWrap!==m){this._wordWrap=m;this.emit(e.TEXT_STYLE_CHANGED)}}},wordWrapWidth:{get:function(){return this._wordWrapWidth},set:function(m){if(this._wordWrapWidth!==m){this._wordWrapWidth=m;this.emit(e.TEXT_STYLE_CHANGED)}}}});function k(m){if(typeof m==="number"){return f.hex2string(m)}else{if(Array.isArray(m)){for(var n=0;n<m.length;++n){if(typeof m[n]==="number"){m[n]=f.hex2string(m[n])}}}}return m}},{"../const":41,"../utils":114,eventemitter3:11}],104:[function(g,i,f){var j=g("./BaseTexture"),e=g("../const");function h(n,k,m,l){j.call(this,null,m);this.width=n||100;this.height=k||100;this.realWidth=this.width*l;this.realHeight=this.height*l;this.resolution=l||e.RESOLUTION;this.scaleMode=m||e.SCALE_MODES.DEFAULT;this.hasLoaded=true;this._glRenderTargets=[];this._canvasRenderTarget=null;this.valid=false}h.prototype=Object.create(j.prototype);h.prototype.constructor=h;i.exports=h;h.prototype.resize=function(l,k){if(l===this.width&&k===this.height){return}this.valid=(l>0&&k>0);this.width=l;this.height=k;this.realWidth=this.width*this.resolution;this.realHeight=this.height*this.resolution;if(!this.valid){return}this.emit("update",this)};h.prototype.destroy=function(){j.prototype.destroy.call(this,true);this.renderer=null}},{"../const":41,"./BaseTexture":105}],105:[function(f,e,h){var k=f("../utils"),m=f("../const"),l=f("eventemitter3"),g=f("../utils/determineCrossOrigin"),j=f("bit-twiddle");function i(p,o,n){l.call(this);this.uid=k.uid();this.touched=0;this.resolution=n||m.RESOLUTION;this.width=100;this.height=100;this.realWidth=100;this.realHeight=100;this.scaleMode=o||m.SCALE_MODES.DEFAULT;this.hasLoaded=false;this.isLoading=false;this.source=null;this.premultipliedAlpha=true;this.imageUrl=null;this.isPowerOfTwo=false;this.mipmap=m.MIPMAP_TEXTURES;this.wrapMode=m.WRAP_MODES.DEFAULT;this._glTextures=[];this._enabled=0;this._id=0;if(p){this.loadSource(p)}}i.prototype=Object.create(l.prototype);i.prototype.constructor=i;e.exports=i;i.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width;this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height;this.width=this.realWidth/this.resolution;this.height=this.realHeight/this.resolution;this.isPowerOfTwo=j.isPow2(this.realWidth)&&j.isPow2(this.realHeight);this.emit("update",this)};i.prototype.loadSource=function(p){var o=this.isLoading;this.hasLoaded=false;this.isLoading=false;if(o&&this.source){this.source.onload=null;this.source.onerror=null}this.source=p;if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height){this._sourceLoaded()}else{if(!p.getContext){this.isLoading=true;var n=this;p.onload=function(){p.onload=null;p.onerror=null;if(!n.isLoading){return}n.isLoading=false;n._sourceLoaded();n.emit("loaded",n)};p.onerror=function(){p.onload=null;p.onerror=null;if(!n.isLoading){return}n.isLoading=false;n.emit("error",n)};if(p.complete&&p.src){this.isLoading=false;p.onload=null;p.onerror=null;if(p.width&&p.height){this._sourceLoaded();if(o){this.emit("loaded",this)}}else{if(o){this.emit("error",this)}}}}}};i.prototype._sourceLoaded=function(){this.hasLoaded=true;this.update()};i.prototype.destroy=function(){if(this.imageUrl){delete k.BaseTextureCache[this.imageUrl];delete k.TextureCache[this.imageUrl];this.imageUrl=null;if(!navigator.isCocoonJS){this.source.src=""}}else{if(this.source&&this.source._pixiId){delete k.BaseTextureCache[this.source._pixiId]}}this.source=null;this.dispose()};i.prototype.dispose=function(){this.emit("dispose",this)};i.prototype.updateSourceImage=function(n){this.source.src=n;this.loadSource(this.source)};i.fromImage=function(o,n,p){var q=k.BaseTextureCache[o];if(!q){var r=new Image();if(n===undefined&&o.indexOf("data:")!==0){r.crossOrigin=g(o)}q=new i(r,p);q.imageUrl=o;r.src=o;k.BaseTextureCache[o]=q;q.resolution=k.getResolutionOfUrl(o)}return q};i.fromCanvas=function(n,o){if(!n._pixiId){n._pixiId="canvas_"+k.uid()}var p=k.BaseTextureCache[n._pixiId];if(!p){p=new i(n,o);k.BaseTextureCache[n._pixiId]=p}return p}},{"../const":41,"../utils":114,"../utils/determineCrossOrigin":113,"bit-twiddle":2,eventemitter3:11}],106:[function(f,i,e){var h=f("./BaseRenderTexture"),g=f("./Texture");function j(m,p){this.legacyRenderer=null;if(!(m instanceof h)){var o=arguments[1];var k=arguments[2];var n=arguments[3]||0;var l=arguments[4]||1;console.warn("v4 RenderTexture now expects a new BaseRenderTexture. Please use RenderTexture.create("+o+", "+k+")");this.legacyRenderer=arguments[0];p=null;m=new h(o,k,n,l)}g.call(this,m,p);this.valid=true;this._updateUvs()}j.prototype=Object.create(g.prototype);j.prototype.constructor=j;i.exports=j;j.prototype.resize=function(l,k,m){this.valid=(l>0&&k>0);this._frame.width=this.orig.width=l;this._frame.height=this.orig.height=k;if(!m){this.baseTexture.resize(l,k)}this._updateUvs()};j.create=function(n,k,m,l){return new j(new h(n,k,m,l))}},{"./BaseRenderTexture":104,"./Texture":107}],107:[function(f,e,h){var i=f("./BaseTexture"),m=f("./VideoBaseTexture"),j=f("./TextureUvs"),n=f("eventemitter3"),k=f("../math"),l=f("../utils");function g(q,r,s,o,p){n.call(this);this.noFrame=false;if(!r){this.noFrame=true;r=new k.Rectangle(0,0,1,1)}if(q instanceof g){q=q.baseTexture}this.baseTexture=q;this._frame=r;this.trim=o;this.valid=false;this.requiresUpdate=false;this._uvs=null;this.orig=s||r;this._rotate=+(p||0);if(p===true){this._rotate=2}else{if(this._rotate%2!==0){throw"attempt to use diamond-shaped UVs. If you are sure, set rotation manually"}}if(q.hasLoaded){if(this.noFrame){r=new k.Rectangle(0,0,q.width,q.height);q.on("update",this.onBaseTextureUpdated,this)}this.frame=r}else{q.once("loaded",this.onBaseTextureLoaded,this)}this._updateID=0}g.prototype=Object.create(n.prototype);g.prototype.constructor=g;e.exports=g;Object.defineProperties(g.prototype,{frame:{get:function(){return this._frame},set:function(o){this._frame=o;this.noFrame=false;if(o.x+o.width>this.baseTexture.width||o.y+o.height>this.baseTexture.height){throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this)}this.valid=o&&o.width&&o.height&&this.baseTexture.hasLoaded;if(!this.trim&&!this.rotate){this.orig=o}if(this.valid){this._updateUvs()}}},rotate:{get:function(){return this._rotate},set:function(o){this._rotate=o;if(this.valid){this._updateUvs()}}},width:{get:function(){return this.orig?this.orig.width:0}},height:{get:function(){return this.orig?this.orig.height:0}}});g.prototype.update=function(){this.baseTexture.update()};g.prototype.onBaseTextureLoaded=function(o){this._updateID++;if(this.noFrame){this.frame=new k.Rectangle(0,0,o.width,o.height)}else{this.frame=this._frame}this.baseTexture.on("update",this.onBaseTextureUpdated,this);this.emit("update",this)};g.prototype.onBaseTextureUpdated=function(o){this._updateID++;this._frame.width=o.width;this._frame.height=o.height;this.emit("update",this)};g.prototype.destroy=function(o){if(this.baseTexture){if(o){if(l.TextureCache[this.baseTexture.imageUrl]){delete l.TextureCache[this.baseTexture.imageUrl]}this.baseTexture.destroy()}this.baseTexture.off("update",this.onBaseTextureUpdated,this);this.baseTexture.off("loaded",this.onBaseTextureLoaded,this);this.baseTexture=null}this._frame=null;this._uvs=null;this.trim=null;this.orig=null;this.valid=false;this.off("dispose",this.dispose,this);this.off("update",this.update,this)};g.prototype.clone=function(){return new g(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)};g.prototype._updateUvs=function(){if(!this._uvs){this._uvs=new j()}this._uvs.set(this._frame,this.baseTexture,this.rotate);this._updateID++};g.fromImage=function(p,o,q){var r=l.TextureCache[p];if(!r){r=new g(i.fromImage(p,o,q));l.TextureCache[p]=r}return r};g.fromFrame=function(p){var o=l.TextureCache[p];if(!o){throw new Error('The frameId "'+p+'" does not exist in the texture cache')}return o};g.fromCanvas=function(o,p){return new g(i.fromCanvas(o,p))};g.fromVideo=function(p,o){if(typeof p==="string"){return g.fromVideoUrl(p,o)}else{return new g(m.fromVideo(p,o))}};g.fromVideoUrl=function(p,o){return new g(m.fromUrl(p,o))};g.from=function(p){if(typeof p==="string"){var o=l.TextureCache[p];if(!o){var q=p.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)!==null;if(q){return g.fromVideoUrl(p)}return g.fromImage(p)}return o}else{if(p instanceof HTMLCanvasElement){return g.fromCanvas(p)}else{if(p instanceof HTMLVideoElement){return g.fromVideo(p)}else{if(p instanceof i){return new g(i)}}}}};g.addTextureToCache=function(o,p){l.TextureCache[p]=o};g.removeTextureFromCache=function(p){var o=l.TextureCache[p];delete l.TextureCache[p];delete l.BaseTextureCache[p];return o};g.EMPTY=new g(new i());g.EMPTY.destroy=function(){};g.EMPTY.on=function(){};g.EMPTY.once=function(){};g.EMPTY.emit=function(){}},{"../math":65,"../utils":114,"./BaseTexture":105,"./TextureUvs":108,"./VideoBaseTexture":109,eventemitter3:11}],108:[function(g,h,f){function i(){this.x0=0;this.y0=0;this.x1=1;this.y1=0;this.x2=1;this.y2=1;this.x3=0;this.y3=1;this.uvsUint32=new Uint32Array(4)}h.exports=i;var e=g("../math/GroupD8");i.prototype.set=function(k,l,m){var o=l.width;var j=l.height;if(m){var n=k.width/2/o;var p=k.height/2/j;var r=k.x/o+n;var q=k.y/j+p;m=e.add(m,e.NW);this.x0=r+n*e.uX(m);this.y0=q+p*e.uY(m);m=e.add(m,2);this.x1=r+n*e.uX(m);this.y1=q+p*e.uY(m);m=e.add(m,2);this.x2=r+n*e.uX(m);this.y2=q+p*e.uY(m);m=e.add(m,2);this.x3=r+n*e.uX(m);this.y3=q+p*e.uY(m)}else{this.x0=k.x/o;this.y0=k.y/j;this.x1=(k.x+k.width)/o;this.y1=k.y/j;this.x2=(k.x+k.width)/o;this.y2=(k.y+k.height)/j;this.x3=k.x/o;this.y3=(k.y+k.height)/j}this.uvsUint32[0]=(((this.y0*65535)&65535)<<16)|((this.x0*65535)&65535);this.uvsUint32[1]=(((this.y1*65535)&65535)<<16)|((this.x1*65535)&65535);this.uvsUint32[2]=(((this.y2*65535)&65535)<<16)|((this.x2*65535)&65535);this.uvsUint32[3]=(((this.y3*65535)&65535)<<16)|((this.x3*65535)&65535)}},{"../math/GroupD8":61}],109:[function(h,i,g){var k=h("./BaseTexture"),f=h("../utils");function e(m,l){if(!m){throw new Error("No video source element specified.")}if((m.readyState===m.HAVE_ENOUGH_DATA||m.readyState===m.HAVE_FUTURE_DATA)&&m.width&&m.height){m.complete=true}k.call(this,m,l);this.autoUpdate=false;this._onUpdate=this._onUpdate.bind(this);this._onCanPlay=this._onCanPlay.bind(this);if(!m.complete){m.addEventListener("canplay",this._onCanPlay);m.addEventListener("canplaythrough",this._onCanPlay);m.addEventListener("play",this._onPlayStart.bind(this));m.addEventListener("pause",this._onPlayStop.bind(this))}this.__loaded=false}e.prototype=Object.create(k.prototype);e.prototype.constructor=e;i.exports=e;e.prototype._onUpdate=function(){if(this.autoUpdate){window.requestAnimationFrame(this._onUpdate);this.update()}};e.prototype._onPlayStart=function(){if(!this.autoUpdate){window.requestAnimationFrame(this._onUpdate);this.autoUpdate=true}};e.prototype._onPlayStop=function(){this.autoUpdate=false};e.prototype._onCanPlay=function(){this.hasLoaded=true;if(this.source){this.source.removeEventListener("canplay",this._onCanPlay);this.source.removeEventListener("canplaythrough",this._onCanPlay);this.width=this.source.videoWidth;this.height=this.source.videoHeight;this.source.play();if(!this.__loaded){this.__loaded=true;this.emit("loaded",this)}}};e.prototype.destroy=function(){if(this.source&&this.source._pixiId){delete f.BaseTextureCache[this.source._pixiId];delete this.source._pixiId}k.prototype.destroy.call(this)};e.fromVideo=function(n,l){if(!n._pixiId){n._pixiId="video_"+f.uid()}var m=f.BaseTextureCache[n._pixiId];if(!m){m=new e(n,l);f.BaseTextureCache[n._pixiId]=m}return m};e.fromUrl=function(l,n){var o=document.createElement("video");if(Array.isArray(l)){for(var m=0;m<l.length;++m){o.appendChild(j(l[m].src||l[m],l[m].mime))}}else{o.appendChild(j(l.src||l,l.mime))}o.load();o.play();return e.fromVideo(o,n)};e.fromUrls=e.fromUrl;function j(n,l){if(!l){l="video/"+n.substr(n.lastIndexOf(".")+1)}var m=document.createElement("source");m.src=n;m.type=l;return m}},{"../utils":114,"./BaseTexture":105}],110:[function(j,h,m){var t=j("../const"),s=j("eventemitter3"),l="tick";function e(){var v=this;this._tick=function u(w){v._requestId=null;if(v.started){v.update(w);if(v.started&&v._requestId===null&&v._emitter.listeners(l,true)){v._requestId=requestAnimationFrame(v._tick)}}};this._emitter=new s();this._requestId=null;this._maxElapsedMS=100;this.autoStart=false;this.deltaTime=1;this.elapsedMS=1/t.TARGET_FPMS;this.lastTime=0;this.speed=1;this.started=false}Object.defineProperties(e.prototype,{FPS:{get:function(){return 1000/this.elapsedMS}},minFPS:{get:function(){return 1000/this._maxElapsedMS},set:function(u){var v=Math.min(Math.max(0,u)/1000,t.TARGET_FPMS);this._maxElapsedMS=1/v}}});e.prototype._requestIfNeeded=function r(){if(this._requestId===null&&this._emitter.listeners(l,true)){this.lastTime=performance.now();this._requestId=requestAnimationFrame(this._tick)}};e.prototype._cancelIfNeeded=function i(){if(this._requestId!==null){cancelAnimationFrame(this._requestId);this._requestId=null}};e.prototype._startIfPossible=function q(){if(this.started){this._requestIfNeeded()}else{if(this.autoStart){this.start()}}};e.prototype.add=function p(v,u){this._emitter.on(l,v,u);this._startIfPossible();return this};e.prototype.addOnce=function f(v,u){this._emitter.once(l,v,u);this._startIfPossible();return this};e.prototype.remove=function n(v,u){this._emitter.off(l,v,u);if(!this._emitter.listeners(l,true)){this._cancelIfNeeded()}return this};e.prototype.start=function g(){if(!this.started){this.started=true;this._requestIfNeeded()}};e.prototype.stop=function o(){if(this.started){this.started=false;this._cancelIfNeeded()}};e.prototype.update=function k(v){var u;v=v||performance.now();if(v>this.lastTime){u=this.elapsedMS=v-this.lastTime;if(u>this._maxElapsedMS){u=this._maxElapsedMS}this.deltaTime=u*t.TARGET_FPMS*this.speed;this._emitter.emit(l,this.deltaTime)}else{this.deltaTime=this.elapsedMS=0}this.lastTime=v};h.exports=e},{"../const":41,eventemitter3:11}],111:[function(f,g,e){var i=f("./Ticker");var h=new i();h.autoStart=true;g.exports={shared:h,Ticker:i}},{"./Ticker":110}],112:[function(f,g,e){var h=function(m){var n=m*6;var o=new Uint16Array(n);for(var l=0,k=0;l<n;l+=6,k+=4){o[l+0]=k+0;o[l+1]=k+1;o[l+2]=k+2;o[l+3]=k+0;o[l+4]=k+2;o[l+5]=k+3}return o};g.exports=h},{}],113:[function(f,h,e){var j;var g=f("url");var i=function(l,m){if(l.indexOf("data:")===0){return""}m=m||window.location;if(!j){j=document.createElement("a")}j.href=l;l=g.parse(j.href);var k=(!l.port&&m.port==="")||(l.port===m.port);if(l.hostname!==m.hostname||!k||l.protocol!==m.protocol){return"anonymous"}return""};h.exports=i},{url:9}],114:[function(h,i,g){var e=h("../const");var f=i.exports={_uid:0,_saidHello:false,EventEmitter:h("eventemitter3"),pluginTarget:h("./pluginTarget"),uid:function(){return ++f._uid},hex2rgb:function(k,j){j=j||[];j[0]=(k>>16&255)/255;j[1]=(k>>8&255)/255;j[2]=(k&255)/255;return j},hex2string:function(j){j=j.toString(16);j="000000".substr(0,6-j.length)+j;return"#"+j},rgb2hex:function(j){return((j[0]*255<<16)+(j[1]*255<<8)+j[2]*255)},getResolutionOfUrl:function(k){var j=e.RETINA_PREFIX.exec(k);if(j){return parseFloat(j[1])}return 1},sayHello:function(k){if(f._saidHello){return}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var j=["\n %c %c %c Pixi.js "+e.VERSION+" - ✰ "+k+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,j)}else{if(window.console){window.console.log("Pixi.js "+e.VERSION+" - "+k+" - http://www.pixijs.com/")}}f._saidHello=true},isWebGLSupported:function(){var j={stencil:true,failIfMajorPerformanceCaveat:true};try{if(!window.WebGLRenderingContext){return false}var k=document.createElement("canvas"),o=k.getContext("webgl",j)||k.getContext("experimental-webgl",j);var n=!!(o&&o.getContextAttributes().stencil);if(o){var l=o.getExtension("WEBGL_lose_context");if(l){l.loseContext()}}o=null;return n}catch(m){return false}},sign:function(j){return j?(j<0?-1:1):0},removeItems:function(k,m,o){var n=k.length;if(m>=n||o===0){return}o=(m+o>n?n-m:o);for(var l=m,j=n-o;l<j;++l){k[l]=k[l+o]}k.length=j},TextureCache:{},BaseTextureCache:{}}},{"../const":41,"./pluginTarget":116,eventemitter3:11}],115:[function(g,h,e){var f=g("ismobilejs");var i=function(j){if(f.tablet||f.phone){return 2}else{return j}};h.exports=i},{ismobilejs:12}],116:[function(h,i,g){function e(j){j.__plugins={};j.registerPlugin=function(l,k){j.__plugins[l]=k};j.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var k in j.__plugins){this.plugins[k]=new (j.__plugins[k])(this)}};j.prototype.destroyPlugins=function(){for(var k in this.plugins){this.plugins[k].destroy();this.plugins[k]=null}this.plugins=null}}i.exports={mixin:function f(j){e(j)}}},{}],117:[function(g,f,j){var h=g("./core"),n=g("./mesh"),l=g("./particles"),i=g("./extras"),e=g("./filters"),m=g("./core/const");function k(p){var o=new Error().stack;if(typeof o==="undefined"){console.warn("Deprecation Warning: ",p)}else{o=o.split("\n").splice(3).join("\n");if(console.groupCollapsed){console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",p);console.warn(o);console.groupEnd()}else{console.warn("Deprecation Warning: ",p);console.warn(o)}}}h.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")};h.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")};Object.defineProperties(h,{Stage:{get:function(){k("You do not need to use a PIXI Stage any more, you can simply render any container.");return h.Container}},DisplayObjectContainer:{get:function(){k("DisplayObjectContainer has been shortened to Container, please use Container from now on.");return h.Container}},Strip:{get:function(){k("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on.");return n.Mesh}},Rope:{get:function(){k("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on.");return n.Rope}},ParticleContainer:{get:function(){k("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on.");return l.ParticleContainer}},MovieClip:{get:function(){k("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on.");return i.MovieClip}},TilingSprite:{get:function(){k("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on.");return i.TilingSprite}},BitmapText:{get:function(){k("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on.");return i.BitmapText}},blendModes:{get:function(){k("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on.");return h.BLEND_MODES}},scaleModes:{get:function(){k("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on.");return h.SCALE_MODES}},BaseTextureCache:{get:function(){k("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on.");return h.utils.BaseTextureCache}},TextureCache:{get:function(){k("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on.");return h.utils.TextureCache}},math:{get:function(){k("The math namespace is deprecated, please access members already accessible on PIXI.");return h}},AbstractFilter:{get:function(){k("AstractFilter has been renamed to Filter, please use PIXI.Filter");return h.Filter}},TransformManual:{get:function(){k("TransformManual has been renamed to TransformBase, please update your pixi-spine");return h.TransformBase}}});h.DisplayObject.prototype.generateTexture=function(q,p,o){k("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)");return q.generateTexture(this,p,o)};h.Graphics.prototype.generateTexture=function(p,o){k("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture");return this.generateCanvasTexture(p,o)};h.RenderTexture.prototype.render=function(r,p,o,q){this.legacyRenderer.render(r,this,o,p,!q);k("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")};h.RenderTexture.prototype.getImage=function(o){k("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)");return this.legacyRenderer.extract.image(o)};h.RenderTexture.prototype.getBase64=function(o){k("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)");return this.legacyRenderer.extract.base64(o)};h.RenderTexture.prototype.getCanvas=function(o){k("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)");return this.legacyRenderer.extract.canvas(o)};h.RenderTexture.prototype.getPixels=function(o){k("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)");return this.legacyRenderer.pixels(o)};h.Sprite.prototype.setTexture=function(o){this.texture=o;k("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")};i.BitmapText.prototype.setText=function(o){this.text=o;k("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")};h.Text.prototype.setText=function(o){this.text=o;k("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")};h.Text.prototype.setStyle=function(o){this.style=o;k("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")};Object.defineProperties(h.TextStyle.prototype,{font:{get:function(){k("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on");var o=(typeof this._fontSize==="number")?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+o+" "+this._fontFamily},set:function(o){k("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on");if(o.indexOf("italic")>1){this._fontStyle="italic"}else{if(o.indexOf("oblique")>-1){this._fontStyle="oblique"}else{this._fontStyle="normal"}}if(o.indexOf("small-caps")>-1){this._fontVariant="small-caps"}else{this._fontVariant="normal"}var r=o.split(" ");var q;var p=-1;this._fontSize=26;for(q=0;q<r.length;++q){if(r[q].match(/(px|pt|em|%)/)){p=q;this._fontSize=r[q];break}}this._fontWeight="normal";for(q=0;q<p;++q){if(r[q].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=r[q];break}}if(p>-1&&p<r.length-1){this._fontFamily="";for(q=p+1;q<r.length;++q){this._fontFamily+=r[q]+" "}this._fontFamily=this._fontFamily.slice(0,-1)}else{this._fontFamily="Arial"}this.emit(m.TEXT_STYLE_CHANGED)}}});h.Texture.prototype.setFrame=function(o){this.frame=o;k("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")};Object.defineProperties(e,{AbstractFilter:{get:function(){k("AstractFilter has been renamed to Filter, please use PIXI.Filter");return h.AbstractFilter}},SpriteMaskFilter:{get:function(){k("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on.");return h.SpriteMaskFilter}}});h.utils.uuid=function(){k("utils.uuid() is deprecated, please use utils.uid() from now on.");return h.utils.uid()};h.utils.canUseNewCanvasBlendModes=function(){k("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on");return h.CanvasTinter.canUseMultiply}},{"./core":60,"./core/const":41,"./extras":127,"./filters":138,"./mesh":155,"./particles":158}],118:[function(g,h,f){var e=g("../../core"),j=new e.Rectangle();function i(k){this.renderer=k;k.extract=this}i.prototype.constructor=i;h.exports=i;i.prototype.image=function(l){var k=new Image();k.src=this.base64(l);return k};i.prototype.base64=function(k){return this.canvas(k).toDataURL()};i.prototype.canvas=function(q){var r=this.renderer;var l;var n;var m;var p;if(q){if(q instanceof e.RenderTexture){p=q}else{p=r.generateTexture(q)}}if(p){l=p.baseTexture._canvasRenderTarget.context;n=p.baseTexture._canvasRenderTarget.resolution;m=p.frame}else{l=r.rootContext;n=r.rootResolution;m=j;m.width=this.renderer.width;m.height=this.renderer.height}var k=m.width*n;var s=m.height*n;var t=new e.CanvasRenderTarget(k,s);var o=l.getImageData(m.x*n,m.y*n,k,s);t.context.putImageData(o,0,0);return t.canvas};i.prototype.pixels=function(o){var n=this.renderer;var m;var l;var p;var k;if(o){if(o instanceof e.RenderTexture){k=o}else{k=n.generateTexture(o)}}if(k){m=k.baseTexture._canvasRenderTarget.context;l=k.baseTexture._canvasRenderTarget.resolution;p=k.frame}else{m=n.rootContext;l=n.rootResolution;p=j;p.width=n.width;p.height=n.height}return m.getImageData(0,0,p.width*l,p.height*l).data};i.prototype.destroy=function(){this.renderer.extract=null;this.renderer=null};e.CanvasRenderer.registerPlugin("extract",i)},{"../../core":60}],119:[function(f,g,e){g.exports={webGL:f("./webgl/WebGLExtract"),canvas:f("./canvas/CanvasExtract")}},{"./canvas/CanvasExtract":118,"./webgl/WebGLExtract":120}],120:[function(g,h,f){var e=g("../../core"),j=new e.Rectangle();function i(k){this.renderer=k;k.extract=this}i.prototype.constructor=i;h.exports=i;i.prototype.image=function(l){var k=new Image();k.src=this.base64(l);return k};i.prototype.base64=function(k){return this.canvas(k).toDataURL()};i.prototype.canvas=function(s){var t=this.renderer;var n;var m;var l;var w=false;var q;if(s){if(s instanceof e.RenderTexture){q=s}else{q=this.renderer.generateTexture(s)}}if(q){n=q.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID];m=n.resolution;l=q.frame;w=false}else{n=this.renderer.rootRenderTarget;m=n.resolution;w=true;l=j;l.width=n.size.width;l.height=n.size.height}var k=l.width*m;var u=l.height*m;var v=new e.CanvasRenderTarget(k,u);if(n){t.bindRenderTarget(n);var r=new Uint8Array(4*k*u);var p=t.gl;p.readPixels(l.x*m,l.y*m,k,u,p.RGBA,p.UNSIGNED_BYTE,r);var o=v.context.getImageData(0,0,k,u);o.data.set(r);v.context.putImageData(o,0,0);if(w){v.context.scale(1,-1);v.context.drawImage(v.canvas,0,-u)}}return v.canvas};i.prototype.pixels=function(r){var s=this.renderer;var n;var m;var l;var p;if(r){if(r instanceof e.RenderTexture){p=r}else{p=this.renderer.generateTexture(r)}}if(p){n=p.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID];m=n.resolution;l=p.frame}else{n=this.renderer.rootRenderTarget;m=n.resolution;l=j;l.width=n.size.width;l.height=n.size.height}var k=l.width*m;var t=l.height*m;var q=new Uint8Array(4*k*t);if(n){s.bindRenderTarget(n);var o=s.gl;o.readPixels(l.x*m,l.y*m,k,t,o.RGBA,o.UNSIGNED_BYTE,q)}return q};i.prototype.destroy=function(){this.renderer.extract=null;this.renderer=null};e.WebGLRenderer.registerPlugin("extract",i)},{"../../core":60}],121:[function(h,i,f){var e=h("../core"),g=h("../core/math/ObservablePoint");function j(l,k){e.Container.call(this);k=k||{};this.textWidth=0;this.textHeight=0;this._glyphs=[];this._font={tint:k.tint!==undefined?k.tint:16777215,align:k.align||"left",name:null,size:0};this.font=k.font;this._text=l;this.maxWidth=0;this.maxLineHeight=0;this._anchor=new g(this.makeDirty,this,0,0);this.dirty=false;this.updateText()}j.prototype=Object.create(e.Container.prototype);j.prototype.constructor=j;i.exports=j;Object.defineProperties(j.prototype,{tint:{get:function(){return this._font.tint},set:function(k){this._font.tint=(typeof k==="number"&&k>=0)?k:16777215;this.dirty=true}},align:{get:function(){return this._font.align},set:function(k){this._font.align=k||"left";this.dirty=true}},anchor:{get:function(){return this._anchor},set:function(k){if(typeof k==="number"){this._anchor.set(k)}else{this._anchor.copy(k)}}},font:{get:function(){return this._font},set:function(k){if(!k){return}if(typeof k==="string"){k=k.split(" ");this._font.name=k.length===1?k[0]:k.slice(1).join(" ");this._font.size=k.length>=2?parseInt(k[0],10):j.fonts[this._font.name].size}else{this._font.name=k.name;this._font.size=typeof k.size==="number"?k.size:parseInt(k.size,10)}this.dirty=true}},text:{get:function(){return this._text},set:function(k){k=k.toString()||" ";if(this._text===k){return}this._text=k;this.dirty=true}}});j.prototype.updateText=function(){var z=j.fonts[this._font.name];var n=new e.Point();var o=null;var u=[];var s=0;var v=0;var C=[];var r=0;var A=this._font.size/z.size;var q=-1;var t=0;for(var x=0;x<this.text.length;x++){var l=this.text.charCodeAt(x);q=/(\s)/.test(this.text.charAt(x))?x:q;if(/(?:\r\n|\r|\n)/.test(this.text.charAt(x))){C.push(s);v=Math.max(v,s);r++;n.x=0;n.y+=z.lineHeight;o=null;continue}if(q!==-1&&this.maxWidth>0&&n.x*A>this.maxWidth){e.utils.removeItems(u,q,x-q);x=q;q=-1;C.push(s);v=Math.max(v,s);r++;n.x=0;n.y+=z.lineHeight;o=null;continue}var k=z.chars[l];if(!k){continue}if(o&&k.kerning[o]){n.x+=k.kerning[o]}u.push({texture:k.texture,line:r,charCode:l,position:new e.Point(n.x+k.xOffset,n.y+k.yOffset)});s=n.x+(k.texture.width+k.xOffset);n.x+=k.xAdvance;t=Math.max(t,(k.yOffset+k.texture.height));o=l}C.push(s);v=Math.max(v,s);var w=[];for(x=0;x<=r;x++){var B=0;if(this._font.align==="right"){B=v-C[x]}else{if(this._font.align==="center"){B=(v-C[x])/2}}w.push(B)}var m=u.length;var p=this.tint;for(x=0;x<m;x++){var y=this._glyphs[x];if(y){y.texture=u[x].texture}else{y=new e.Sprite(u[x].texture);this._glyphs.push(y)}y.position.x=(u[x].position.x+w[u[x].line])*A;y.position.y=u[x].position.y*A;y.scale.x=y.scale.y=A;y.tint=p;if(!y.parent){this.addChild(y)}}for(x=m;x<this._glyphs.length;++x){this.removeChild(this._glyphs[x])}this.textWidth=v*A;this.textHeight=(n.y+z.lineHeight)*A;if(this.anchor.x!==0||this.anchor.y!==0){for(x=0;x<m;x++){this._glyphs[x].x-=this.textWidth*this.anchor.x;this._glyphs[x].y-=this.textHeight*this.anchor.y}}this.maxLineHeight=t*A};j.prototype.updateTransform=function(){this.validate();this.containerUpdateTransform()};j.prototype.getLocalBounds=function(){this.validate();return e.Container.prototype.getLocalBounds.call(this)};j.prototype.validate=function(){if(this.dirty){this.updateText();this.dirty=false}};j.prototype.makeDirty=function(){this.dirty=true};j.fonts={}},{"../core":60,"../core/math/ObservablePoint":63}],122:[function(g,h,f){var e=g("../core");function i(j){e.Sprite.call(this,j[0] instanceof e.Texture?j[0]:j[0].texture);this._textures=null;this._durations=null;this.textures=j;this.animationSpeed=1;this.loop=true;this.onComplete=null;this._currentTime=0;this.playing=false}i.prototype=Object.create(e.Sprite.prototype);i.prototype.constructor=i;h.exports=i;Object.defineProperties(i.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(k){if(k[0] instanceof e.Texture){this._textures=k;this._durations=null}else{this._textures=[];this._durations=[];for(var j=0;j<k.length;j++){this._textures.push(k[j].texture);this._durations.push(k[j].time)}}}},currentFrame:{get:function(){var j=Math.floor(this._currentTime)%this._textures.length;if(j<0){j+=this._textures.length}return j}}});i.prototype.stop=function(){if(!this.playing){return}this.playing=false;e.ticker.shared.remove(this.update,this)};i.prototype.play=function(){if(this.playing){return}this.playing=true;e.ticker.shared.add(this.update,this)};i.prototype.gotoAndStop=function(j){this.stop();this._currentTime=j;this._texture=this._textures[this.currentFrame];this._textureID=-1};i.prototype.gotoAndPlay=function(j){this._currentTime=j;this.play()};i.prototype.update=function(l){var k=this.animationSpeed*l;if(this._durations!==null){var m=this._currentTime%1*this._durations[this.currentFrame];m+=k/60*1000;while(m<0){this._currentTime--;m+=this._durations[this.currentFrame]}var j=Math.sign(this.animationSpeed*l);this._currentTime=Math.floor(this._currentTime);while(m>=this._durations[this.currentFrame]){m-=this._durations[this.currentFrame]*j;this._currentTime+=j}this._currentTime+=m/this._durations[this.currentFrame]}else{this._currentTime+=k}if(this._currentTime<0&&!this.loop){this.gotoAndStop(0);if(this.onComplete){this.onComplete()}}else{if(this._currentTime>=this._textures.length&&!this.loop){this.gotoAndStop(this._textures.length-1);if(this.onComplete){this.onComplete()}}else{this._texture=this._textures[this.currentFrame];this._textureID=-1}}};i.prototype.destroy=function(){this.stop();e.Sprite.prototype.destroy.call(this)};i.fromFrames=function(l){var j=[];for(var k=0;k<l.length;++k){j.push(e.Texture.fromFrame(l[k]))}return new i(j)};i.fromImages=function(k){var j=[];for(var l=0;l<k.length;++l){j.push(e.Texture.fromImage(k[l]))}return new i(j)}},{"../core":60}],123:[function(h,g,j){var i=h("../core"),e=new i.Point(),f=h("../core/sprites/canvas/CanvasTinter"),k=h("./webgl/TilingShader"),m=new Float32Array(4);function l(p,o,n){i.Sprite.call(this,p);this.tileScale=new i.Point(1,1);this.tilePosition=new i.Point(0,0);this._width=o||100;this._height=n||100;this._uvs=new i.TextureUvs();this._canvasPattern=null;this._glDatas=[]}l.prototype=Object.create(i.Sprite.prototype);l.prototype.constructor=l;g.exports=l;Object.defineProperties(l.prototype,{width:{get:function(){return this._width},set:function(n){this._width=n}},height:{get:function(){return this._height},set:function(n){this._height=n}}});l.prototype._onTextureUpdate=function(){return};l.prototype._renderWebGL=function(t){var u=this._texture;if(!u||!u._uvs){return}t.flush();var q=t.gl;var A=this._glDatas[t.CONTEXT_UID];if(!A){A={shader:new k(q),quad:new i.Quad(q)};this._glDatas[t.CONTEXT_UID]=A;A.quad.initVao(A.shader)}var s=A.quad.vertices;s[0]=s[6]=(this._width)*-this.anchor.x;s[1]=s[3]=this._height*-this.anchor.y;s[2]=s[4]=(this._width)*(1-this.anchor.x);s[5]=s[7]=this._height*(1-this.anchor.y);A.quad.upload();t.bindShader(A.shader);var w=u._uvs,r=u._frame.width,x=u._frame.height,p=u.baseTexture.width,y=u.baseTexture.height;var z=A.shader.uniforms.uPixelSize;z[0]=1/p;z[1]=1/y;A.shader.uniforms.uPixelSize=z;var v=A.shader.uniforms.uFrame;v[0]=w.x0;v[1]=w.y0;v[2]=w.x1-w.x0;v[3]=w.y2-w.y0;A.shader.uniforms.uFrame=v;var o=A.shader.uniforms.uTransform;o[0]=(this.tilePosition.x%(r*this.tileScale.x))/this._width;o[1]=(this.tilePosition.y%(x*this.tileScale.y))/this._height;o[2]=(p/this._width)*this.tileScale.x;o[3]=(y/this._height)*this.tileScale.y;A.shader.uniforms.uTransform=o;A.shader.uniforms.translationMatrix=this.worldTransform.toArray(true);var n=m;i.utils.hex2rgb(this.tint,n);n[3]=this.worldAlpha;A.shader.uniforms.uColor=n;t.bindTexture(this._texture,0);t.state.setBlendMode(this.blendMode);A.quad.draw()};l.prototype._renderCanvas=function(u){var v=this._texture;if(!v.baseTexture.hasLoaded){return}var q=u.context,r=this.worldTransform,s=u.resolution,o=v.baseTexture,p=(this.tilePosition.x/this.tileScale.x)%v._frame.width,n=(this.tilePosition.y/this.tileScale.y)%v._frame.height;if(!this._canvasPattern){var w=new i.CanvasRenderTarget(v._frame.width,v._frame.height);if(this.tint!==16777215){if(this.cachedTint!==this.tint){this.cachedTint=this.tint;this.tintedTexture=f.getTintedTexture(this,this.tint)}w.context.drawImage(this.tintedTexture,0,0)}else{w.context.drawImage(o.source,-v._frame.x,-v._frame.y)}this._canvasPattern=w.context.createPattern(w.canvas,"repeat")}q.globalAlpha=this.worldAlpha;q.setTransform(r.a*s,r.b*s,r.c*s,r.d*s,r.tx*s,r.ty*s);q.scale(this.tileScale.x,this.tileScale.y);q.translate(p+(this.anchor.x*-this._width),n+(this.anchor.y*-this._height));var t=u.blendModes[this.blendMode];if(t!==u.context.globalCompositeOperation){q.globalCompositeOperation=t}q.fillStyle=this._canvasPattern;q.fillRect(-p,-n,this._width/this.tileScale.x,this._height/this.tileScale.y)};l.prototype.getBounds=function(){var x=this._width;var w=this._height;var v=x*(1-this.anchor.x);var u=x*-this.anchor.x;var t=w*(1-this.anchor.y);var s=w*-this.anchor.y;var y=this.worldTransform;var L=y.a;var J=y.b;var I=y.c;var G=y.d;var M=y.tx;var K=y.ty;var C=L*u+I*s+M;var q=G*s+J*u+K;var B=L*v+I*s+M;var p=G*s+J*v+K;var A=L*v+I*t+M;var o=G*t+J*v+K;var z=L*u+I*t+M;var n=G*t+J*u+K;var H,F,E,D;H=C;H=B<H?B:H;H=A<H?A:H;H=z<H?z:H;E=q;E=p<E?p:E;E=o<E?o:E;E=n<E?n:E;F=C;F=B>F?B:F;F=A>F?A:F;F=z>F?z:F;D=q;D=p>D?p:D;D=o>D?o:D;D=n>D?n:D;var r=this._bounds;r.x=H;r.width=F-H;r.y=E;r.height=D-E;this._currentBounds=r;return r};l.prototype.containsPoint=function(o){this.worldTransform.applyInverse(o,e);var r=this._width;var n=this._height;var p=-r*this.anchor.x;var q;if(e.x>p&&e.x<p+r){q=-n*this.anchor.y;if(e.y>q&&e.y<q+n){return true}}return false};l.prototype.destroy=function(){i.Sprite.prototype.destroy.call(this);this.tileScale=null;this._tileScaleOffset=null;this.tilePosition=null;this._uvs=null};l.fromFrame=function(q,o,n){var p=i.utils.TextureCache[q];if(!p){throw new Error('The frameId "'+q+'" does not exist in the texture cache '+this)}return new l(p,o,n)};l.fromImage=function(p,r,n,o,q){return new l(i.Texture.fromImage(p,o,q),r,n)}},{"../core":60,"../core/sprites/canvas/CanvasTinter":98,"./webgl/TilingShader":128}],124:[function(j,k,i){var g=j("../core"),h=g.DisplayObject,f=new g.Matrix();h.prototype._cacheAsBitmap=false;h.prototype._cacheData=false;var e=function(){this.originalRenderWebGL=null;this.originalRenderCanvas=null;this.originalUpdateTransform=null;this.originalHitTest=null;this.originalDestroy=null;this.originalMask=null;this.originalFilterArea=null;this.sprite=null};Object.defineProperties(h.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(m){if(this._cacheAsBitmap===m){return}this._cacheAsBitmap=m;var l;if(m){if(!this._cacheData){this._cacheData=new e()}l=this._cacheData;l.originalRenderWebGL=this.renderWebGL;l.originalRenderCanvas=this.renderCanvas;l.originalUpdateTransform=this.updateTransform;l.originalGetBounds=this.getBounds;l.originalDestroy=this.destroy;l.originalContainsPoint=this.containsPoint;l.originalMask=this._mask;l.originalFilterArea=this.filterArea;this.renderWebGL=this._renderCachedWebGL;this.renderCanvas=this._renderCachedCanvas;this.destroy=this._cacheAsBitmapDestroy}else{l=this._cacheData;if(l.sprite){this._destroyCachedDisplayObject()}this.renderWebGL=l.originalRenderWebGL;this.renderCanvas=l.originalRenderCanvas;this.getBounds=l.originalGetBounds;this.destroy=l.originalDestroy;this.updateTransform=l.originalUpdateTransform;this.containsPoint=l.originalContainsPoint;this._mask=l.originalMask;this.filterArea=l.originalFilterArea}}}});h.prototype._renderCachedWebGL=function(l){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}this._initCachedDisplayObject(l);this._cacheData.sprite._transformID=-1;this._cacheData.sprite.worldAlpha=this.worldAlpha;this._cacheData.sprite._renderWebGL(l)};h.prototype._initCachedDisplayObject=function(r){if(this._cacheData&&this._cacheData.sprite){return}r.currentRenderer.flush();var q=this.getLocalBounds().clone();if(this._filters){var t=this._filters[0].padding;q.x-=t;q.y-=t;q.width+=t*2;q.height+=t*2}var p=r._activeRenderTarget;var n=r.filterManager.filterStack;var o=g.RenderTexture.create(q.width|0,q.height|0);var l=f;l.tx=-q.x;l.ty=-q.y;this.renderWebGL=this._cacheData.originalRenderWebGL;r.render(this,o,true,l,true);r.bindRenderTarget(p);r.filterManager.filterStack=n;this.renderWebGL=this._renderCachedWebGL;this.updateTransform=this.displayObjectUpdateTransform;this.getBounds=this._getCachedBounds;this._mask=null;this.filterArea=null;var s=new g.Sprite(o);s.transform.worldTransform=this.transform.worldTransform;s.anchor.x=-(q.x/q.width);s.anchor.y=-(q.y/q.height);this._cacheData.sprite=s;this.updateTransform();this.containsPoint=s.containsPoint.bind(s)};h.prototype._renderCachedCanvas=function(l){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}this._initCachedDisplayObjectCanvas(l);this._cacheData.sprite.worldAlpha=this.worldAlpha;this._cacheData.sprite.renderCanvas(l)};h.prototype._initCachedDisplayObjectCanvas=function(q){if(this._cacheData&&this._cacheData.sprite){return}var p=this.getLocalBounds();var o=q.context;var n=new g.RenderTexture.create(p.width|0,p.height|0);var l=f;this.transform.worldTransform.copy(l);l.invert();l.tx-=p.x;l.ty-=p.y;this.renderCanvas=this._cacheData.originalRenderCanvas;q.render(this,n,true,l,false);q.context=o;this.renderCanvas=this._renderCachedCanvas;this.updateTransform=this.displayObjectUpdateTransform;this.getBounds=this._getCachedBounds;this._mask=null;this.filterArea=null;var r=new g.Sprite(n);r.transform.worldTransform=this.transform.worldTransform;r.anchor.x=-(p.x/p.width);r.anchor.y=-(p.y/p.height);this.updateTransform();this._cacheData.sprite=r;this.containsPoint=r.containsPoint.bind(r)};h.prototype._getCachedBounds=function(){this._cacheData.sprite._currentBounds=null;return this._cacheData.sprite.getBounds()};h.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(true);this._cacheData.sprite=null};h.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=false;this.destroy()}},{"../core":60}],125:[function(g,h,f){var e=g("../core");e.DisplayObject.prototype.name=null;e.Container.prototype.getChildByName=function(j){for(var k=0;k<this.children.length;k++){if(this.children[k].name===j){return this.children[k]}}return null}},{"../core":60}],126:[function(g,h,f){var e=g("../core");e.DisplayObject.prototype.getGlobalPosition=function(i){i=i||new e.Point();if(this.parent){this.displayObjectUpdateTransform();i.x=this.worldTransform.tx;i.y=this.worldTransform.ty}else{i.x=this.position.x;i.y=this.position.y}return i}},{"../core":60}],127:[function(f,g,e){f("./cacheAsBitmap");f("./getChildByName");f("./getGlobalPosition");g.exports={MovieClip:f("./MovieClip"),TilingSprite:f("./TilingSprite"),BitmapText:f("./BitmapText")}},{"./BitmapText":121,"./MovieClip":122,"./TilingSprite":123,"./cacheAsBitmap":124,"./getChildByName":125,"./getGlobalPosition":126}],128:[function(f,g,e){var h=f("../../core/Shader");function i(j){h.call(this,j,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\n\nuniform vec4 uFrame;\nuniform vec4 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vec2 coord = aTextureCoord;\n    coord -= uTransform.xy;\n    coord /= uTransform.zw;\n    vTextureCoord = coord;\n}\n","#define GLSLIFY 1\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform vec4 uFrame;\nuniform vec2 uPixelSize;\n\nvoid main(void)\n{\n\n   \tvec2 coord = mod(vTextureCoord, uFrame.zw);\n   \tcoord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);\n   \tcoord += uFrame.xy;\n\n   \tvec4 sample = texture2D(uSampler, coord);\n  \tvec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n   \tgl_FragColor = sample * color ;\n}\n")}i.prototype=Object.create(h.prototype);i.prototype.constructor=i;g.exports=i},{"../../core/Shader":40}],129:[function(g,h,f){var e=g("../../core"),i=g("./BlurXFilter"),k=g("./BlurYFilter");function j(m,n,l){e.Filter.call(this);this.blurXFilter=new i();this.blurYFilter=new k();this.resolution=1;this.padding=0;this.resolution=l||1;this.quality=n||4;this.blur=m||8}j.prototype=Object.create(e.Filter.prototype);j.prototype.constructor=j;h.exports=j;j.prototype.apply=function(l,n,m){var o=l.getRenderTarget(true);this.blurXFilter.apply(l,n,o,true);this.blurYFilter.apply(l,o,m,false);l.returnRenderTarget(o)};Object.defineProperties(j.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(l){this.blurXFilter.blur=this.blurYFilter.blur=l;this.padding=Math.max(Math.abs(this.blurYFilter.strength),Math.abs(this.blurYFilter.strength))*2}},quality:{get:function(){return this.blurXFilter.quality},set:function(l){this.blurXFilter.quality=this.blurYFilter.quality=l}},blurX:{get:function(){return this.blurXFilter.blur},set:function(l){this.blurXFilter.blur=l;this.padding=Math.max(Math.abs(this.blurYFilter.strength),Math.abs(this.blurYFilter.strength))*2}},blurY:{get:function(){return this.blurYFilter.blur},set:function(l){this.blurYFilter.blur=l;this.padding=Math.max(Math.abs(this.blurYFilter.strength),Math.abs(this.blurYFilter.strength))*2}}})},{"../../core":60,"./BlurXFilter":130,"./BlurYFilter":131}],130:[function(h,i,g){var f=h("../../core");var j=h("./generateBlurVertSource");var l=h("./generateBlurFragSource");var e=h("./getMaxBlurKernelSize");function k(p,q,n){var o=j(5,true);var m=l(5);f.Filter.call(this,o,m);this.resolution=n||1;this._quality=0;this.quality=q||4;this.strength=p||8;this.firstRun=true}k.prototype=Object.create(f.Filter.prototype);k.prototype.constructor=k;i.exports=k;k.prototype.apply=function(u,t,m,s){if(this.firstRun){var p=u.renderer.gl;var v=e(p);this.vertexSrc=j(v,true);this.fragmentSrc=l(v);this.firstRun=false}this.uniforms.strength=(1/m.size.width)*(m.size.width/t.size.width);this.uniforms.strength*=this.strength;this.uniforms.strength/=this.passes;if(this.passes===1){u.applyFilter(this,t,m,s)}else{var r=u.getRenderTarget(true);var q=t;var n=r;for(var o=0;o<this.passes-1;o++){u.applyFilter(this,q,n,true);var w=n;n=q;q=w}u.applyFilter(this,q,m,s);u.returnRenderTarget(r)}};Object.defineProperties(k.prototype,{blur:{get:function(){return this.strength},set:function(m){this.padding=Math.abs(m)*2;this.strength=m}},quality:{get:function(){return this._quality},set:function(m){this._quality=m;this.passes=m}}})},{"../../core":60,"./generateBlurFragSource":132,"./generateBlurVertSource":133,"./getMaxBlurKernelSize":134}],131:[function(h,i,g){var f=h("../../core");var j=h("./generateBlurVertSource");var k=h("./generateBlurFragSource");var e=h("./getMaxBlurKernelSize");function l(p,q,n){var o=j(5,false);var m=k(5);f.Filter.call(this,o,m);this.resolution=n||1;this._quality=0;this.quality=q||4;this.strength=p||8;this.firstRun=true}l.prototype=Object.create(f.Filter.prototype);l.prototype.constructor=l;i.exports=l;l.prototype.apply=function(u,t,m,s){if(this.firstRun){var p=u.renderer.gl;var v=e(p);this.vertexSrc=j(v,false);this.fragmentSrc=k(v);this.firstRun=false}this.uniforms.strength=(1/m.size.height)*(m.size.height/t.size.height);this.uniforms.strength*=this.strength;this.uniforms.strength/=this.passes;if(this.passes===1){u.applyFilter(this,t,m,s)}else{var r=u.getRenderTarget(true);var q=t;var n=r;for(var o=0;o<this.passes-1;o++){u.applyFilter(this,q,n,true);var w=n;n=q;q=w}u.applyFilter(this,q,m,s);u.returnRenderTarget(r)}};Object.defineProperties(l.prototype,{blur:{get:function(){return this.strength},set:function(m){this.padding=Math.abs(m)*2;this.strength=m}},quality:{get:function(){return this._quality},set:function(m){this._quality=m;this.passes=m}}})},{"../../core":60,"./generateBlurFragSource":132,"./generateBlurVertSource":133,"./getMaxBlurKernelSize":134}],132:[function(h,i,f){var g={5:[0.153388,0.221461,0.250301],7:[0.071303,0.131514,0.189879,0.214607],9:[0.028532,0.067234,0.124009,0.179044,0.20236],11:[0.0093,0.028002,0.065984,0.121703,0.175713,0.198596],13:[0.002406,0.009255,0.027867,0.065666,0.121117,0.174868,0.197641],15:[0.000489,0.002403,0.009246,0.02784,0.065602,0.120999,0.174697,0.197448]};var e=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","	gl_FragColor = vec4(0.0);","	%blur%","}"].join("\n");var j=function(o){var l=g[o];var r=l.length;var s=e;var n="";var q="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";var p;for(var m=0;m<o;m++){var k=q.replace("%index%",m);p=m;if(m>=r){p=o-m-1}k=k.replace("%value%",l[p]);n+=k;n+="\n"}s=s.replace("%blur%",n);s=s.replace("%size%",o);return s};i.exports=j},{}],133:[function(f,h,e){var i=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n");var g=function(n,o){var r=Math.ceil(n/2);var m=i;var l="";var q;var p;if(o){q="vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);"}else{q="vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);"}for(var k=0;k<n;k++){var j=q.replace("%index%",k);p=k;if(k>=r){p=n-k-1}j=j.replace("%sampleIndex%",(k-(r-1))+".0");l+=j;l+="\n"}m=m.replace("%blur%",l);m=m.replace("%size%",n);return m};h.exports=g},{}],134:[function(f,g,e){var h=function(k){var j=(k.getParameter(k.MAX_VARYING_VECTORS));var i=15;while(i>j){i-=2}return i};g.exports=h},{}],135:[function(g,i,f){var e=g("../../core");function h(){e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4] * c.a;\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9] * c.a;\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14] * c.a;\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19] * c.a;\n\n//    gl_FragColor = vec4(m[0]);\n}\n");this.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}h.prototype=Object.create(e.Filter.prototype);h.prototype.constructor=h;i.exports=h;h.prototype._loadMatrix=function(k,j){j=!!j;var l=k;if(j){this._multiply(l,this.uniforms.m,k);l=this._colorMatrix(l)}this.uniforms.m=l};h.prototype._multiply=function(l,k,j){l[0]=(k[0]*j[0])+(k[1]*j[5])+(k[2]*j[10])+(k[3]*j[15]);l[1]=(k[0]*j[1])+(k[1]*j[6])+(k[2]*j[11])+(k[3]*j[16]);l[2]=(k[0]*j[2])+(k[1]*j[7])+(k[2]*j[12])+(k[3]*j[17]);l[3]=(k[0]*j[3])+(k[1]*j[8])+(k[2]*j[13])+(k[3]*j[18]);l[4]=(k[0]*j[4])+(k[1]*j[9])+(k[2]*j[14])+(k[3]*j[19]);l[5]=(k[5]*j[0])+(k[6]*j[5])+(k[7]*j[10])+(k[8]*j[15]);l[6]=(k[5]*j[1])+(k[6]*j[6])+(k[7]*j[11])+(k[8]*j[16]);l[7]=(k[5]*j[2])+(k[6]*j[7])+(k[7]*j[12])+(k[8]*j[17]);l[8]=(k[5]*j[3])+(k[6]*j[8])+(k[7]*j[13])+(k[8]*j[18]);l[9]=(k[5]*j[4])+(k[6]*j[9])+(k[7]*j[14])+(k[8]*j[19]);l[10]=(k[10]*j[0])+(k[11]*j[5])+(k[12]*j[10])+(k[13]*j[15]);l[11]=(k[10]*j[1])+(k[11]*j[6])+(k[12]*j[11])+(k[13]*j[16]);l[12]=(k[10]*j[2])+(k[11]*j[7])+(k[12]*j[12])+(k[13]*j[17]);l[13]=(k[10]*j[3])+(k[11]*j[8])+(k[12]*j[13])+(k[13]*j[18]);l[14]=(k[10]*j[4])+(k[11]*j[9])+(k[12]*j[14])+(k[13]*j[19]);l[15]=(k[15]*j[0])+(k[16]*j[5])+(k[17]*j[10])+(k[18]*j[15]);l[16]=(k[15]*j[1])+(k[16]*j[6])+(k[17]*j[11])+(k[18]*j[16]);l[17]=(k[15]*j[2])+(k[16]*j[7])+(k[17]*j[12])+(k[18]*j[17]);l[18]=(k[15]*j[3])+(k[16]*j[8])+(k[17]*j[13])+(k[18]*j[18]);l[19]=(k[15]*j[4])+(k[16]*j[9])+(k[17]*j[14])+(k[18]*j[19]);return l};h.prototype._colorMatrix=function(k){var j=new Float32Array(k);j[4]/=255;j[9]/=255;j[14]/=255;j[19]/=255;return j};h.prototype.brightness=function(j,l){var k=[j,0,0,0,0,0,j,0,0,0,0,0,j,0,0,0,0,0,1,0];this._loadMatrix(k,l)};h.prototype.greyscale=function(l,k){var j=[l,l,l,0,0,l,l,l,0,0,l,l,l,0,0,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.grayscale=h.prototype.greyscale;h.prototype.blackAndWhite=function(k){var j=[0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.hue=function(z,k){z=(z||0)/180*Math.PI;var r=Math.cos(z),A=Math.sin(z),v=Math.sqrt;var t=1/3,j=v(t);var n=r+(1-r)*t;var m=t*(1-r)-j*A;var l=t*(1-r)+j*A;var y=t*(1-r)+j*A;var x=r+t*(1-r);var u=t*(1-r)-j*A;var q=t*(1-r)-j*A;var p=t*(1-r)+j*A;var o=r+t*(1-r);var s=[n,m,l,0,0,y,x,u,0,0,q,p,o,0,0,0,0,0,1,0,];this._loadMatrix(s,k)};h.prototype.contrast=function(m,l){var k=(m||0)+1;var n=-128*(k-1);var j=[k,0,0,0,n,0,k,0,0,n,0,0,k,0,n,0,0,0,1,0];this._loadMatrix(j,l)};h.prototype.saturate=function(m,l){var j=(m||0)*2/3+1;var n=((j-1)*-0.5);var k=[j,n,n,0,0,n,j,n,0,0,n,n,j,0,0,0,0,0,1,0];this._loadMatrix(k,l)};h.prototype.desaturate=function(){this.saturate(-1)};h.prototype.negative=function(k){var j=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.sepia=function(k){var j=[0.393,0.7689999,0.18899999,0,0,0.349,0.6859999,0.16799999,0,0,0.272,0.5339999,0.13099999,0,0,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.technicolor=function(k){var j=[1.9125277891456083,-0.8545344976951645,-0.09155508482755585,0,11.793603434377337,-0.3087833385928097,1.7658908555458428,-0.10601743074722245,0,-70.35205161461398,-0.231103377548616,-0.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.polaroid=function(k){var j=[1.438,-0.062,-0.062,0,0,-0.122,1.378,-0.122,0,0,-0.016,-0.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.toBGR=function(k){var j=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.kodachrome=function(k){var j=[1.1285582396593525,-0.3967382283601348,-0.03992559172921793,0,63.72958762196502,-0.16404339962244616,1.0835251566291304,-0.05498805115633132,0,24.732407896706203,-0.16786010706155763,-0.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.browni=function(k){var j=[0.5997023498159715,0.34553243048391263,-0.2708298674538042,0,47.43192855600873,-0.037703249837783157,0.8609577587992641,0.15059552388459913,0,-36.96841498319127,0.24113635128153335,-0.07441037908422492,0.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.vintage=function(k){var j=[0.6279345635605994,0.3202183420819367,-0.03965408211312453,0,9.651285835294123,0.02578397704808868,0.6441188644374771,0.03259127616149294,0,7.462829176470591,0.0466055556782719,-0.0851232987247891,0.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.colorTone=function(r,o,n,s,k){r=r||0.2;o=o||0.15;n=n||16770432;s=s||3375104;var u=((n>>16)&255)/255;var m=((n>>8)&255)/255;var p=(n&255)/255;var q=((s>>16)&255)/255;var j=((s>>8)&255)/255;var l=(s&255)/255;var t=[0.3,0.59,0.11,0,0,u,m,p,r,0,q,j,l,o,0,u-q,m-j,p-l,0,0];this._loadMatrix(t,k)};h.prototype.night=function(j,l){j=j||0.1;var k=[j*(-2),-j,0,0,0,-j,0,j,0,0,0,j,j*2,0,0,0,0,0,1,0];this._loadMatrix(k,l)};h.prototype.predator=function(l,k){var j=[11.224130630493164*l,-4.794486999511719*l,-2.8746118545532227*l,0*l,0.40342438220977783*l,-3.6330697536468506*l,9.193157196044922*l,-2.951810836791992*l,0*l,-1.316135048866272*l,-3.2184197902679443*l,-4.2375030517578125*l,7.476448059082031*l,0*l,0.8044459223747253*l,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.lsd=function(k){var j=[2,-0.4,0.5,0,0,-0.5,2,-0.4,0,0,-0.4,-0.5,3,0,0,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.reset=function(){var j=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(j,false)};Object.defineProperties(h.prototype,{matrix:{get:function(){return this.uniforms.m},set:function(j){this.uniforms.m=j}}})},{"../../core":60}],136:[function(g,i,f){var e=g("../../core");function h(j,l){var k=new e.Matrix();j.renderable=false;e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","#define GLSLIFY 1\nvarying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n");this.maskSprite=j;this.maskMatrix=k;this.uniforms.mapSampler=j.texture;this.uniforms.filterMatrix=k.toArray(true);this.uniforms.scale={x:1,y:1};if(l===null||l===undefined){l=20}this.scale=new e.Point(l,l)}h.prototype=Object.create(e.Filter.prototype);h.prototype.constructor=h;i.exports=h;h.prototype.apply=function(j,l,k){var m=(1/k.destinationFrame.width)*(k.size.width/l.size.width);this.uniforms.filterMatrix=j.calculateSpriteMatrix(this.maskMatrix,this.maskSprite);this.uniforms.scale.x=this.scale.x*m;this.uniforms.scale.y=this.scale.y*m;j.applyFilter(this,l,k)};Object.defineProperties(h.prototype,{map:{get:function(){return this.uniforms.mapSampler},set:function(j){this.uniforms.mapSampler=j}}})},{"../../core":60}],137:[function(g,h,f){var e=g("../../core");function i(){e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'#define GLSLIFY 1\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n  \tvec2 fragCoord = vTextureCoord * filterArea.xy;\n\n  \tvec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n  \tgl_FragColor = color;\n}\n')}i.prototype=Object.create(e.Filter.prototype);i.prototype.constructor=i;h.exports=i},{"../../core":60}],138:[function(f,g,e){g.exports={FXAAFilter:f("./fxaa/FXAAFilter"),NoiseFilter:f("./noise/NoiseFilter"),DisplacementFilter:f("./displacement/DisplacementFilter"),BlurFilter:f("./blur/BlurFilter"),BlurXFilter:f("./blur/BlurXFilter"),BlurYFilter:f("./blur/BlurYFilter"),ColorMatrixFilter:f("./colormatrix/ColorMatrixFilter"),VoidFilter:f("./void/VoidFilter")}},{"./blur/BlurFilter":129,"./blur/BlurXFilter":130,"./blur/BlurYFilter":131,"./colormatrix/ColorMatrixFilter":135,"./displacement/DisplacementFilter":136,"./fxaa/FXAAFilter":137,"./noise/NoiseFilter":139,"./void/VoidFilter":140}],139:[function(g,h,f){var e=g("../../core");function i(){e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(gl_FragCoord.xy) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n");this.noise=0.5}i.prototype=Object.create(e.Filter.prototype);i.prototype.constructor=i;h.exports=i;Object.defineProperties(i.prototype,{noise:{get:function(){return this.uniforms.noise},set:function(j){this.uniforms.noise=j}}})},{"../../core":60}],140:[function(g,h,f){var e=g("../../core");function i(){e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","#define GLSLIFY 1\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n");this.glShaderKey="void"}i.prototype=Object.create(e.Filter.prototype);i.prototype.constructor=i;h.exports=i},{"../../core":60}],141:[function(f,g,e){(function(i){f("./polyfill");var h=g.exports=f("./core");h.extras=f("./extras");h.filters=f("./filters");h.interaction=f("./interaction");h.loaders=f("./loaders");h.mesh=f("./mesh");h.particles=f("./particles");h.accessibility=f("./accessibility");h.extract=f("./extract");h.prepare=f("./prepare");h.loader=new h.loaders.Loader();Object.assign(h,f("./deprecation"));i.PIXI=h}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./accessibility":39,"./core":60,"./deprecation":117,"./extract":119,"./extras":127,"./filters":138,"./interaction":144,"./loaders":147,"./mesh":155,"./particles":158,"./polyfill":164,"./prepare":167}],142:[function(h,i,f){var e=h("../core");function g(){this.global=new e.Point();this.target=null;this.originalEvent=null}g.prototype.constructor=g;i.exports=g;g.prototype.getLocalPosition=function(l,j,k){return l.worldTransform.applyInverse(k||this.global,j)}},{"../core":60}],143:[function(h,i,f){var e=h("../core"),g=h("./InteractionData"),j=h("eventemitter3");Object.assign(e.DisplayObject.prototype,h("./interactiveTarget"));function k(m,l){j.call(this);l=l||{};this.renderer=m;this.autoPreventDefault=l.autoPreventDefault!==undefined?l.autoPreventDefault:true;this.interactionFrequency=l.interactionFrequency||10;this.mouse=new g();this.mouse.global.set(-999999);this.eventData={stopped:false,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=true}};this.interactiveDataPool=[];this.interactionDOMElement=null;this.moveWhenInside=false;this.eventsAdded=false;this.onMouseUp=this.onMouseUp.bind(this);this.processMouseUp=this.processMouseUp.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.processMouseDown=this.processMouseDown.bind(this);this.onMouseMove=this.onMouseMove.bind(this);this.processMouseMove=this.processMouseMove.bind(this);this.onMouseOut=this.onMouseOut.bind(this);this.processMouseOverOut=this.processMouseOverOut.bind(this);this.onMouseOver=this.onMouseOver.bind(this);this.onTouchStart=this.onTouchStart.bind(this);this.processTouchStart=this.processTouchStart.bind(this);this.onTouchEnd=this.onTouchEnd.bind(this);this.processTouchEnd=this.processTouchEnd.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.processTouchMove=this.processTouchMove.bind(this);this.defaultCursorStyle="inherit";this.currentCursorStyle="inherit";this._tempPoint=new e.Point();this.resolution=1;this.setTargetElement(this.renderer.view,this.renderer.resolution)}k.prototype=Object.create(j.prototype);k.prototype.constructor=k;i.exports=k;k.prototype.setTargetElement=function(m,l){this.removeEvents();this.interactionDOMElement=m;this.resolution=l||1;this.addEvents()};k.prototype.addEvents=function(){if(!this.interactionDOMElement){return}e.ticker.shared.add(this.update,this);if(window.navigator.msPointerEnabled){this.interactionDOMElement.style["-ms-content-zooming"]="none";this.interactionDOMElement.style["-ms-touch-action"]="none"}window.document.addEventListener("mousemove",this.onMouseMove,true);this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,true);this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,true);this.interactionDOMElement.addEventListener("mouseover",this.onMouseOver,true);this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,true);this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,true);this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,true);window.addEventListener("mouseup",this.onMouseUp,true);this.eventsAdded=true};k.prototype.removeEvents=function(){if(!this.interactionDOMElement){return}e.ticker.shared.remove(this.update);if(window.navigator.msPointerEnabled){this.interactionDOMElement.style["-ms-content-zooming"]="";this.interactionDOMElement.style["-ms-touch-action"]=""}window.document.removeEventListener("mousemove",this.onMouseMove,true);this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,true);this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,true);this.interactionDOMElement.removeEventListener("mouseover",this.onMouseOver,true);this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,true);this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,true);this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,true);this.interactionDOMElement=null;window.removeEventListener("mouseup",this.onMouseUp,true);this.eventsAdded=false};k.prototype.update=function(l){this._deltaTime+=l;if(this._deltaTime<this.interactionFrequency){return}this._deltaTime=0;if(!this.interactionDOMElement){return}if(this.didMove){this.didMove=false;return}this.cursor=this.defaultCursorStyle;this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,true);if(this.currentCursorStyle!==this.cursor){this.currentCursorStyle=this.cursor;this.interactionDOMElement.style.cursor=this.cursor}};k.prototype.dispatchEvent=function(n,l,m){if(!m.stopped){m.target=n;m.type=l;n.emit(l,m);if(n[l]){n[l](m)}}};k.prototype.mapPositionToPoint=function(m,l,o){var n;if(!this.interactionDOMElement.parentElement){n={x:0,y:0,width:0,height:0}}else{n=this.interactionDOMElement.getBoundingClientRect()}m.x=((l-n.left)*(this.interactionDOMElement.width/n.width))/this.resolution;m.y=((o-n.top)*(this.interactionDOMElement.height/n.height))/this.resolution};k.prototype.processInteractive=function(u,s,o,r,t){if(!s||!s.visible){return false}var l=false,q=t=s.interactive||t;if(s.hitArea){q=false}if(r&&s._mask){if(!s._mask.containsPoint(u)){r=false}}if(r&&s.filterArea){if(!s.filterArea.contains(u.x,u.y)){r=false}}if(s.interactiveChildren){var n=s.children;for(var p=n.length-1;p>=0;p--){var m=n[p];if(this.processInteractive(u,m,o,r,q)){if(!m.parent){continue}l=true;q=false;r=false}}}if(t){if(r&&!l){if(s.hitArea){s.worldTransform.applyInverse(u,this._tempPoint);l=s.hitArea.contains(this._tempPoint.x,this._tempPoint.y)}else{if(s.containsPoint){l=s.containsPoint(u)}}}if(s.interactive){o(s,l)}}return l};k.prototype.onMouseDown=function(l){this.mouse.originalEvent=l;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,l.clientX,l.clientY);if(this.autoPreventDefault){this.mouse.originalEvent.preventDefault()}this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,true);var m=l.button===2||l.which===3;this.emit(m?"rightdown":"mousedown",this.eventData)};k.prototype.processMouseDown=function(o,l){var m=this.mouse.originalEvent;var n=m.button===2||m.which===3;if(l){o[n?"_isRightDown":"_isLeftDown"]=true;this.dispatchEvent(o,n?"rightdown":"mousedown",this.eventData)}};k.prototype.onMouseUp=function(l){this.mouse.originalEvent=l;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,l.clientX,l.clientY);this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,true);var m=l.button===2||l.which===3;this.emit(m?"rightup":"mouseup",this.eventData)};k.prototype.processMouseUp=function(p,m){var n=this.mouse.originalEvent;var o=n.button===2||n.which===3;var l=o?"_isRightDown":"_isLeftDown";if(m){this.dispatchEvent(p,o?"rightup":"mouseup",this.eventData);if(p[l]){p[l]=false;this.dispatchEvent(p,o?"rightclick":"click",this.eventData)}}else{if(p[l]){p[l]=false;this.dispatchEvent(p,o?"rightupoutside":"mouseupoutside",this.eventData)}}};k.prototype.onMouseMove=function(l){this.mouse.originalEvent=l;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,l.clientX,l.clientY);this.didMove=true;this.cursor=this.defaultCursorStyle;this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,true);this.emit("mousemove",this.eventData);if(this.currentCursorStyle!==this.cursor){this.currentCursorStyle=this.cursor;this.interactionDOMElement.style.cursor=this.cursor}};k.prototype.processMouseMove=function(m,l){this.processMouseOverOut(m,l);if(!this.moveWhenInside||l){this.dispatchEvent(m,"mousemove",this.eventData)}};k.prototype.onMouseOut=function(l){this.mouse.originalEvent=l;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,l.clientX,l.clientY);this.interactionDOMElement.style.cursor=this.defaultCursorStyle;this.mapPositionToPoint(this.mouse.global,l.clientX,l.clientY);this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,false);this.emit("mouseout",this.eventData)};k.prototype.processMouseOverOut=function(m,l){if(l){if(!m._over){m._over=true;this.dispatchEvent(m,"mouseover",this.eventData)}if(m.buttonMode){this.cursor=m.defaultCursor}}else{if(m._over){m._over=false;this.dispatchEvent(m,"mouseout",this.eventData)}}};k.prototype.onMouseOver=function(l){this.mouse.originalEvent=l;this.eventData.data=this.mouse;this.eventData.stopped=false;this.emit("mouseover",this.eventData)};k.prototype.onTouchStart=function(p){if(this.autoPreventDefault){p.preventDefault()}var o=p.changedTouches;var q=o.length;for(var n=0;n<q;n++){var l=o[n];var m=this.getTouchData(l);m.originalEvent=p;this.eventData.data=m;this.eventData.stopped=false;this.processInteractive(m.global,this.renderer._lastObjectRendered,this.processTouchStart,true);this.emit("touchstart",this.eventData);this.returnTouchData(m)}};k.prototype.processTouchStart=function(m,l){if(l){m._touchDown=true;this.dispatchEvent(m,"touchstart",this.eventData)}};k.prototype.onTouchEnd=function(p){if(this.autoPreventDefault){p.preventDefault()}var o=p.changedTouches;var q=o.length;for(var n=0;n<q;n++){var l=o[n];var m=this.getTouchData(l);m.originalEvent=p;this.eventData.data=m;this.eventData.stopped=false;this.processInteractive(m.global,this.renderer._lastObjectRendered,this.processTouchEnd,true);this.emit("touchend",this.eventData);this.returnTouchData(m)}};k.prototype.processTouchEnd=function(m,l){if(l){this.dispatchEvent(m,"touchend",this.eventData);if(m._touchDown){m._touchDown=false;this.dispatchEvent(m,"tap",this.eventData)}}else{if(m._touchDown){m._touchDown=false;this.dispatchEvent(m,"touchendoutside",this.eventData)}}};k.prototype.onTouchMove=function(p){if(this.autoPreventDefault){p.preventDefault()}var o=p.changedTouches;var q=o.length;for(var n=0;n<q;n++){var l=o[n];var m=this.getTouchData(l);m.originalEvent=p;this.eventData.data=m;this.eventData.stopped=false;this.processInteractive(m.global,this.renderer._lastObjectRendered,this.processTouchMove,this.moveWhenInside);this.emit("touchmove",this.eventData);this.returnTouchData(m)}};k.prototype.processTouchMove=function(m,l){if(!this.moveWhenInside||l){this.dispatchEvent(m,"touchmove",this.eventData)}};k.prototype.getTouchData=function(l){var m=this.interactiveDataPool.pop();if(!m){m=new g()}m.identifier=l.identifier;this.mapPositionToPoint(m.global,l.clientX,l.clientY);if(navigator.isCocoonJS){m.global.x=m.global.x/this.resolution;m.global.y=m.global.y/this.resolution}l.globalX=m.global.x;l.globalY=m.global.y;return m};k.prototype.returnTouchData=function(l){this.interactiveDataPool.push(l)};k.prototype.destroy=function(){this.removeEvents();this.removeAllListeners();this.renderer=null;this.mouse=null;this.eventData=null;this.interactiveDataPool=null;this.interactionDOMElement=null;this.onMouseUp=null;this.processMouseUp=null;this.onMouseDown=null;this.processMouseDown=null;this.onMouseMove=null;this.processMouseMove=null;this.onMouseOut=null;this.processMouseOverOut=null;this.onMouseOver=null;this.onTouchStart=null;this.processTouchStart=null;this.onTouchEnd=null;this.processTouchEnd=null;this.onTouchMove=null;this.processTouchMove=null;this._tempPoint=null};e.WebGLRenderer.registerPlugin("interaction",k);e.CanvasRenderer.registerPlugin("interaction",k)},{"../core":60,"./InteractionData":142,"./interactiveTarget":145,eventemitter3:11}],144:[function(f,g,e){g.exports={InteractionData:f("./InteractionData"),InteractionManager:f("./InteractionManager"),interactiveTarget:f("./interactiveTarget")}},{"./InteractionData":142,"./InteractionManager":143,"./interactiveTarget":145}],145:[function(f,g,e){var h={interactive:false,interactiveChildren:true,hitArea:null,buttonMode:false,defaultCursor:"pointer",_over:false,_isLeftDown:false,_isRightDown:false,_touchDown:false};g.exports=h},{}],146:[function(g,h,f){var k=g("resource-loader").Resource,e=g("../core"),i=g("../extras"),j=g("path");function l(o,v){var p={};var n=o.data.getElementsByTagName("info")[0];var t=o.data.getElementsByTagName("common")[0];p.font=n.getAttribute("face");p.size=parseInt(n.getAttribute("size"),10);p.lineHeight=parseInt(t.getAttribute("lineHeight"),10);p.chars={};var u=o.data.getElementsByTagName("char");for(var q=0;q<u.length;q++){var y=parseInt(u[q].getAttribute("id"),10);var x=new e.Rectangle(parseInt(u[q].getAttribute("x"),10)+v.frame.x,parseInt(u[q].getAttribute("y"),10)+v.frame.y,parseInt(u[q].getAttribute("width"),10),parseInt(u[q].getAttribute("height"),10));p.chars[y]={xOffset:parseInt(u[q].getAttribute("xoffset"),10),yOffset:parseInt(u[q].getAttribute("yoffset"),10),xAdvance:parseInt(u[q].getAttribute("xadvance"),10),kerning:{},texture:new e.Texture(v.baseTexture,x)}}var w=o.data.getElementsByTagName("kerning");for(q=0;q<w.length;q++){var s=parseInt(w[q].getAttribute("first"),10);var m=parseInt(w[q].getAttribute("second"),10);var r=parseInt(w[q].getAttribute("amount"),10);if(p.chars[m]){p.chars[m].kerning[s]=r}}o.bitmapFont=p;i.BitmapText.fonts[p.font]=p}h.exports=function(){return function(q,o){if(!q.data||!q.isXml){return o()}if(q.data.getElementsByTagName("page").length===0||q.data.getElementsByTagName("info").length===0||q.data.getElementsByTagName("info")[0].getAttribute("face")===null){return o()}var n=!q.isDataUrl?j.dirname(q.url):"";if(q.isDataUrl){if(n==="."){n=""}if(this.baseUrl&&n){if(this.baseUrl.charAt(this.baseUrl.length-1)==="/"){n+="/"}n=n.replace(this.baseUrl,"")}}if(n&&n.charAt(n.length-1)!=="/"){n+="/"}var m=n+q.data.getElementsByTagName("page")[0].getAttribute("file");if(e.utils.TextureCache[m]){l(q,e.utils.TextureCache[m]);o()}else{var p={crossOrigin:q.crossOrigin,loadType:k.LOAD_TYPE.IMAGE,metadata:q.metadata.imageMetadata};this.add(q.name+"_image",m,p,function(r){l(q,r.texture);o()})}}}},{"../core":60,"../extras":127,path:3,"resource-loader":34}],147:[function(f,g,e){g.exports={Loader:f("./loader"),bitmapFontParser:f("./bitmapFontParser"),spritesheetParser:f("./spritesheetParser"),textureParser:f("./textureParser"),Resource:f("resource-loader").Resource}},{"./bitmapFontParser":146,"./loader":148,"./spritesheetParser":149,"./textureParser":150,"resource-loader":34}],148:[function(i,h,k){var m=i("resource-loader"),j=i("./textureParser"),g=i("./spritesheetParser"),l=i("./bitmapFontParser");function f(p,o){m.call(this,p,o);for(var n=0;n<f._pixiMiddleware.length;++n){this.use(f._pixiMiddleware[n]())}}f.prototype=Object.create(m.prototype);f.prototype.constructor=f;h.exports=f;f._pixiMiddleware=[m.middleware.parsing.blob,j,g,l];f.addPixiMiddleware=function(n){f._pixiMiddleware.push(n)};var e=m.Resource;e.setExtensionXhrType("fnt",e.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":146,"./spritesheetParser":149,"./textureParser":150,"resource-loader":34}],149:[function(g,h,f){var l=g("resource-loader").Resource,k=g("path"),e=g("../core"),j=g("async");var i=1000;h.exports=function(){return function(o,m){var p;var q=o.name+"_image";if(!o.data||!o.isJson||!o.data.frames||this.resources[q]){return m()}var n={crossOrigin:o.crossOrigin,loadType:l.LOAD_TYPE.IMAGE,metadata:o.metadata.imageMetadata};if(o.isDataUrl){p=o.data.meta.image}else{p=k.dirname(o.url.replace(this.baseUrl,""))+"/"+o.data.meta.image}this.add(q,p,n,function(w){o.textures={};var y=o.data.frames;var v=Object.keys(y);var u=e.utils.getResolutionOfUrl(o.url);var t=0;function s(A,C){var G=A;while(G-A<C&&G<v.length){var B=v[G];var D=y[B].frame;if(D){var E=null;var z=null;var F=new e.Rectangle(0,0,y[B].sourceSize.w/u,y[B].sourceSize.h/u);if(y[B].rotated){E=new e.Rectangle(D.x/u,D.y/u,D.h/u,D.w/u)}else{E=new e.Rectangle(D.x/u,D.y/u,D.w/u,D.h/u)}if(y[B].trimmed){z=new e.Rectangle(y[B].spriteSourceSize.x/u,y[B].spriteSourceSize.y/u,y[B].spriteSourceSize.w/u,y[B].spriteSourceSize.h/u)}o.textures[B]=new e.Texture(w.texture.baseTexture,E,F,z,y[B].rotated?2:0);e.utils.TextureCache[B]=o.textures[B]}G++}}function r(){return t*i<v.length}function x(z){s(t*i,i);t++;setTimeout(z,0)}if(v.length<=i){s(0,i);m()}else{j.whilst(r,x,m)}})}}},{"../core":60,async:1,path:3,"resource-loader":34}],150:[function(g,h,f){var e=g("../core");h.exports=function(){return function(k,i){if(k.data&&k.isImage){var j=new e.BaseTexture(k.data,null,e.utils.getResolutionOfUrl(k.url));j.imageUrl=k.url;k.texture=new e.Texture(j);e.utils.BaseTextureCache[k.url]=j;e.utils.TextureCache[k.url]=k.texture}i()}}},{"../core":60}],151:[function(g,f,j){var h=g("../core"),l=g("pixi-gl-core"),m=g("./webgl/MeshShader"),e=new h.Point(),k=new h.Polygon();function i(p,n,o,r,q){h.Container.call(this);this._texture=null;this.uvs=o||new Float32Array([0,0,1,0,1,1,0,1]);this.vertices=n||new Float32Array([0,0,100,0,100,100,0,100]);this.indices=r||new Uint16Array([0,1,3,2]);this.dirty=true;this.indexDirty=true;this.blendMode=h.BLEND_MODES.NORMAL;this.canvasPadding=0;this.drawMode=q||i.DRAW_MODES.TRIANGLE_MESH;this.texture=p;this.shader=null;this.tintRgb=new Float32Array([1,1,1]);this._glDatas=[]}i.prototype=Object.create(h.Container.prototype);i.prototype.constructor=i;f.exports=i;Object.defineProperties(i.prototype,{texture:{get:function(){return this._texture},set:function(n){if(this._texture===n){return}this._texture=n;if(n){if(n.baseTexture.hasLoaded){this._onTextureUpdate()}else{n.once("update",this._onTextureUpdate,this)}}}},tint:{get:function(){return h.utils.rgb2hex(this.tintRgb)},set:function(n){this.tintRgb=h.utils.hex2rgb(n,this.tintRgb)}}});i.prototype._renderWebGL=function(p){p.flush();var q=p.gl;var n=this._glDatas[p.CONTEXT_UID];if(!n){n={shader:new m(q),vertexBuffer:l.GLBuffer.createVertexBuffer(q,this.vertices,q.STREAM_DRAW),uvBuffer:l.GLBuffer.createVertexBuffer(q,this.uvs,q.STREAM_DRAW),indexBuffer:l.GLBuffer.createIndexBuffer(q,this.indices,q.STATIC_DRAW),vao:new l.VertexArrayObject(q)};n.vao=new l.VertexArrayObject(q).addIndex(n.indexBuffer).addAttribute(n.vertexBuffer,n.shader.attributes.aVertexPosition,q.FLOAT,false,2*4,0).addAttribute(n.uvBuffer,n.shader.attributes.aTextureCoord,q.FLOAT,false,2*4,0);this._glDatas[p.CONTEXT_UID]=n;this.indexDirty=false}if(this.dirty){this.dirty=false;n.uvBuffer.upload()}if(this.indexDirty){this.indexDirty=false;n.indexBuffer.upload()}n.vertexBuffer.upload();p.bindShader(n.shader);p.bindTexture(this._texture,0);p.state.setBlendMode(this.blendMode);n.shader.uniforms.translationMatrix=this.worldTransform.toArray(true);n.shader.uniforms.alpha=this.worldAlpha;n.shader.uniforms.tint=this.tintRgb;var o=this.drawMode===i.DRAW_MODES.TRIANGLE_MESH?q.TRIANGLE_STRIP:q.TRIANGLES;n.vao.bind().draw(o,this.indices.length).unbind()};i.prototype._renderCanvas=function(q){var p=q.context;var n=this.worldTransform;var o=q.resolution;if(q.roundPixels){p.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,(n.tx*o)|0,(n.ty*o)|0)}else{p.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o,n.ty*o)}if(this.drawMode===i.DRAW_MODES.TRIANGLE_MESH){this._renderCanvasTriangleMesh(p)}else{this._renderCanvasTriangles(p)}};i.prototype._renderCanvasTriangleMesh=function(r){var o=this.vertices;var q=this.uvs;var s=o.length/2;for(var p=0;p<s-2;p++){var n=p*2;this._renderCanvasDrawTriangle(r,o,q,n,(n+2),(n+4))}};i.prototype._renderCanvasTriangles=function(n){var s=this.vertices;var p=this.uvs;var v=this.indices;var o=v.length;for(var q=0;q<o;q+=3){var u=v[q]*2,t=v[q+1]*2,r=v[q+2]*2;this._renderCanvasDrawTriangle(n,s,p,u,t,r)}};i.prototype._renderCanvasDrawTriangle=function(S,p,K,Q,P,N){var C=this._texture.baseTexture;var u=C.source;var v=C.width;var M=C.height;var B=p[Q],A=p[P],z=p[N];var n=p[Q+1],W=p[P+1],V=p[N+1];var y=K[Q]*C.width,x=K[P]*C.width,w=K[N]*C.width;var U=K[Q+1]*C.height,T=K[P+1]*C.height,R=K[N+1]*C.height;if(this.canvasPadding>0){var s=this.canvasPadding/this.worldTransform.a;var q=this.canvasPadding/this.worldTransform.d;var r=(B+A+z)/3;var o=(n+W+V)/3;var O=B-r;var L=n-o;var t=Math.sqrt(O*O+L*L);B=r+(O/t)*(t+s);n=o+(L/t)*(t+q);O=A-r;L=W-o;t=Math.sqrt(O*O+L*L);A=r+(O/t)*(t+s);W=o+(L/t)*(t+q);O=z-r;L=V-o;t=Math.sqrt(O*O+L*L);z=r+(O/t)*(t+s);V=o+(L/t)*(t+q)}S.save();S.beginPath();S.moveTo(B,n);S.lineTo(A,W);S.lineTo(z,V);S.closePath();S.clip();var J=(y*T)+(U*w)+(x*R)-(T*w)-(U*x)-(y*R);var I=(B*T)+(U*z)+(A*R)-(T*z)-(U*A)-(B*R);var H=(y*A)+(B*w)+(x*z)-(A*w)-(B*x)-(y*z);var G=(y*T*z)+(U*A*w)+(B*x*R)-(B*T*w)-(U*x*z)-(y*A*R);var F=(n*T)+(U*V)+(W*R)-(T*V)-(U*W)-(n*R);var E=(y*W)+(n*w)+(x*V)-(W*w)-(n*x)-(y*V);var D=(y*T*V)+(U*W*w)+(n*x*R)-(n*T*w)-(U*x*V)-(y*W*R);S.transform(I/J,F/J,H/J,E/J,G/J,D/J);S.drawImage(u,0,0,v*C.resolution,M*C.resolution,0,0,v,M);S.restore()};i.prototype.renderMeshFlat=function(s){var o=this.context;var v=s.vertices;var q=v.length/2;o.beginPath();for(var t=1;t<q-2;t++){var u=t*2;var r=v[u],p=v[u+2],n=v[u+4];var y=v[u+1],x=v[u+3],w=v[u+5];o.moveTo(r,y);o.lineTo(p,x);o.lineTo(n,w)}o.fillStyle="#FF0000";o.fill();o.closePath()};i.prototype._onTextureUpdate=function(){};i.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)};i.prototype.containsPoint=function(u){if(!this.getBounds().contains(u.x,u.y)){return false}this.worldTransform.applyInverse(u,e);var s=this.vertices;var v=k.points;var w=this.indices;var q=this.indices.length;var n=this.drawMode===i.DRAW_MODES.TRIANGLES?3:1;for(var o=0;o+2<q;o+=n){var t=w[o]*2,r=w[o+1]*2,p=w[o+2]*2;v[0]=s[t];v[1]=s[t+1];v[2]=s[r];v[3]=s[r+1];v[4]=s[p];v[5]=s[p+1];if(k.contains(e.x,e.y)){return true}}return false};i.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":60,"./webgl/MeshShader":156,"pixi-gl-core":20}],152:[function(f,g,e){var j=10;var i=f("./Plane");function h(m,o,l,p,n){i.call(this,m,4,4);var k=this.uvs;k[6]=k[14]=k[22]=k[30]=1;k[25]=k[27]=k[29]=k[31]=1;this._origWidth=m.width;this._origHeight=m.height;this._uvw=1/this._origWidth;this._uvh=1/this._origHeight;this.width=m.width;this.height=m.height;k[2]=k[10]=k[18]=k[26]=this._uvw*o;k[4]=k[12]=k[20]=k[28]=1-this._uvw*p;k[9]=k[11]=k[13]=k[15]=this._uvh*l;k[17]=k[19]=k[21]=k[23]=1-this._uvh*n;this.leftWidth=typeof o!=="undefined"?o:j;this.rightWidth=typeof p!=="undefined"?p:j;this.topHeight=typeof l!=="undefined"?l:j;this.bottomHeight=typeof n!=="undefined"?n:j}h.prototype=Object.create(i.prototype);h.prototype.constructor=h;g.exports=h;Object.defineProperties(h.prototype,{width:{get:function(){return this._width},set:function(k){this._width=k;this.updateVerticalVertices()}},height:{get:function(){return this._height},set:function(k){this._height=k;this.updateHorizontalVertices()}},leftWidth:{get:function(){return this._leftWidth},set:function(m){this._leftWidth=m;var l=this.uvs;var k=this.vertices;l[2]=l[10]=l[18]=l[26]=this._uvw*m;k[2]=k[10]=k[18]=k[26]=m;this.dirty=true}},rightWidth:{get:function(){return this._rightWidth},set:function(m){this._rightWidth=m;var l=this.uvs;var k=this.vertices;l[4]=l[12]=l[20]=l[28]=1-this._uvw*m;k[4]=k[12]=k[20]=k[28]=this._width-m;this.dirty=true}},topHeight:{get:function(){return this._topHeight},set:function(m){this._topHeight=m;var l=this.uvs;var k=this.vertices;l[9]=l[11]=l[13]=l[15]=this._uvh*m;k[9]=k[11]=k[13]=k[15]=m;this.dirty=true}},bottomHeight:{get:function(){return this._bottomHeight},set:function(m){this._bottomHeight=m;var l=this.uvs;var k=this.vertices;l[17]=l[19]=l[21]=l[23]=1-this._uvh*m;k[17]=k[19]=k[21]=k[23]=this._height-m;this.dirty=true}}});h.prototype.updateHorizontalVertices=function(){var k=this.vertices;k[9]=k[11]=k[13]=k[15]=this._topHeight;k[17]=k[19]=k[21]=k[23]=this._height-this._bottomHeight;k[25]=k[27]=k[29]=k[31]=this._height};h.prototype.updateVerticalVertices=function(){var k=this.vertices;k[2]=k[10]=k[18]=k[26]=this._leftWidth;k[4]=k[12]=k[20]=k[28]=this._width-this._rightWidth;k[6]=k[14]=k[22]=k[30]=this._width};h.prototype._renderCanvas=function(r){var o=r.context;var m=this.worldTransform;var n=r.resolution;if(r.roundPixels){o.setTransform(m.a*n,m.b*n,m.c*n,m.d*n,(m.tx*n)|0,(m.ty*n)|0)}else{o.setTransform(m.a*n,m.b*n,m.c*n,m.d*n,m.tx*n,m.ty*n)}var q=this._texture.baseTexture;var k=q.source;var l=q.width;var p=q.height;this.drawSegment(o,k,l,p,0,1,10,11);this.drawSegment(o,k,l,p,2,3,12,13);this.drawSegment(o,k,l,p,4,5,14,15);this.drawSegment(o,k,l,p,8,9,18,19);this.drawSegment(o,k,l,p,10,11,20,21);this.drawSegment(o,k,l,p,12,13,22,23);this.drawSegment(o,k,l,p,16,17,26,27);this.drawSegment(o,k,l,p,18,19,28,29);this.drawSegment(o,k,l,p,20,21,30,31)};h.prototype.drawSegment=function(m,o,y,r,n,v,l,u){var p=this.uvs;var s=this.vertices;var x=(p[l]-p[n])*y;var q=(p[u]-p[v])*r;var k=s[l]-s[n];var t=s[u]-s[v];if(x<1){x=1}if(q<1){q=1}if(k<1){k=1}if(t<1){t=1}m.drawImage(o,p[n]*y,p[v]*r,x,q,s[n],s[v],k,t)}},{"./Plane":153}],153:[function(f,g,e){var i=f("./Mesh");function h(j,l,k){i.call(this,j);this._ready=true;this.segmentsX=l||10;this.segmentsY=k||10;this.drawMode=i.DRAW_MODES.TRIANGLES;this.refresh()}h.prototype=Object.create(i.prototype);h.prototype.constructor=h;g.exports=h;h.prototype.refresh=function(){var E=this.segmentsX*this.segmentsY;var D=[];var n=[];var q=[];var k=[];var u=this.texture;var t=this.segmentsX-1;var A=this.segmentsY-1;var C=0;var w=u.width/t;var v=u.height/A;for(C=0;C<E;C++){var p=(C%this.segmentsX);var m=((C/this.segmentsX)|0);D.push((p*w),(m*v));q.push(u._uvs.x0+(u._uvs.x1-u._uvs.x0)*(p/(this.segmentsX-1)),u._uvs.y0+(u._uvs.y3-u._uvs.y0)*(m/(this.segmentsY-1)))}var z=t*A;for(C=0;C<z;C++){var j=C%t;var l=(C/t)|0;var B=(l*this.segmentsX)+j;var s=(l*this.segmentsX)+j+1;var r=((l+1)*this.segmentsX)+j;var o=((l+1)*this.segmentsX)+j+1;k.push(B,s,r);k.push(s,o,r)}this.vertices=new Float32Array(D);this.uvs=new Float32Array(q);this.colors=new Float32Array(n);this.indices=new Uint16Array(k);this.indexDirty=true};h.prototype._onTextureUpdate=function(){i.prototype._onTextureUpdate.call(this);if(this._ready){this.refresh()}}},{"./Mesh":151}],154:[function(g,i,f){var j=g("./Mesh");var e=g("../core");function h(l,k){j.call(this,l);this.points=k;this.vertices=new Float32Array(k.length*4);this.uvs=new Float32Array(k.length*4);this.colors=new Float32Array(k.length*2);this.indices=new Uint16Array(k.length*2);this._ready=true;this.refresh()}h.prototype=Object.create(j.prototype);h.prototype.constructor=h;i.exports=h;h.prototype.refresh=function(){var t=this.points;if(t.length<1||!this._texture._uvs){return}var m=this.uvs;var v=this.indices;var k=this.colors;var u=this._texture._uvs;var l=new e.Point(u.x0,u.y0);var q=new e.Point(u.x2-u.x0,u.y2-u.y0);m[0]=0+l.x;m[1]=0+l.y;m[2]=0+l.x;m[3]=1*q.y+l.y;k[0]=1;k[1]=1;v[0]=0;v[1]=1;var r=t.length,s,p,o;for(var n=1;n<r;n++){s=t[n];p=n*4;o=n/(r-1);m[p]=o*q.x+l.x;m[p+1]=0+l.y;m[p+2]=o*q.x+l.x;m[p+3]=1*q.y+l.y;p=n*2;k[p]=1;k[p+1]=1;p=n*2;v[p]=p;v[p+1]=p+1}this.dirty=true;this.indexDirty=true};h.prototype._onTextureUpdate=function(){j.prototype._onTextureUpdate.call(this);if(this._ready){this.refresh()}};h.prototype.updateTransform=function(){var u=this.points;if(u.length<1){return}var s=u[0];var q;var w=0;var v=0;var o=this.vertices;var r=u.length,t,n,p,k,m;for(var l=0;l<r;l++){t=u[l];n=l*4;if(l<u.length-1){q=u[l+1]}else{q=t}v=-(q.x-s.x);w=q.y-s.y;p=(1-(l/(r-1)))*10;if(p>1){p=1}k=Math.sqrt(w*w+v*v);m=this._texture.height/2;w/=k;v/=k;w*=m;v*=m;o[n]=t.x+w;o[n+1]=t.y+v;o[n+2]=t.x-w;o[n+3]=t.y-v;s=t}this.containerUpdateTransform()}},{"../core":60,"./Mesh":151}],155:[function(f,g,e){g.exports={Mesh:f("./Mesh"),Plane:f("./Plane"),NineSlicePlane:f("./NineSlicePlane"),Rope:f("./Rope"),MeshShader:f("./webgl/MeshShader")}},{"./Mesh":151,"./NineSlicePlane":152,"./Plane":153,"./Rope":154,"./webgl/MeshShader":156}],156:[function(f,g,e){var h=f("../../core/Shader");function i(j){h.call(this,j,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["varying vec2 vTextureCoord;","uniform float alpha;","uniform vec3 tint;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);","}"].join("\n"))}i.prototype=Object.create(h.prototype);i.prototype.constructor=i;g.exports=i},{"../../core/Shader":40}],157:[function(g,h,f){var e=g("../core");function i(m,l,k){e.Container.call(this);k=k||15000;m=m||15000;var j=16384;if(k>j){k=j}if(k>m){k=m}this._properties=[false,true,false,false,false];this._maxSize=m;this._batchSize=k;this._glBuffers=[];this._bufferToUpdate=0;this.interactiveChildren=false;this.blendMode=e.BLEND_MODES.NORMAL;this.roundPixels=true;this.baseTexture=null;this.setProperties(l)}i.prototype=Object.create(e.Container.prototype);i.prototype.constructor=i;h.exports=i;i.prototype.setProperties=function(j){if(j){this._properties[0]="scale" in j?!!j.scale:this._properties[0];this._properties[1]="position" in j?!!j.position:this._properties[1];this._properties[2]="rotation" in j?!!j.rotation:this._properties[2];this._properties[3]="uvs" in j?!!j.uvs:this._properties[3];this._properties[4]="alpha" in j?!!j.alpha:this._properties[4]}};i.prototype.updateTransform=function(){this.displayObjectUpdateTransform()};i.prototype.renderWebGL=function(j){if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable){return}if(!this.baseTexture){this.baseTexture=this.children[0]._texture.baseTexture;if(!this.baseTexture.hasLoaded){this.baseTexture.once("update",function(){this.onChildrenChange(0)},this)}}j.setObjectRenderer(j.plugins.particle);j.plugins.particle.render(this)};i.prototype.onChildrenChange=function(k){var j=Math.floor(k/this._batchSize);if(j<this._bufferToUpdate){this._bufferToUpdate=j}};i.prototype.renderCanvas=function(v){if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable){return}var j=v.context;var n=this.worldTransform;var w=true;var u=0;var t=0;var p=0;var m=0;var s=v.blendModes[this.blendMode];if(s!==j.globalCompositeOperation){j.globalCompositeOperation=s}j.globalAlpha=this.worldAlpha;this.displayObjectUpdateTransform();for(var q=0;q<this.children.length;++q){var l=this.children[q];if(!l.visible){continue}var k=l.texture.frame;j.globalAlpha=this.worldAlpha*l.alpha;if(l.rotation%(Math.PI*2)===0){if(w){j.setTransform(n.a,n.b,n.c,n.d,n.tx*v.resolution,n.ty*v.resolution);w=false}u=((l.anchor.x)*(-k.width*l.scale.x)+l.position.x+0.5);t=((l.anchor.y)*(-k.height*l.scale.y)+l.position.y+0.5);p=k.width*l.scale.x;m=k.height*l.scale.y}else{if(!w){w=true}l.displayObjectUpdateTransform();var r=l.worldTransform;if(v.roundPixels){j.setTransform(r.a,r.b,r.c,r.d,(r.tx*v.resolution)|0,(r.ty*v.resolution)|0)}else{j.setTransform(r.a,r.b,r.c,r.d,r.tx*v.resolution,r.ty*v.resolution)}u=((l.anchor.x)*(-k.width)+0.5);t=((l.anchor.y)*(-k.height)+0.5);p=k.width;m=k.height}var o=l.texture.baseTexture.resolution;j.drawImage(l.texture.baseTexture.source,k.x*o,k.y*o,k.width*o,k.height*o,u*o,t*o,p*o,m*o)}};i.prototype.destroy=function(){e.Container.prototype.destroy.apply(this,arguments);if(this._buffers){for(var j=0;j<this._buffers.length;++j){this._buffers[j].destroy()}}this._properties=null;this._buffers=null}},{"../core":60}],158:[function(f,g,e){g.exports={ParticleContainer:f("./ParticleContainer"),ParticleRenderer:f("./webgl/ParticleRenderer")}},{"./ParticleContainer":157,"./webgl/ParticleRenderer":160}],159:[function(f,g,e){var i=f("pixi-gl-core"),j=f("../../core/utils/createIndicesForQuads");function h(p,m,o,l){this.gl=p;this.vertSize=2;this.vertByteSize=this.vertSize*4;this.size=l;this.dynamicProperties=[];this.staticProperties=[];for(var k=0;k<m.length;k++){var n=m[k];n={attribute:n.attribute,size:n.size,uploadFunction:n.uploadFunction,offset:n.offset};if(o[k]){this.dynamicProperties.push(n)}else{this.staticProperties.push(n)}}this.staticStride=0;this.staticBuffer=null;this.staticData=null;this.dynamicStride=0;this.dynamicBuffer=null;this.dynamicData=null;this.initBuffers()}h.prototype.constructor=h;g.exports=h;h.prototype.initBuffers=function(){var o=this.gl;var k;var m;var n=0;this.indices=j(this.size);this.indexBuffer=i.GLBuffer.createIndexBuffer(o,this.indices,o.STATIC_DRAW);this.dynamicStride=0;for(k=0;k<this.dynamicProperties.length;k++){m=this.dynamicProperties[k];m.offset=n;n+=m.size;this.dynamicStride+=m.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4);this.dynamicBuffer=i.GLBuffer.createVertexBuffer(o,this.dynamicData,o.STREAM_DRAW);var l=0;this.staticStride=0;for(k=0;k<this.staticProperties.length;k++){m=this.staticProperties[k];m.offset=l;l+=m.size;this.staticStride+=m.size}this.staticData=new Float32Array(this.size*this.staticStride*4);this.staticBuffer=i.GLBuffer.createVertexBuffer(o,this.staticData,o.STATIC_DRAW);this.vao=new i.VertexArrayObject(o).addIndex(this.indexBuffer);for(k=0;k<this.dynamicProperties.length;k++){m=this.dynamicProperties[k];this.vao.addAttribute(this.dynamicBuffer,m.attribute,o.FLOAT,false,this.dynamicStride*4,m.offset*4)}for(k=0;k<this.staticProperties.length;k++){m=this.staticProperties[k];this.vao.addAttribute(this.staticBuffer,m.attribute,o.FLOAT,false,this.staticStride*4,m.offset*4)}};h.prototype.uploadDynamic=function(m,o,l){for(var k=0;k<this.dynamicProperties.length;k++){var n=this.dynamicProperties[k];n.uploadFunction(m,o,l,this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer.upload()};h.prototype.uploadStatic=function(m,o,l){for(var k=0;k<this.staticProperties.length;k++){var n=this.staticProperties[k];n.uploadFunction(m,o,l,this.staticData,this.staticStride,n.offset)}this.staticBuffer.upload()};h.prototype.bind=function(){this.vao.bind()};h.prototype.destroy=function(){this.dynamicProperties=null;this.dynamicData=null;this.dynamicBuffer.destroy();this.staticProperties=null;this.staticData=null;this.staticBuffer.destroy()}},{"../../core/utils/createIndicesForQuads":112,"pixi-gl-core":20}],160:[function(h,j,g){var f=h("../../core"),e=h("./ParticleShader"),k=h("./ParticleBuffer");function i(l){f.ObjectRenderer.call(this,l);this.shader=null;this.indexBuffer=null;this.properties=null;this.tempMatrix=new f.Matrix();this.CONTEXT_UID=0}i.prototype=Object.create(f.ObjectRenderer.prototype);i.prototype.constructor=i;j.exports=i;f.WebGLRenderer.registerPlugin("particle",i);i.prototype.onContextChange=function(){var l=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;this.shader=new e(l);this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]};i.prototype.start=function(){this.renderer.bindShader(this.shader)};i.prototype.render=function(n){var o=n.children,w=o.length,x=n._maxSize,v=n._batchSize;if(w===0){return}else{if(w>x){w=x}}var y=n._glBuffers[this.renderer.CONTEXT_UID];if(!y){y=n._glBuffers[this.renderer.CONTEXT_UID]=this.generateBuffers(n)}this.renderer.setBlendMode(n.blendMode);var u=this.renderer.gl;var p=n.worldTransform.copy(this.tempMatrix);p.prepend(this.renderer._activeRenderTarget.projectionMatrix);this.shader.uniforms.projectionMatrix=p.toArray(true);this.shader.uniforms.uAlpha=n.worldAlpha;var l=o[0]._texture.baseTexture;this.renderer.bindTexture(l);for(var s=0,r=0;s<w;s+=v,r+=1){var t=(w-s);if(t>v){t=v}var q=y[r];q.uploadDynamic(o,s,t);if(n._bufferToUpdate===r){q.uploadStatic(o,s,t);n._bufferToUpdate=r+1}q.vao.bind().draw(u.TRIANGLES,t*6).unbind()}};i.prototype.generateBuffers=function(m){var r=this.renderer.gl,l=[],p=m._maxSize,o=m._batchSize,q=m._properties,n;for(n=0;n<p;n+=o){l.push(new k(r,this.properties,q,o))}return l};i.prototype.uploadVertices=function(m,A,r,t,l,o){var B,u,n,z,y,x,s,q,w,v;for(var p=0;p<r;p++){B=m[A+p];u=B._texture;y=B.scale.x;x=B.scale.y;n=u.trim;z=u.orig;if(n){q=n.x-B.anchor.x*z.width;s=q+n.width;v=n.y-B.anchor.y*z.height;w=v+n.height}else{s=(z.width)*(1-B.anchor.x);q=(z.width)*-B.anchor.x;w=z.height*(1-B.anchor.y);v=z.height*-B.anchor.y}t[o]=q*y;t[o+1]=v*x;t[o+l]=s*y;t[o+l+1]=v*x;t[o+l*2]=s*y;t[o+l*2+1]=w*x;t[o+l*3]=q*y;t[o+l*3+1]=w*x;o+=l*4}};i.prototype.uploadPosition=function(n,r,m,s,p,q){for(var l=0;l<m;l++){var o=n[r+l].position;s[q]=o.x;s[q+1]=o.y;s[q+p]=o.x;s[q+p+1]=o.y;s[q+p*2]=o.x;s[q+p*2+1]=o.y;s[q+p*3]=o.x;s[q+p*3+1]=o.y;q+=p*4}};i.prototype.uploadRotation=function(o,r,n,s,p,q){for(var m=0;m<n;m++){var l=o[r+m].rotation;s[q]=l;s[q+p]=l;s[q+p*2]=l;s[q+p*3]=l;q+=p*4}};i.prototype.uploadUvs=function(o,r,n,s,p,q){for(var m=0;m<n;m++){var l=o[r+m]._texture._uvs;if(l){s[q]=l.x0;s[q+1]=l.y0;s[q+p]=l.x1;s[q+p+1]=l.y1;s[q+p*2]=l.x2;s[q+p*2+1]=l.y2;s[q+p*3]=l.x3;s[q+p*3+1]=l.y3;q+=p*4}else{s[q]=0;s[q+1]=0;s[q+p]=0;s[q+p+1]=0;s[q+p*2]=0;s[q+p*2+1]=0;s[q+p*3]=0;s[q+p*3+1]=0;q+=p*4}}};i.prototype.uploadAlpha=function(n,r,m,s,p,q){for(var l=0;l<m;l++){var o=n[r+l].alpha;s[q]=o;s[q+p]=o;s[q+p*2]=o;s[q+p*3]=o;q+=p*4}};i.prototype.destroy=function(){if(this.renderer.gl){this.renderer.gl.deleteBuffer(this.indexBuffer)}f.ObjectRenderer.prototype.destroy.apply(this,arguments);this.shader.destroy();this.indices=null;this.tempMatrix=null}},{"../../core":60,"./ParticleBuffer":159,"./ParticleShader":161}],161:[function(g,h,f){var i=g("../../core/Shader");function e(j){i.call(this,j,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"))}e.prototype=Object.create(i.prototype);e.prototype.constructor=e;h.exports=e},{"../../core/Shader":40}],162:[function(f,g,e){if(!Math.sign){Math.sign=function(h){h=+h;if(h===0||isNaN(h)){return h}return h>0?1:-1}}},{}],163:[function(f,g,e){if(!Object.assign){Object.assign=f("object-assign")}},{"object-assign":13}],164:[function(f,g,e){f("./Object.assign");f("./requestAnimationFrame");f("./Math.sign");if(!window.ArrayBuffer){window.ArrayBuffer=Array}if(!window.Float32Array){window.Float32Array=Array}if(!window.Uint32Array){window.Uint32Array=Array}if(!window.Uint16Array){window.Uint16Array=Array}},{"./Math.sign":162,"./Object.assign":163,"./requestAnimationFrame":165}],165:[function(f,g,e){(function(k){if(!(Date.now&&Date.prototype.getTime)){Date.now=function i(){return new Date().getTime()}}if(!(k.performance&&k.performance.now)){var j=Date.now();if(!k.performance){k.performance={}}k.performance.now=function(){return Date.now()-j}}var l=Date.now();var m=["ms","moz","webkit","o"];for(var h=0;h<m.length&&!k.requestAnimationFrame;++h){k.requestAnimationFrame=k[m[h]+"RequestAnimationFrame"];k.cancelAnimationFrame=k[m[h]+"CancelAnimationFrame"]||k[m[h]+"CancelRequestAnimationFrame"]}if(!k.requestAnimationFrame){k.requestAnimationFrame=function(p){if(typeof p!=="function"){throw new TypeError(p+"is not a function")}var o=Date.now(),n=16+l-o;if(n<0){n=0}l=o;return setTimeout(function(){l=Date.now();p(performance.now())},n)}}if(!k.cancelAnimationFrame){k.cancelAnimationFrame=function(n){clearTimeout(n)}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],166:[function(g,h,f){var e=g("../../core");function i(){}i.prototype.constructor=i;h.exports=i;i.prototype.upload=function(k,j){if(typeof k==="function"){j=k;k=null}j()};i.prototype.register=function(){return this};i.prototype.add=function(){return this};i.prototype.destroy=function(){};e.CanvasRenderer.registerPlugin("prepare",i)},{"../../core":60}],167:[function(f,g,e){g.exports={webGL:f("./webgl/WebGLPrepare"),canvas:f("./canvas/CanvasPrepare")}},{"./canvas/CanvasPrepare":166,"./webgl/WebGLPrepare":168}],168:[function(f,e,i){var g=f("../../core"),j=g.ticker.shared;function h(o){this.renderer=o;this.queue=[];this.addHooks=[];this.uploadHooks=[];this.completes=[];this.ticking=false;this.register(k,m).register(l,n)}h.UPLOADS_PER_FRAME=4;h.prototype.constructor=h;e.exports=h;h.prototype.upload=function(p,o){if(typeof p==="function"){o=p;p=null}if(p){this.add(p)}if(this.queue.length){this.numLeft=h.UPLOADS_PER_FRAME;this.completes.push(o);if(!this.ticking){this.ticking=true;j.add(this.tick,this)}}else{o()}};h.prototype.tick=function(){var r,p;while(this.queue.length&&this.numLeft>0){var s=this.queue[0];var o=false;for(r=0,p=this.uploadHooks.length;r<p;r++){if(this.uploadHooks[r](this.renderer,s)){this.numLeft--;this.queue.shift();o=true;break}}if(!o){this.queue.shift()}}if(this.queue.length){this.numLeft=h.UPLOADS_PER_FRAME}else{this.ticking=false;j.remove(this.tick,this);var q=this.completes.slice(0);this.completes.length=0;for(r=0,p=q.length;r<p;r++){q[r]()}}};h.prototype.register=function(p,o){if(p){this.addHooks.push(p)}if(o){this.uploadHooks.push(o)}return this};h.prototype.add=function(q){var p,o;for(p=0,o=this.addHooks.length;p<o;p++){if(this.addHooks[p](q,this.queue)){break}}if(q instanceof g.Container){for(p=q.children.length-1;p>=0;p--){this.add(q.children[p])}}return this};h.prototype.destroy=function(){if(this.ticking){j.remove(this.tick,this)}this.ticking=false;this.addHooks=null;this.uploadHooks=null;this.renderer=null;this.completes=null;this.queue=null};function m(p,o){if(o instanceof g.BaseTexture){p.textureManager.updateTexture(o);return true}return false}function n(p,o){if(o instanceof g.Graphics){p.plugins.graphics.updateGraphics(o);return true}return false}function k(q,o){if(q instanceof g.BaseTexture){if(o.indexOf(q)===-1){o.push(q)}return true}else{if(q._texture&&q._texture instanceof g.Texture){var p=q._texture.baseTexture;if(o.indexOf(p)===-1){o.push(p)}return true}}return false}function l(p,o){if(p instanceof g.Graphics){o.push(p);return true}return false}g.WebGLRenderer.registerPlugin("prepare",h)},{"../../core":60}]},{},[141])(141)});